{"version":3,"sources":["../../../../process/browser.js","../base/common/winjs.base.js","../base/common/errors.js","../base/common/lifecycle.js","../base/common/platform.js","../base/common/functional.js","../base/common/iterator.js","../base/common/linkedList.js","../base/common/event.js","../base/common/cancellation.js","../base/common/async.js","../base/common/winjs.polyfill.promise.js","../base/common/worker/simpleWorker.js","../base/common/arrays.js","../base/common/diff/diffChange.js","../base/common/diff/diff.js","../base/common/uri.js","common/core/position.js","common/core/range.js","../base/common/strings.js","common/diff/diffComputer.js","common/core/uint.js","common/viewModel/prefixSumComputer.js","common/model/mirrorTextModel.js","common/model/wordHelper.js","common/core/characterClassifier.js","common/modes/linkComputer.js","common/modes/supports/inplaceReplaceSupport.js","../base/common/keyCodes.js","common/core/selection.js","common/core/token.js","common/standalone/standaloneEnums.js","common/standalone/standaloneBase.js","common/services/editorSimpleWorker.js","editor.worker.js"],"names":["process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","browser","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","__winjs_exports","_modules","Object","create","_winjs","moduleId","deps","factory","exportsPassedIn","depsValues","map","dep","result","globalObject","window","self","global","baseCoreUtilsInit","_Global","hasWinRT","Windows","markSupportedForProcessing","func","supportedForProcessing","actualSetImmediate","_setImmediate","callback","setImmediate","bind","profilerInit","msWriteProfilerMark","baseInit","_WinJS","_BaseCoreUtils","_WriteProfilerMark","initializeProperties","target","members","prefix","keys","isArray","properties","key","enumerable","charCodeAt","member","value","undefined","get","set","setName","configurable","writable","forEach","defineProperties","_rootNamespace","Namespace","createNamespace","parentNamespace","currentNamespace","namespaceFragments","split","splice","namespaceName","defineProperty","defineWithParent","define","LazyStates","uninitialized","working","initialized","lazy","f","state","moduleDefine","publicNS","_lazy","_moduleDefine","constructor","instanceMembers","staticMembers","derive","baseClass","basePrototype","mix","Class","errorsInit","_Base","ErrorFromName","message","eventsInit","createEventProperty","eventPropStateName","userHandler","handler","wrapper","evt","addEventListener","removeEventListener","createEventProperties","props","EventMixinEvent","EventMixinEvent_ctor","type","detail","timeStamp","Date","now","bubbles","cancelable","currentTarget","defaultPrevented","_preventDefaultCalled","trusted","eventPhase","preventDefault","stopImmediatePropagation","_stopImmediatePropagationCalled","stopPropagation","eventMixin","_listeners","listener","useCapture","eventListeners","l","dispatchEvent","details","eventValue","slice","_createEventProperty","traceInit","nop","v","_traceAsyncOperationStarting","Debug","msTraceAsyncOperationStarting","_traceAsyncOperationCompleted","msTraceAsyncOperationCompleted","_traceAsyncCallbackStarting","msTraceAsyncCallbackStarting","_traceAsyncCallbackCompleted","msTraceAsyncCallbackCompleted","promiseStateMachineInit","_ErrorFromName","_Events","_Trace","setNonUserCodeExceptions","ListenerType","promiseEventListeners","errorET","canceledName","tagWithStack","tag","promise","thenPromise","errorPromise","exceptionPromise","completePromise","all","error_number","state_created","state_working","state_waiting","state_waiting_canceled","state_canceled","state_canceling","state_success_notify","state_success","state_error_notify","state_error","_","enter","_setState","cancel","done","then","_completed","_error","_notify","_progress","_setCompleteValue","_setErrorValue","completed","error","progress","setCompleteValue","setErrorValue","waitedUpon","_value","ThenPromise","_state","pushListener","_errorId","_chainedError","callonerror","detailsForHandledError","handlesOnError","_cancelAction","CompletePromise","p","shift","notifySuccess","_cleanupAction","ErrorPromise","notifyError","PromiseStateMachine","_nextState","_run","Promise_done","onComplete","onError","onProgress","Promise_then","context","detailsForChainedError","detailsForError","_setChainedErrorValue","_setExceptionValue","detailsForException","targetState","createErrorDetails","exception","id","parent","errorValue","_isException","errorId","setErrorInfo","exceptionValue","asyncOpID","c","onerrorDetails","MS_ASYNC_OP_STATUS_SUCCESS","ex","errorID","MS_ASYNC_OP_STATUS_CANCELED","MS_ASYNC_OP_STATUS_ERROR","asyncCallbackStarted","onerrorDetailsGenerator","isException","creator","_stack","Promise","_getStack","_creator","ErrorPromise_ctor","ErrorPromise_done","unused","_doneHandler","ErrorPromise_then","ExceptionPromise","ExceptionPromise_ctor","CompletePromise_ctor","CompletePromise_done","CompletePromise_then","newValue","timeoutMS","timeoutWithPromise","cancelPromise","cancelTimeout","staticCanceledPromise","Promise_ctor","init","oncancel","_oncancel","complete","msg","stack","Promise_addEventListener","eventType","capture","any","Promise_any","values","canceled","as","Promise_as","Promise_dispatchEvent","is","Promise_is","join","Promise_join","errors","results","undefineds","pending","argDone","errorCount","canceledCount","Key","Done","Promise_removeEventListener","thenEach","Promise_thenEach","Promise_timeout","time","to","wrap","Promise_wrap","wrapError","Promise_wrapError","_veryExpensiveTagWithStack","_veryExpensiveTagWithStack_tag","debuggerEnabled","_cancelBlocker","Promise__cancelBlocker","input","output","Promise_done_rethrow","promiseInit","_StateMachine","TPromise","PPromise","outstandingPromiseErrors","promiseErrorHandler","onUnexpectedError","console","log","ErrorHandler","unexpectedErrorHandler","onUnexpectedExternalError","errorHandler","isPromiseCanceledError","transformErrorForSerialization","name_1","stacktrace","$isError","illegalArgument","illegalState","isDisposable","thing","dispose","first","rest","_i","d","combinedDisposable","disposables","toDisposable","fn","Disposable","_toDispose","_register","t","None","freeze","ImmortalReference","object","_isWindows","_isMacintosh","_isLinux","_isNative","_isWeb","_locale","_language","_translationsConfigFile","LANGUAGE_DEFAULT","isElectronRenderer","electron","navigator","userAgent","indexOf","language","platform","rawNlsConfig","nlsConfig","JSON","parse","resolved","availableLanguages","locale","_platform","isWindows","isMacintosh","isLinux","isNative","isWeb","_globals","globals","OS","_this","didCall","__extends","extendStatics","b","setPrototypeOf","__proto__","hasOwnProperty","__","FIN","Iterator","_empty","next","empty","fromArray","index","from","elements","iterator","element","filter","collect","ArrayIterator","items","start","end","Math","min","current","ArrayNavigator","_super","previous","max","last","MappedIterator","Node","LinkedList","isEmpty","_first","unshift","insert","atTheEnd","newNode","_last","oldLast","prev","oldFirst","candidate","anchor","node","Event","_disposable","Emitter","_options","_event","_disposed","_deliveryQueue","thisArgs","firstListener","onFirstListenerAdd","remove","onFirstListenerDidAdd","onListenerDidAdd","_noop","onLastListenerRemove","hasListeners","fire","event","iter","_a","event_1","EventMultiplexer","events","emitter","add","hook","unhook","idx","r","didFire","anyEvent","debounceEvent","merger","delay","leading","subscription","handle","numDebouncedCalls","cur","_output","EventBufferer","buffers","wrapEvent","buffer","bufferEvents","pop","flush","mapEvent","filterEvent","ChainableEvent","chain","Relay","listening","inputEvent","inputEventListener","shortcutEvent","CancellationToken","isCancellationToken","Cancelled","MutableToken","isCancellationRequested","onCancellationRequested","_isCancelled","_emitter","CancellationTokenSource","_token","isThenable","obj","createCancelablePromise","source","thenable","token","resolve","reject","err","class_1","catch","Delayer","defaultDelay","completionPromise","doResolve","task","trigger","doReject","millis","always","safeCallback","promiseFactories","shouldStop","defaultValue","loop","TimeoutTimer","runner","setIfNotSet","cancelAndSet","IntervalTimer","clearInterval","interval","setInterval","RunOnceScheduler","timeoutToken","timeoutHandler","onTimeout","isScheduled","schedule","doRun","runWhenIdle","requestIdleCallback","cancelIdleCallback","dummyIdle_1","didTimeout","timeRemaining","disposed","IdleValue","executor","_executor","_didRun","_handle","getValue","isWinJSPromise","PolyfillPromise","initOrPromise","_winjsPromise","WinJSPromise","initializing","thenables","race","entry","onFulfilled","onRejected","sync","err2","INITIALIZE","webWorkerWarningLogged","logOnceWebWorkerWarning","warn","SimpleWorkerProtocol","_workerId","_handler","_lastSentReq","_pendingReplies","setWorkerId","workerId","sendMessage","method","req","String","_send","vsWorker","handleMessage","serializedMessage","_handleMessage","seq","replyMessage","reply","res","requestMessage","strMsg","stringify","SimpleWorkerClient","workerFactory","lazyProxyReject","_worker","_protocol","postMessage","getId","loaderConfiguration","require","getConfig","requirejs","s","contexts","config","_onModuleLoaded","_lazyProxy","availableMethods","proxy","createProxyMethod","proxyMethodRequest","_onError","_request","getProxyObject","info","SimpleWorkerServer","postSerializedMessage","requestHandler","_requestHandler","onmessage","initialize","loaderConfig","methods","prop","baseUrl","paths","vs","catchError","handlerModule","tail","n","tail2","arr","equals","one","other","itemEquals","a","binarySearch","comparator","low","high","mid","comp","findFirstInSorted","floor","mergeSort","data","compare","_sort","_merge","lo","hi","aux","leftIdx","rightIdx","groupBy","currentGroup","coalesce","isFalsyOrEmpty","distinct","keyFn","position","seen","elem","firstIndex","notFoundValue","flatten","range","arg","arrayInsert","insertIndex","insertArr","before","after","DiffChange","originalStart","originalLength","modifiedStart","modifiedLength","getOriginalEnd","getModifiedEnd","createStringSequence","getLength","getElementAtIndex","pos","stringDiff","original","modified","pretty","LcsDiff","ComputeDiff","Assert","condition","MyArray","Copy","sourceArray","sourceIndex","destinationArray","destinationIndex","MaxDifferencesHistory","DiffChangeHelper","m_changes","m_originalStart","Number","MAX_VALUE","m_modifiedStart","m_originalCount","m_modifiedCount","MarkNextChange","AddOriginalElement","originalIndex","modifiedIndex","AddModifiedElement","getChanges","getReverseChanges","reverse","originalSequence","newSequence","continueProcessingPredicate","OriginalSequence","ModifiedSequence","ContinueProcessingPredicate","m_forwardHistory","m_reverseHistory","ElementsAreEqual","newIndex","OriginalElementsAreEqual","index1","index2","ModifiedElementsAreEqual","_ComputeDiff","originalEnd","modifiedEnd","quitEarlyArr","changes","ComputeDiffRecursive","PrettifyChanges","midOriginalArr","midModifiedArr","ComputeRecursionPoint","midOriginal","midModified","leftChanges","rightChanges","ConcatenateChanges","WALKTRACE","diagonalForwardBase","diagonalForwardStart","diagonalForwardEnd","diagonalForwardOffset","diagonalReverseBase","diagonalReverseStart","diagonalReverseEnd","diagonalReverseOffset","forwardPoints","reversePoints","deltaIsEven","forwardChanges","reverseChanges","changeHelper","diagonalMin","diagonalMax","diagonalRelative","lastOriginalIndex","MIN_VALUE","historyIndex","diagonal","originalStartPoint","modifiedStartPoint","lastForwardChange","numDifferences","maxDifferences","numDiagonals","delta","tempOriginalIndex","furthestOriginalIndex","furthestModifiedIndex","ClipDiagonalBound","abs","matchLengthOfLongest","temp","change","originalStop","modifiedStop","checkOriginal","checkModified","mergedChangeArr","ChangesOverlap","prevChange","bestDelta","bestScore","_boundaryScore","score","_OriginalIsBoundary","test","_OriginalRegionIsBoundary","_ModifiedIsBoundary","_ModifiedRegionIsBoundary","originalScore","modifiedScore","left","right","diagonalBaseIndex","diagonalsBelow","diagonalsAbove","diffEven","lowerBoundEven","upperBoundEven","_schemePattern","_singleSlashStart","_doubleSlashStart","_throwOnMissingSchema","_validateUri","ret","scheme","authority","path","query","fragment","_referenceResolution","_slash","_regexp","URI","schemeOrData","isUri","_makeFsPath","with","_URI","match","exec","decodeURIComponent","file","replace","substring","components","toString","skipEncoding","_asFormatted","toJSON","revive","_fsPath","fsPath","_formatted","external","$mid","encodeTable","encodeURIComponentFast","uriComponent","allowSlash","nativeEncodePos","code","encodeURIComponent","charAt","substr","escaped","encodeURIComponentMinimal","uri","toLowerCase","encoder","userinfo","fromCharCode","Position","lineNumber","column","newLineNumber","newColumn","deltaLineNumber","deltaColumn","isBefore","isBeforeOrEqual","aLineNumber","bLineNumber","aColumn","bColumn","clone","lift","isIPosition","Range","startLineNumber","startColumn","endLineNumber","endColumn","containsPosition","containsRange","otherRange","plusRange","intersectRanges","resultStartLineNumber","resultStartColumn","resultEndLineNumber","resultEndColumn","otherStartLineNumber","otherStartColumn","otherEndLineNumber","otherEndColumn","equalsRange","getEndPosition","getStartPosition","setEndPosition","setStartPosition","collapseToStart","fromPositions","isIRange","areIntersectingOrTouching","areIntersecting","compareRangesUsingStarts","aStartLineNumber","bStartLineNumber","aStartColumn","bStartColumn","aEndLineNumber","bEndLineNumber","aEndColumn","bEndColumn","aExists","bExists","compareRangesUsingEnds","spansMultipleLines","isFalsyOrWhitespace","str","trim","pad","char","_formatRegexp","format","group","parseInt","isNaN","escape","html","escapeRegExpCharacters","haystack","needle","trimmed","ltrim","rtrim","needleLen","offset","haystackLen","lastIndexOf","convertSimple2RegExpPattern","pattern","startsWith","endsWith","diff","createRegExp","searchString","isRegex","options","wholeWord","modifiers","matchCase","multiline","RegExp","regExpLeadsToEndlessLoop","regexp","lastIndex","firstNonWhitespaceIndex","chCode","getLeadingWhitespace","lastNonWhitespaceIndex","startIndex","isLowerAsciiLetter","isUpperAsciiLetter","isAsciiLetter","equalsIgnoreCase","len1","len2","doEqualsIgnoreCase","stopAt","codeA","codeB","startsWithIgnoreCase","candidateLength","commonPrefixLength","commonSuffixLength","aLastIndex","bLastIndex","isHighSurrogate","charCode","isLowSurrogate","CONTAINS_RTL","containsRTL","CONTAINS_EMOJI","containsEmoji","IS_BASIC_ASCII","isBasicASCII","containsFullWidthCharacter","isFullWidthCharacter","UTF8_BOM_CHARACTER","startsWithUTF8BOM","safeBtoa","btoa","repeat","count","MAXIMUM_RUN_TIME","MINIMUM_MATCHING_CHARACTER_LENGTH","computeDiff","modifiedSequence","diffAlgo","LineMarkerSequence","lines","startColumns","endColumns","length_1","_getFirstNonBlankColumn","_getLastNonBlankColumn","_lines","_startColumns","_endColumns","getStartLineNumber","getEndLineNumber","txt","strings","getCharSequence","shouldIgnoreTrimWhitespace","endIndex","charCodes","lineNumbers","columns","lineContent","col","CharSequence","_charCodes","_lineNumbers","_columns","getStartColumn","getEndColumn","CharChange","originalStartLineNumber","originalStartColumn","originalEndLineNumber","originalEndColumn","modifiedStartLineNumber","modifiedStartColumn","modifiedEndLineNumber","modifiedEndColumn","createFromDiffChange","diffChange","originalCharSequence","modifiedCharSequence","postProcessCharChanges","rawChanges","currChange","originalMatchingLength","modifiedMatchingLength","matchingLength","LineChange","charChanges","createFromDiffResult","originalLineSequence","modifiedLineSequence","shouldComputeCharChanges","shouldPostProcessCharChanges","length_2","DiffComputer","originalLines","modifiedLines","opts","shouldMakePrettyDiff","maximumRunTimeMs","computationStartTime","getTime","_continueProcessingPredicate","lineChanges","length_3","originalLineIndex","modifiedLineIndex","nextChange","originalLine","modifiedLine","originalChar","modifiedChar","_pushTrimWhitespaceCharChange","originalMaxColumn","modifiedMaxColumn","originalLineNumber","modifiedLineNumber","_mergeTrimWhitespaceCharChange","Uint8Matrix","rows","cols","Uint8Array","_data","row","toUint8","toUint32","toUint32Array","Uint32Array","PrefixSumIndexOfResult","remainder","PrefixSumComputer","prefixSum","prefixSumValidIndex","Int32Array","getCount","insertValues","oldValues","oldPrefixSum","insertValuesLen","subarray","changeValue","removeValues","cnt","maxCnt","getTotalValue","_getAccumulatedValue","getAccumulatedValue","getIndexOf","accumulatedValue","midStop","midStart","PrefixSumComputerWithCache","_cacheAccumulatedValueStart","_cache","_actual","_bustCache","cacheIndex","warmUpCache","accumulatedValueStart","accumulatedValueEnd","newCache","MirrorTextModel","eol","versionId","_uri","_eol","_versionId","_lineStarts","getText","onEvents","_acceptDeleteRange","_acceptInsertText","text","_ensureLineStarts","eolLength","linesLength","lineStartValues","_setLineText","lineIndex","insertText","insertLines","newLengths","USUAL_WORD_SEPARATORS","createWordRegExp","allowInWords","DEFAULT_WORD_REGEXP","ensureValidWordDefinition","wordDefinition","flags","ignoreCase","getWordAtPosFast","textOffset","matchIndex","word","getWordAtPosSlow","getWordAtText","CharacterClassifier","_defaultValue","_asciiMap","_createAsciiMap","_map","Map","asciiMap","CharacterSet","has","StateMachine","edges","maxCharCode","maxState","states","_b","_states","_maxCharCode","nextState","currentState","_stateMachine","getStateMachine","_classifier","getClassifier","FORCE_TERMINATION_CHARACTERS","CANNOT_END_WITH_CHARACTERS","LinkComputer","_createLink","classifier","line","linkBeginIndex","linkEndIndex","lastIncludedCharIndex","chClass","charCodeBeforeLink","lastCharCodeInLink","url","computeLinks","model","stateMachine","lineCount","getLineCount","getLineContent","j","linkBeginChCode","hasOpenParens","hasOpenSquareBracket","hasOpenCurlyBracket","resetStateMachine","BasicInplaceReplace","_defaultValueSet","navigateValueSet","range1","text1","range2","text2","up","doNavigateValueSet","numberResult","numberReplace","textReplace","precision","pow","n1","n2","parseFloat","valueSetsReplace","valueSets","valueSetReplace","valueSet","INSTANCE","KeyCodeStrMap","_keyCodeToStr","_strToKeyCode","keyCode","keyCodeToStr","strToKeyCode","uiMap","userSettingsUSMap","userSettingsGeneralMap","uiLabel","usUserSettingsLabel","generalUserSettingsLabel","KeyCodeUtils","fromString","toUserSettingsUS","toUserSettingsGeneral","fromUserSettings","KeyChord","firstPart","secondPart","chordPart","createKeybinding","keybinding","ChordKeybinding","createSimpleKeybinding","ctrlCmd","winCtrl","ctrlKey","shiftKey","altKey","metaKey","SimpleKeybinding","isModifierKey","isDuplicateModifierCase","ResolvedKeybindingPart","kbLabel","kbAriaLabel","keyLabel","keyAriaLabel","ResolvedKeybinding","Selection","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","equalsSelection","selectionsEqual","getDirection","getPosition","liftSelection","sel","selectionsArrEqual","isISelection","createWithDirection","direction","Token","TokenizationResult","tokens","endState","TokenizationResult2","MarkerTag","MarkerSeverity","KeyCode","SelectionDirection","ScrollbarVisibility","OverviewRulerLane","EndOfLinePreference","DefaultEndOfLine","EndOfLineSequence","TrackedRangeStickiness","ScrollType","CursorChangeReason","RenderMinimap","WrappingIndent","TextEditorCursorBlinkingStyle","TextEditorCursorStyle","RenderLineNumbersType","ContentWidgetPositionPreference","OverlayWidgetPositionPreference","MouseTargetType","IndentAction","CompletionItemKind","CompletionItemInsertTextRule","CompletionTriggerKind","SignatureHelpTriggerReason","DocumentHighlightKind","SymbolKind","KeyMod","chord","CtrlCmd","Shift","Alt","WinCtrl","createMonacoBaseAPI","editor","languages","standaloneEnums","Uri","MirrorModel","getLinesContent","getWordAtPosition","wordAtText","getWordUntilPosition","wordAtPosition","createWordIterator","lineText","wordRangesIdx","wordRanges","_wordenize","getLineWords","content","ranges","words","ranges_1","getValueInRange","_validateRange","lineEnding","startLineIndex","endLineIndex","resultLines","offsetAt","_validatePosition","positionAt","out","lineLength","hasChanged","maxCharacter","BaseMirrorModel","BaseEditorSimpleWorker","foreignModuleFactory","_foreignModuleFactory","_foreignModule","originalUrl","modifiedUrl","ignoreTrimWhitespace","_getModel","diffComputer","identical","_modelsAreIdentical","originalLineCount","modifiedLineCount","computeMoreMinimalEdits","modelUrl","edits","lastEol","aRng","bRng","edits_1","_diffLimit","editOffset","changes_1","newEdit","textualSuggest","wordDef","wordDefFlags","suggestions","wordDefRegExp","currentWord","_suggestionsLimit","kind","label","computeWordRanges","words_1","selectionText","wordRange","loadForeignModule","createData","ctx","getMirrorModels","_getModels","fmr","EditorSimpleWorkerImpl","_models","acceptNewModel","EOL","acceptModelChanged","strURL","acceptRemovedModel","importScripts","monaco","foreignModule","editorWorker","simpleWorker"],"mappings":"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","file":"editor.worker.map","sourceRoot":"../node_modules/monaco-editor/esm/vs/editor","sourcesContent":["// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * Extracted from https://github.com/winjs/winjs\n * Version: 4.4.0(ec3258a9f3a36805a187848984e3bb938044178d)\n * Copyright (c) Microsoft Corporation.\n * All Rights Reserved.\n * Licensed under the MIT License.\n */\nvar __winjs_exports;\n\n(function() {\n\nvar _modules = Object.create(null);//{};\n_modules[\"WinJS/Core/_WinJS\"] = {};\n\nvar _winjs = function(moduleId, deps, factory) {\n    var exports = {};\n    var exportsPassedIn = false;\n\n    var depsValues = deps.map(function(dep) {\n        if (dep === 'exports') {\n            exportsPassedIn = true;\n            return exports;\n        }\n        return _modules[dep];\n    });\n\n    var result = factory.apply({}, depsValues);\n\n    _modules[moduleId] = exportsPassedIn ? exports : result;\n};\n\n\n_winjs(\"WinJS/Core/_Global\", [], function () {\n    \"use strict\";\n\n    // Appease jshint\n    /* global window, self, global */\n\n    var globalObject =\n        typeof window !== 'undefined' ? window :\n        typeof self !== 'undefined' ? self :\n        typeof global !== 'undefined' ? global :\n        {};\n    return globalObject;\n});\n\n_winjs(\"WinJS/Core/_BaseCoreUtils\", [\"WinJS/Core/_Global\"], function baseCoreUtilsInit(_Global) {\n    \"use strict\";\n\n    var hasWinRT = !!_Global.Windows;\n\n    function markSupportedForProcessing(func) {\n        /// <signature helpKeyword=\"WinJS.Utilities.markSupportedForProcessing\">\n        /// <summary locid=\"WinJS.Utilities.markSupportedForProcessing\">\n        /// Marks a function as being compatible with declarative processing, such as WinJS.UI.processAll\n        /// or WinJS.Binding.processAll.\n        /// </summary>\n        /// <param name=\"func\" type=\"Function\" locid=\"WinJS.Utilities.markSupportedForProcessing_p:func\">\n        /// The function to be marked as compatible with declarative processing.\n        /// </param>\n        /// <returns type=\"Function\" locid=\"WinJS.Utilities.markSupportedForProcessing_returnValue\">\n        /// The input function.\n        /// </returns>\n        /// </signature>\n        func.supportedForProcessing = true;\n        return func;\n    }\n\n    var actualSetImmediate = null;\n\n    return {\n        hasWinRT: hasWinRT,\n        markSupportedForProcessing: markSupportedForProcessing,\n        _setImmediate: function (callback) {\n            // BEGIN monaco change\n            if (actualSetImmediate === null) {\n                if (_Global.setImmediate) {\n                    actualSetImmediate = _Global.setImmediate.bind(_Global);\n                } else if (typeof process !== 'undefined' && typeof process.nextTick === 'function') {\n                    actualSetImmediate = process.nextTick.bind(process);\n                } else {\n                    actualSetImmediate = _Global.setTimeout.bind(_Global);\n                }\n            }\n            actualSetImmediate(callback);\n            // END monaco change\n        }\n    };\n});\n_winjs(\"WinJS/Core/_WriteProfilerMark\", [\"WinJS/Core/_Global\"], function profilerInit(_Global) {\n    \"use strict\";\n\n    return _Global.msWriteProfilerMark || function () { };\n});\n_winjs(\"WinJS/Core/_Base\", [\"WinJS/Core/_WinJS\",\"WinJS/Core/_Global\",\"WinJS/Core/_BaseCoreUtils\",\"WinJS/Core/_WriteProfilerMark\"], function baseInit(_WinJS, _Global, _BaseCoreUtils, _WriteProfilerMark) {\n    \"use strict\";\n\n    function initializeProperties(target, members, prefix) {\n        var keys = Object.keys(members);\n        var isArray = Array.isArray(target);\n        var properties;\n        var i, len;\n        for (i = 0, len = keys.length; i < len; i++) {\n            var key = keys[i];\n            var enumerable = key.charCodeAt(0) !== /*_*/95;\n            var member = members[key];\n            if (member && typeof member === 'object') {\n                if (member.value !== undefined || typeof member.get === 'function' || typeof member.set === 'function') {\n                    if (member.enumerable === undefined) {\n                        member.enumerable = enumerable;\n                    }\n                    if (prefix && member.setName && typeof member.setName === 'function') {\n                        member.setName(prefix + \".\" + key);\n                    }\n                    properties = properties || {};\n                    properties[key] = member;\n                    continue;\n                }\n            }\n            if (!enumerable) {\n                properties = properties || {};\n                properties[key] = { value: member, enumerable: enumerable, configurable: true, writable: true };\n                continue;\n            }\n            if (isArray) {\n                target.forEach(function (target) {\n                    target[key] = member;\n                });\n            } else {\n                target[key] = member;\n            }\n        }\n        if (properties) {\n            if (isArray) {\n                target.forEach(function (target) {\n                    Object.defineProperties(target, properties);\n                });\n            } else {\n                Object.defineProperties(target, properties);\n            }\n        }\n    }\n\n    (function () {\n\n        var _rootNamespace = _WinJS;\n        if (!_rootNamespace.Namespace) {\n            _rootNamespace.Namespace = Object.create(Object.prototype);\n        }\n\n        function createNamespace(parentNamespace, name) {\n            var currentNamespace = parentNamespace || {};\n            if (name) {\n                var namespaceFragments = name.split(\".\");\n                if (currentNamespace === _Global && namespaceFragments[0] === \"WinJS\") {\n                    currentNamespace = _WinJS;\n                    namespaceFragments.splice(0, 1);\n                }\n                for (var i = 0, len = namespaceFragments.length; i < len; i++) {\n                    var namespaceName = namespaceFragments[i];\n                    if (!currentNamespace[namespaceName]) {\n                        Object.defineProperty(currentNamespace, namespaceName,\n                            { value: {}, writable: false, enumerable: true, configurable: true }\n                        );\n                    }\n                    currentNamespace = currentNamespace[namespaceName];\n                }\n            }\n            return currentNamespace;\n        }\n\n        function defineWithParent(parentNamespace, name, members) {\n            /// <signature helpKeyword=\"WinJS.Namespace.defineWithParent\">\n            /// <summary locid=\"WinJS.Namespace.defineWithParent\">\n            /// Defines a new namespace with the specified name under the specified parent namespace.\n            /// </summary>\n            /// <param name=\"parentNamespace\" type=\"Object\" locid=\"WinJS.Namespace.defineWithParent_p:parentNamespace\">\n            /// The parent namespace.\n            /// </param>\n            /// <param name=\"name\" type=\"String\" locid=\"WinJS.Namespace.defineWithParent_p:name\">\n            /// The name of the new namespace.\n            /// </param>\n            /// <param name=\"members\" type=\"Object\" locid=\"WinJS.Namespace.defineWithParent_p:members\">\n            /// The members of the new namespace.\n            /// </param>\n            /// <returns type=\"Object\" locid=\"WinJS.Namespace.defineWithParent_returnValue\">\n            /// The newly-defined namespace.\n            /// </returns>\n            /// </signature>\n            var currentNamespace = createNamespace(parentNamespace, name);\n\n            if (members) {\n                initializeProperties(currentNamespace, members, name || \"<ANONYMOUS>\");\n            }\n\n            return currentNamespace;\n        }\n\n        function define(name, members) {\n            /// <signature helpKeyword=\"WinJS.Namespace.define\">\n            /// <summary locid=\"WinJS.Namespace.define\">\n            /// Defines a new namespace with the specified name.\n            /// </summary>\n            /// <param name=\"name\" type=\"String\" locid=\"WinJS.Namespace.define_p:name\">\n            /// The name of the namespace. This could be a dot-separated name for nested namespaces.\n            /// </param>\n            /// <param name=\"members\" type=\"Object\" locid=\"WinJS.Namespace.define_p:members\">\n            /// The members of the new namespace.\n            /// </param>\n            /// <returns type=\"Object\" locid=\"WinJS.Namespace.define_returnValue\">\n            /// The newly-defined namespace.\n            /// </returns>\n            /// </signature>\n            return defineWithParent(_Global, name, members);\n        }\n\n        var LazyStates = {\n            uninitialized: 1,\n            working: 2,\n            initialized: 3,\n        };\n\n        function lazy(f) {\n            var name;\n            var state = LazyStates.uninitialized;\n            var result;\n            return {\n                setName: function (value) {\n                    name = value;\n                },\n                get: function () {\n                    switch (state) {\n                        case LazyStates.initialized:\n                            return result;\n\n                        case LazyStates.uninitialized:\n                            state = LazyStates.working;\n                            try {\n                                _WriteProfilerMark(\"WinJS.Namespace._lazy:\" + name + \",StartTM\");\n                                result = f();\n                            } finally {\n                                _WriteProfilerMark(\"WinJS.Namespace._lazy:\" + name + \",StopTM\");\n                                state = LazyStates.uninitialized;\n                            }\n                            f = null;\n                            state = LazyStates.initialized;\n                            return result;\n\n                        case LazyStates.working:\n                            throw \"Illegal: reentrancy on initialization\";\n\n                        default:\n                            throw \"Illegal\";\n                    }\n                },\n                set: function (value) {\n                    switch (state) {\n                        case LazyStates.working:\n                            throw \"Illegal: reentrancy on initialization\";\n\n                        default:\n                            state = LazyStates.initialized;\n                            result = value;\n                            break;\n                    }\n                },\n                enumerable: true,\n                configurable: true,\n            };\n        }\n\n        // helper for defining AMD module members\n        function moduleDefine(exports, name, members) {\n            var target = [exports];\n            var publicNS = null;\n            if (name) {\n                publicNS = createNamespace(_Global, name);\n                target.push(publicNS);\n            }\n            initializeProperties(target, members, name || \"<ANONYMOUS>\");\n            return publicNS;\n        }\n\n        // Establish members of the \"WinJS.Namespace\" namespace\n        Object.defineProperties(_rootNamespace.Namespace, {\n\n            defineWithParent: { value: defineWithParent, writable: true, enumerable: true, configurable: true },\n\n            define: { value: define, writable: true, enumerable: true, configurable: true },\n\n            _lazy: { value: lazy, writable: true, enumerable: true, configurable: true },\n\n            _moduleDefine: { value: moduleDefine, writable: true, enumerable: true, configurable: true }\n\n        });\n\n    })();\n\n    (function () {\n\n        function define(constructor, instanceMembers, staticMembers) {\n            /// <signature helpKeyword=\"WinJS.Class.define\">\n            /// <summary locid=\"WinJS.Class.define\">\n            /// Defines a class using the given constructor and the specified instance members.\n            /// </summary>\n            /// <param name=\"constructor\" type=\"Function\" locid=\"WinJS.Class.define_p:constructor\">\n            /// A constructor function that is used to instantiate this class.\n            /// </param>\n            /// <param name=\"instanceMembers\" type=\"Object\" locid=\"WinJS.Class.define_p:instanceMembers\">\n            /// The set of instance fields, properties, and methods made available on the class.\n            /// </param>\n            /// <param name=\"staticMembers\" type=\"Object\" locid=\"WinJS.Class.define_p:staticMembers\">\n            /// The set of static fields, properties, and methods made available on the class.\n            /// </param>\n            /// <returns type=\"Function\" locid=\"WinJS.Class.define_returnValue\">\n            /// The newly-defined class.\n            /// </returns>\n            /// </signature>\n            constructor = constructor || function () { };\n            _BaseCoreUtils.markSupportedForProcessing(constructor);\n            if (instanceMembers) {\n                initializeProperties(constructor.prototype, instanceMembers);\n            }\n            if (staticMembers) {\n                initializeProperties(constructor, staticMembers);\n            }\n            return constructor;\n        }\n\n        function derive(baseClass, constructor, instanceMembers, staticMembers) {\n            /// <signature helpKeyword=\"WinJS.Class.derive\">\n            /// <summary locid=\"WinJS.Class.derive\">\n            /// Creates a sub-class based on the supplied baseClass parameter, using prototypal inheritance.\n            /// </summary>\n            /// <param name=\"baseClass\" type=\"Function\" locid=\"WinJS.Class.derive_p:baseClass\">\n            /// The class to inherit from.\n            /// </param>\n            /// <param name=\"constructor\" type=\"Function\" locid=\"WinJS.Class.derive_p:constructor\">\n            /// A constructor function that is used to instantiate this class.\n            /// </param>\n            /// <param name=\"instanceMembers\" type=\"Object\" locid=\"WinJS.Class.derive_p:instanceMembers\">\n            /// The set of instance fields, properties, and methods to be made available on the class.\n            /// </param>\n            /// <param name=\"staticMembers\" type=\"Object\" locid=\"WinJS.Class.derive_p:staticMembers\">\n            /// The set of static fields, properties, and methods to be made available on the class.\n            /// </param>\n            /// <returns type=\"Function\" locid=\"WinJS.Class.derive_returnValue\">\n            /// The newly-defined class.\n            /// </returns>\n            /// </signature>\n            if (baseClass) {\n                constructor = constructor || function () { };\n                var basePrototype = baseClass.prototype;\n                constructor.prototype = Object.create(basePrototype);\n                _BaseCoreUtils.markSupportedForProcessing(constructor);\n                Object.defineProperty(constructor.prototype, \"constructor\", { value: constructor, writable: true, configurable: true, enumerable: true });\n                if (instanceMembers) {\n                    initializeProperties(constructor.prototype, instanceMembers);\n                }\n                if (staticMembers) {\n                    initializeProperties(constructor, staticMembers);\n                }\n                return constructor;\n            } else {\n                return define(constructor, instanceMembers, staticMembers);\n            }\n        }\n\n        function mix(constructor) {\n            /// <signature helpKeyword=\"WinJS.Class.mix\">\n            /// <summary locid=\"WinJS.Class.mix\">\n            /// Defines a class using the given constructor and the union of the set of instance members\n            /// specified by all the mixin objects. The mixin parameter list is of variable length.\n            /// </summary>\n            /// <param name=\"constructor\" locid=\"WinJS.Class.mix_p:constructor\">\n            /// A constructor function that is used to instantiate this class.\n            /// </param>\n            /// <returns type=\"Function\" locid=\"WinJS.Class.mix_returnValue\">\n            /// The newly-defined class.\n            /// </returns>\n            /// </signature>\n            constructor = constructor || function () { };\n            var i, len;\n            for (i = 1, len = arguments.length; i < len; i++) {\n                initializeProperties(constructor.prototype, arguments[i]);\n            }\n            return constructor;\n        }\n\n        // Establish members of \"WinJS.Class\" namespace\n        _WinJS.Namespace.define(\"WinJS.Class\", {\n            define: define,\n            derive: derive,\n            mix: mix\n        });\n\n    })();\n\n    return {\n        Namespace: _WinJS.Namespace,\n        Class: _WinJS.Class\n    };\n\n});\n_winjs(\"WinJS/Core/_ErrorFromName\", [\"WinJS/Core/_Base\"], function errorsInit(_Base) {\n    \"use strict\";\n\n    var ErrorFromName = _Base.Class.derive(Error, function (name, message) {\n        /// <signature helpKeyword=\"WinJS.ErrorFromName\">\n        /// <summary locid=\"WinJS.ErrorFromName\">\n        /// Creates an Error object with the specified name and message properties.\n        /// </summary>\n        /// <param name=\"name\" type=\"String\" locid=\"WinJS.ErrorFromName_p:name\">The name of this error. The name is meant to be consumed programmatically and should not be localized.</param>\n        /// <param name=\"message\" type=\"String\" optional=\"true\" locid=\"WinJS.ErrorFromName_p:message\">The message for this error. The message is meant to be consumed by humans and should be localized.</param>\n        /// <returns type=\"Error\" locid=\"WinJS.ErrorFromName_returnValue\">Error instance with .name and .message properties populated</returns>\n        /// </signature>\n        this.name = name;\n        this.message = message || name;\n    }, {\n        /* empty */\n    }, {\n        supportedForProcessing: false,\n    });\n\n    _Base.Namespace.define(\"WinJS\", {\n        // ErrorFromName establishes a simple pattern for returning error codes.\n        //\n        ErrorFromName: ErrorFromName\n    });\n\n    return ErrorFromName;\n\n});\n\n\n_winjs(\"WinJS/Core/_Events\", [\"exports\",\"WinJS/Core/_Base\"], function eventsInit(exports, _Base) {\n    \"use strict\";\n\n\n    function createEventProperty(name) {\n        var eventPropStateName = \"_on\" + name + \"state\";\n\n        return {\n            get: function () {\n                var state = this[eventPropStateName];\n                return state && state.userHandler;\n            },\n            set: function (handler) {\n                var state = this[eventPropStateName];\n                if (handler) {\n                    if (!state) {\n                        state = { wrapper: function (evt) { return state.userHandler(evt); }, userHandler: handler };\n                        Object.defineProperty(this, eventPropStateName, { value: state, enumerable: false, writable:true, configurable: true });\n                        this.addEventListener(name, state.wrapper, false);\n                    }\n                    state.userHandler = handler;\n                } else if (state) {\n                    this.removeEventListener(name, state.wrapper, false);\n                    this[eventPropStateName] = null;\n                }\n            },\n            enumerable: true\n        };\n    }\n\n    function createEventProperties() {\n        /// <signature helpKeyword=\"WinJS.Utilities.createEventProperties\">\n        /// <summary locid=\"WinJS.Utilities.createEventProperties\">\n        /// Creates an object that has one property for each name passed to the function.\n        /// </summary>\n        /// <param name=\"events\" locid=\"WinJS.Utilities.createEventProperties_p:events\">\n        /// A variable list of property names.\n        /// </param>\n        /// <returns type=\"Object\" locid=\"WinJS.Utilities.createEventProperties_returnValue\">\n        /// The object with the specified properties. The names of the properties are prefixed with 'on'.\n        /// </returns>\n        /// </signature>\n        var props = {};\n        for (var i = 0, len = arguments.length; i < len; i++) {\n            var name = arguments[i];\n            props[\"on\" + name] = createEventProperty(name);\n        }\n        return props;\n    }\n\n    var EventMixinEvent = _Base.Class.define(\n        function EventMixinEvent_ctor(type, detail, target) {\n            this.detail = detail;\n            this.target = target;\n            this.timeStamp = Date.now();\n            this.type = type;\n        },\n        {\n            bubbles: { value: false, writable: false },\n            cancelable: { value: false, writable: false },\n            currentTarget: {\n                get: function () { return this.target; }\n            },\n            defaultPrevented: {\n                get: function () { return this._preventDefaultCalled; }\n            },\n            trusted: { value: false, writable: false },\n            eventPhase: { value: 0, writable: false },\n            target: null,\n            timeStamp: null,\n            type: null,\n\n            preventDefault: function () {\n                this._preventDefaultCalled = true;\n            },\n            stopImmediatePropagation: function () {\n                this._stopImmediatePropagationCalled = true;\n            },\n            stopPropagation: function () {\n            }\n        }, {\n            supportedForProcessing: false,\n        }\n    );\n\n    var eventMixin = {\n        _listeners: null,\n\n        addEventListener: function (type, listener, useCapture) {\n            /// <signature helpKeyword=\"WinJS.Utilities.eventMixin.addEventListener\">\n            /// <summary locid=\"WinJS.Utilities.eventMixin.addEventListener\">\n            /// Adds an event listener to the control.\n            /// </summary>\n            /// <param name=\"type\" locid=\"WinJS.Utilities.eventMixin.addEventListener_p:type\">\n            /// The type (name) of the event.\n            /// </param>\n            /// <param name=\"listener\" locid=\"WinJS.Utilities.eventMixin.addEventListener_p:listener\">\n            /// The listener to invoke when the event is raised.\n            /// </param>\n            /// <param name=\"useCapture\" locid=\"WinJS.Utilities.eventMixin.addEventListener_p:useCapture\">\n            /// if true initiates capture, otherwise false.\n            /// </param>\n            /// </signature>\n            useCapture = useCapture || false;\n            this._listeners = this._listeners || {};\n            var eventListeners = (this._listeners[type] = this._listeners[type] || []);\n            for (var i = 0, len = eventListeners.length; i < len; i++) {\n                var l = eventListeners[i];\n                if (l.useCapture === useCapture && l.listener === listener) {\n                    return;\n                }\n            }\n            eventListeners.push({ listener: listener, useCapture: useCapture });\n        },\n        dispatchEvent: function (type, details) {\n            /// <signature helpKeyword=\"WinJS.Utilities.eventMixin.dispatchEvent\">\n            /// <summary locid=\"WinJS.Utilities.eventMixin.dispatchEvent\">\n            /// Raises an event of the specified type and with the specified additional properties.\n            /// </summary>\n            /// <param name=\"type\" locid=\"WinJS.Utilities.eventMixin.dispatchEvent_p:type\">\n            /// The type (name) of the event.\n            /// </param>\n            /// <param name=\"details\" locid=\"WinJS.Utilities.eventMixin.dispatchEvent_p:details\">\n            /// The set of additional properties to be attached to the event object when the event is raised.\n            /// </param>\n            /// <returns type=\"Boolean\" locid=\"WinJS.Utilities.eventMixin.dispatchEvent_returnValue\">\n            /// true if preventDefault was called on the event.\n            /// </returns>\n            /// </signature>\n            var listeners = this._listeners && this._listeners[type];\n            if (listeners) {\n                var eventValue = new EventMixinEvent(type, details, this);\n                // Need to copy the array to protect against people unregistering while we are dispatching\n                listeners = listeners.slice(0, listeners.length);\n                for (var i = 0, len = listeners.length; i < len && !eventValue._stopImmediatePropagationCalled; i++) {\n                    listeners[i].listener(eventValue);\n                }\n                return eventValue.defaultPrevented || false;\n            }\n            return false;\n        },\n        removeEventListener: function (type, listener, useCapture) {\n            /// <signature helpKeyword=\"WinJS.Utilities.eventMixin.removeEventListener\">\n            /// <summary locid=\"WinJS.Utilities.eventMixin.removeEventListener\">\n            /// Removes an event listener from the control.\n            /// </summary>\n            /// <param name=\"type\" locid=\"WinJS.Utilities.eventMixin.removeEventListener_p:type\">\n            /// The type (name) of the event.\n            /// </param>\n            /// <param name=\"listener\" locid=\"WinJS.Utilities.eventMixin.removeEventListener_p:listener\">\n            /// The listener to remove.\n            /// </param>\n            /// <param name=\"useCapture\" locid=\"WinJS.Utilities.eventMixin.removeEventListener_p:useCapture\">\n            /// Specifies whether to initiate capture.\n            /// </param>\n            /// </signature>\n            useCapture = useCapture || false;\n            var listeners = this._listeners && this._listeners[type];\n            if (listeners) {\n                for (var i = 0, len = listeners.length; i < len; i++) {\n                    var l = listeners[i];\n                    if (l.listener === listener && l.useCapture === useCapture) {\n                        listeners.splice(i, 1);\n                        if (listeners.length === 0) {\n                            delete this._listeners[type];\n                        }\n                        // Only want to remove one element for each call to removeEventListener\n                        break;\n                    }\n                }\n            }\n        }\n    };\n\n    _Base.Namespace._moduleDefine(exports, \"WinJS.Utilities\", {\n        _createEventProperty: createEventProperty,\n        createEventProperties: createEventProperties,\n        eventMixin: eventMixin\n    });\n\n});\n\n\n_winjs(\"WinJS/Core/_Trace\", [\"WinJS/Core/_Global\"], function traceInit(_Global) {\n    \"use strict\";\n\n    function nop(v) {\n        return v;\n    }\n\n    return {\n        _traceAsyncOperationStarting: (_Global.Debug && _Global.Debug.msTraceAsyncOperationStarting && _Global.Debug.msTraceAsyncOperationStarting.bind(_Global.Debug)) || nop,\n        _traceAsyncOperationCompleted: (_Global.Debug && _Global.Debug.msTraceAsyncOperationCompleted && _Global.Debug.msTraceAsyncOperationCompleted.bind(_Global.Debug)) || nop,\n        _traceAsyncCallbackStarting: (_Global.Debug && _Global.Debug.msTraceAsyncCallbackStarting && _Global.Debug.msTraceAsyncCallbackStarting.bind(_Global.Debug)) || nop,\n        _traceAsyncCallbackCompleted: (_Global.Debug && _Global.Debug.msTraceAsyncCallbackCompleted && _Global.Debug.msTraceAsyncCallbackCompleted.bind(_Global.Debug)) || nop\n    };\n});\n_winjs(\"WinJS/Promise/_StateMachine\", [\"WinJS/Core/_Global\",\"WinJS/Core/_BaseCoreUtils\",\"WinJS/Core/_Base\",\"WinJS/Core/_ErrorFromName\",\"WinJS/Core/_Events\",\"WinJS/Core/_Trace\"], function promiseStateMachineInit(_Global, _BaseCoreUtils, _Base, _ErrorFromName, _Events, _Trace) {\n    \"use strict\";\n\n    _Global.Debug && (_Global.Debug.setNonUserCodeExceptions = true);\n\n    var ListenerType = _Base.Class.mix(_Base.Class.define(null, { /*empty*/ }, { supportedForProcessing: false }), _Events.eventMixin);\n    var promiseEventListeners = new ListenerType();\n    // make sure there is a listeners collection so that we can do a more trivial check below\n    promiseEventListeners._listeners = {};\n    var errorET = \"error\";\n    var canceledName = \"Canceled\";\n    var tagWithStack = false;\n    var tag = {\n        promise: 0x01,\n        thenPromise: 0x02,\n        errorPromise: 0x04,\n        exceptionPromise: 0x08,\n        completePromise: 0x10,\n    };\n    tag.all = tag.promise | tag.thenPromise | tag.errorPromise | tag.exceptionPromise | tag.completePromise;\n\n    //\n    // Global error counter, for each error which enters the system we increment this once and then\n    // the error number travels with the error as it traverses the tree of potential handlers.\n    //\n    // When someone has registered to be told about errors (WinJS.Promise.callonerror) promises\n    // which are in error will get tagged with a ._errorId field. This tagged field is the\n    // contract by which nested promises with errors will be identified as chaining for the\n    // purposes of the callonerror semantics. If a nested promise in error is encountered without\n    // a ._errorId it will be assumed to be foreign and treated as an interop boundary and\n    // a new error id will be minted.\n    //\n    var error_number = 1;\n\n    //\n    // The state machine has a interesting hiccup in it with regards to notification, in order\n    // to flatten out notification and avoid recursion for synchronous completion we have an\n    // explicit set of *_notify states which are responsible for notifying their entire tree\n    // of children. They can do this because they know that immediate children are always\n    // ThenPromise instances and we can therefore reach into their state to access the\n    // _listeners collection.\n    //\n    // So, what happens is that a Promise will be fulfilled through the _completed or _error\n    // messages at which point it will enter a *_notify state and be responsible for to move\n    // its children into an (as appropriate) success or error state and also notify that child's\n    // listeners of the state transition, until leaf notes are reached.\n    //\n\n    var state_created,              // -> working\n        state_working,              // -> error | error_notify | success | success_notify | canceled | waiting\n        state_waiting,              // -> error | error_notify | success | success_notify | waiting_canceled\n        state_waiting_canceled,     // -> error | error_notify | success | success_notify | canceling\n        state_canceled,             // -> error | error_notify | success | success_notify | canceling\n        state_canceling,            // -> error_notify\n        state_success_notify,       // -> success\n        state_success,              // -> .\n        state_error_notify,         // -> error\n        state_error;                // -> .\n\n    // Noop function, used in the various states to indicate that they don't support a given\n    // message. Named with the somewhat cute name '_' because it reads really well in the states.\n\n    function _() { }\n\n    // Initial state\n    //\n    state_created = {\n        name: \"created\",\n        enter: function (promise) {\n            promise._setState(state_working);\n        },\n        cancel: _,\n        done: _,\n        then: _,\n        _completed: _,\n        _error: _,\n        _notify: _,\n        _progress: _,\n        _setCompleteValue: _,\n        _setErrorValue: _\n    };\n\n    // Ready state, waiting for a message (completed/error/progress), able to be canceled\n    //\n    state_working = {\n        name: \"working\",\n        enter: _,\n        cancel: function (promise) {\n            promise._setState(state_canceled);\n        },\n        done: done,\n        then: then,\n        _completed: completed,\n        _error: error,\n        _notify: _,\n        _progress: progress,\n        _setCompleteValue: setCompleteValue,\n        _setErrorValue: setErrorValue\n    };\n\n    // Waiting state, if a promise is completed with a value which is itself a promise\n    // (has a then() method) it signs up to be informed when that child promise is\n    // fulfilled at which point it will be fulfilled with that value.\n    //\n    state_waiting = {\n        name: \"waiting\",\n        enter: function (promise) {\n            var waitedUpon = promise._value;\n            // We can special case our own intermediate promises which are not in a\n            //  terminal state by just pushing this promise as a listener without\n            //  having to create new indirection functions\n            if (waitedUpon instanceof ThenPromise &&\n                waitedUpon._state !== state_error &&\n                waitedUpon._state !== state_success) {\n                pushListener(waitedUpon, { promise: promise });\n            } else {\n                var error = function (value) {\n                    if (waitedUpon._errorId) {\n                        promise._chainedError(value, waitedUpon);\n                    } else {\n                        // Because this is an interop boundary we want to indicate that this\n                        //  error has been handled by the promise infrastructure before we\n                        //  begin a new handling chain.\n                        //\n                        callonerror(promise, value, detailsForHandledError, waitedUpon, error);\n                        promise._error(value);\n                    }\n                };\n                error.handlesOnError = true;\n                waitedUpon.then(\n                    promise._completed.bind(promise),\n                    error,\n                    promise._progress.bind(promise)\n                );\n            }\n        },\n        cancel: function (promise) {\n            promise._setState(state_waiting_canceled);\n        },\n        done: done,\n        then: then,\n        _completed: completed,\n        _error: error,\n        _notify: _,\n        _progress: progress,\n        _setCompleteValue: setCompleteValue,\n        _setErrorValue: setErrorValue\n    };\n\n    // Waiting canceled state, when a promise has been in a waiting state and receives a\n    // request to cancel its pending work it will forward that request to the child promise\n    // and then waits to be informed of the result. This promise moves itself into the\n    // canceling state but understands that the child promise may instead push it to a\n    // different state.\n    //\n    state_waiting_canceled = {\n        name: \"waiting_canceled\",\n        enter: function (promise) {\n            // Initiate a transition to canceling. Triggering a cancel on the promise\n            // that we are waiting upon may result in a different state transition\n            // before the state machine pump runs again.\n            promise._setState(state_canceling);\n            var waitedUpon = promise._value;\n            if (waitedUpon.cancel) {\n                waitedUpon.cancel();\n            }\n        },\n        cancel: _,\n        done: done,\n        then: then,\n        _completed: completed,\n        _error: error,\n        _notify: _,\n        _progress: progress,\n        _setCompleteValue: setCompleteValue,\n        _setErrorValue: setErrorValue\n    };\n\n    // Canceled state, moves to the canceling state and then tells the promise to do\n    // whatever it might need to do on cancelation.\n    //\n    state_canceled = {\n        name: \"canceled\",\n        enter: function (promise) {\n            // Initiate a transition to canceling. The _cancelAction may change the state\n            // before the state machine pump runs again.\n            promise._setState(state_canceling);\n            promise._cancelAction();\n        },\n        cancel: _,\n        done: done,\n        then: then,\n        _completed: completed,\n        _error: error,\n        _notify: _,\n        _progress: progress,\n        _setCompleteValue: setCompleteValue,\n        _setErrorValue: setErrorValue\n    };\n\n    // Canceling state, commits to the promise moving to an error state with an error\n    // object whose 'name' and 'message' properties contain the string \"Canceled\"\n    //\n    state_canceling = {\n        name: \"canceling\",\n        enter: function (promise) {\n            var error = new Error(canceledName);\n            error.name = error.message;\n            promise._value = error;\n            promise._setState(state_error_notify);\n        },\n        cancel: _,\n        done: _,\n        then: _,\n        _completed: _,\n        _error: _,\n        _notify: _,\n        _progress: _,\n        _setCompleteValue: _,\n        _setErrorValue: _\n    };\n\n    // Success notify state, moves a promise to the success state and notifies all children\n    //\n    state_success_notify = {\n        name: \"complete_notify\",\n        enter: function (promise) {\n            promise.done = CompletePromise.prototype.done;\n            promise.then = CompletePromise.prototype.then;\n            if (promise._listeners) {\n                var queue = [promise];\n                var p;\n                while (queue.length) {\n                    p = queue.shift();\n                    p._state._notify(p, queue);\n                }\n            }\n            promise._setState(state_success);\n        },\n        cancel: _,\n        done: null, /*error to get here */\n        then: null, /*error to get here */\n        _completed: _,\n        _error: _,\n        _notify: notifySuccess,\n        _progress: _,\n        _setCompleteValue: _,\n        _setErrorValue: _\n    };\n\n    // Success state, moves a promise to the success state and does NOT notify any children.\n    // Some upstream promise is owning the notification pass.\n    //\n    state_success = {\n        name: \"success\",\n        enter: function (promise) {\n            promise.done = CompletePromise.prototype.done;\n            promise.then = CompletePromise.prototype.then;\n            promise._cleanupAction();\n        },\n        cancel: _,\n        done: null, /*error to get here */\n        then: null, /*error to get here */\n        _completed: _,\n        _error: _,\n        _notify: notifySuccess,\n        _progress: _,\n        _setCompleteValue: _,\n        _setErrorValue: _\n    };\n\n    // Error notify state, moves a promise to the error state and notifies all children\n    //\n    state_error_notify = {\n        name: \"error_notify\",\n        enter: function (promise) {\n            promise.done = ErrorPromise.prototype.done;\n            promise.then = ErrorPromise.prototype.then;\n            if (promise._listeners) {\n                var queue = [promise];\n                var p;\n                while (queue.length) {\n                    p = queue.shift();\n                    p._state._notify(p, queue);\n                }\n            }\n            promise._setState(state_error);\n        },\n        cancel: _,\n        done: null, /*error to get here*/\n        then: null, /*error to get here*/\n        _completed: _,\n        _error: _,\n        _notify: notifyError,\n        _progress: _,\n        _setCompleteValue: _,\n        _setErrorValue: _\n    };\n\n    // Error state, moves a promise to the error state and does NOT notify any children.\n    // Some upstream promise is owning the notification pass.\n    //\n    state_error = {\n        name: \"error\",\n        enter: function (promise) {\n            promise.done = ErrorPromise.prototype.done;\n            promise.then = ErrorPromise.prototype.then;\n            promise._cleanupAction();\n        },\n        cancel: _,\n        done: null, /*error to get here*/\n        then: null, /*error to get here*/\n        _completed: _,\n        _error: _,\n        _notify: notifyError,\n        _progress: _,\n        _setCompleteValue: _,\n        _setErrorValue: _\n    };\n\n    //\n    // The statemachine implementation follows a very particular pattern, the states are specified\n    // as static stateless bags of functions which are then indirected through the state machine\n    // instance (a Promise). As such all of the functions on each state have the promise instance\n    // passed to them explicitly as a parameter and the Promise instance members do a little\n    // dance where they indirect through the state and insert themselves in the argument list.\n    //\n    // We could instead call directly through the promise states however then every caller\n    // would have to remember to do things like pumping the state machine to catch state transitions.\n    //\n\n    var PromiseStateMachine = _Base.Class.define(null, {\n        _listeners: null,\n        _nextState: null,\n        _state: null,\n        _value: null,\n\n        cancel: function () {\n            /// <signature helpKeyword=\"WinJS.PromiseStateMachine.cancel\">\n            /// <summary locid=\"WinJS.PromiseStateMachine.cancel\">\n            /// Attempts to cancel the fulfillment of a promised value. If the promise hasn't\n            /// already been fulfilled and cancellation is supported, the promise enters\n            /// the error state with a value of Error(\"Canceled\").\n            /// </summary>\n            /// </signature>\n            this._state.cancel(this);\n            this._run();\n        },\n        done: function Promise_done(onComplete, onError, onProgress) {\n            /// <signature helpKeyword=\"WinJS.PromiseStateMachine.done\">\n            /// <summary locid=\"WinJS.PromiseStateMachine.done\">\n            /// Allows you to specify the work to be done on the fulfillment of the promised value,\n            /// the error handling to be performed if the promise fails to fulfill\n            /// a value, and the handling of progress notifications along the way.\n            ///\n            /// After the handlers have finished executing, this function throws any error that would have been returned\n            /// from then() as a promise in the error state.\n            /// </summary>\n            /// <param name='onComplete' type='Function' locid=\"WinJS.PromiseStateMachine.done_p:onComplete\">\n            /// The function to be called if the promise is fulfilled successfully with a value.\n            /// The fulfilled value is passed as the single argument. If the value is null,\n            /// the fulfilled value is returned. The value returned\n            /// from the function becomes the fulfilled value of the promise returned by\n            /// then(). If an exception is thrown while executing the function, the promise returned\n            /// by then() moves into the error state.\n            /// </param>\n            /// <param name='onError' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.done_p:onError\">\n            /// The function to be called if the promise is fulfilled with an error. The error\n            /// is passed as the single argument. If it is null, the error is forwarded.\n            /// The value returned from the function is the fulfilled value of the promise returned by then().\n            /// </param>\n            /// <param name='onProgress' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.done_p:onProgress\">\n            /// the function to be called if the promise reports progress. Data about the progress\n            /// is passed as the single argument. Promises are not required to support\n            /// progress.\n            /// </param>\n            /// </signature>\n            this._state.done(this, onComplete, onError, onProgress);\n        },\n        then: function Promise_then(onComplete, onError, onProgress) {\n            /// <signature helpKeyword=\"WinJS.PromiseStateMachine.then\">\n            /// <summary locid=\"WinJS.PromiseStateMachine.then\">\n            /// Allows you to specify the work to be done on the fulfillment of the promised value,\n            /// the error handling to be performed if the promise fails to fulfill\n            /// a value, and the handling of progress notifications along the way.\n            /// </summary>\n            /// <param name='onComplete' type='Function' locid=\"WinJS.PromiseStateMachine.then_p:onComplete\">\n            /// The function to be called if the promise is fulfilled successfully with a value.\n            /// The value is passed as the single argument. If the value is null, the value is returned.\n            /// The value returned from the function becomes the fulfilled value of the promise returned by\n            /// then(). If an exception is thrown while this function is being executed, the promise returned\n            /// by then() moves into the error state.\n            /// </param>\n            /// <param name='onError' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.then_p:onError\">\n            /// The function to be called if the promise is fulfilled with an error. The error\n            /// is passed as the single argument. If it is null, the error is forwarded.\n            /// The value returned from the function becomes the fulfilled value of the promise returned by then().\n            /// </param>\n            /// <param name='onProgress' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.then_p:onProgress\">\n            /// The function to be called if the promise reports progress. Data about the progress\n            /// is passed as the single argument. Promises are not required to support\n            /// progress.\n            /// </param>\n            /// <returns type=\"WinJS.Promise\" locid=\"WinJS.PromiseStateMachine.then_returnValue\">\n            /// The promise whose value is the result of executing the complete or\n            /// error function.\n            /// </returns>\n            /// </signature>\n            // BEGIN monaco change\n            if (this.then !== Promise_then) {\n                this.then(onComplete, onError, onProgress);\n                return;\n            }\n            // END monaco change\n            return this._state.then(this, onComplete, onError, onProgress);\n        },\n\n        _chainedError: function (value, context) {\n            var result = this._state._error(this, value, detailsForChainedError, context);\n            this._run();\n            return result;\n        },\n        _completed: function (value) {\n            var result = this._state._completed(this, value);\n            this._run();\n            return result;\n        },\n        _error: function (value) {\n            var result = this._state._error(this, value, detailsForError);\n            this._run();\n            return result;\n        },\n        _progress: function (value) {\n            this._state._progress(this, value);\n        },\n        _setState: function (state) {\n            this._nextState = state;\n        },\n        _setCompleteValue: function (value) {\n            this._state._setCompleteValue(this, value);\n            this._run();\n        },\n        _setChainedErrorValue: function (value, context) {\n            var result = this._state._setErrorValue(this, value, detailsForChainedError, context);\n            this._run();\n            return result;\n        },\n        _setExceptionValue: function (value) {\n            var result = this._state._setErrorValue(this, value, detailsForException);\n            this._run();\n            return result;\n        },\n        _run: function () {\n            while (this._nextState) {\n                this._state = this._nextState;\n                this._nextState = null;\n                this._state.enter(this);\n            }\n        }\n    }, {\n        supportedForProcessing: false\n    });\n\n    //\n    // Implementations of shared state machine code.\n    //\n\n    function completed(promise, value) {\n        var targetState;\n        if (value && typeof value === \"object\" && typeof value.then === \"function\") {\n            targetState = state_waiting;\n        } else {\n            targetState = state_success_notify;\n        }\n        promise._value = value;\n        promise._setState(targetState);\n    }\n    function createErrorDetails(exception, error, promise, id, parent, handler) {\n        return {\n            exception: exception,\n            error: error,\n            promise: promise,\n            handler: handler,\n            id: id,\n            parent: parent\n        };\n    }\n    function detailsForHandledError(promise, errorValue, context, handler) {\n        var exception = context._isException;\n        var errorId = context._errorId;\n        return createErrorDetails(\n            exception ? errorValue : null,\n            exception ? null : errorValue,\n            promise,\n            errorId,\n            context,\n            handler\n        );\n    }\n    function detailsForChainedError(promise, errorValue, context) {\n        var exception = context._isException;\n        var errorId = context._errorId;\n        setErrorInfo(promise, errorId, exception);\n        return createErrorDetails(\n            exception ? errorValue : null,\n            exception ? null : errorValue,\n            promise,\n            errorId,\n            context\n        );\n    }\n    function detailsForError(promise, errorValue) {\n        var errorId = ++error_number;\n        setErrorInfo(promise, errorId);\n        return createErrorDetails(\n            null,\n            errorValue,\n            promise,\n            errorId\n        );\n    }\n    function detailsForException(promise, exceptionValue) {\n        var errorId = ++error_number;\n        setErrorInfo(promise, errorId, true);\n        return createErrorDetails(\n            exceptionValue,\n            null,\n            promise,\n            errorId\n        );\n    }\n    function done(promise, onComplete, onError, onProgress) {\n        var asyncOpID = _Trace._traceAsyncOperationStarting(\"WinJS.Promise.done\");\n        pushListener(promise, { c: onComplete, e: onError, p: onProgress, asyncOpID: asyncOpID });\n    }\n    function error(promise, value, onerrorDetails, context) {\n        promise._value = value;\n        callonerror(promise, value, onerrorDetails, context);\n        promise._setState(state_error_notify);\n    }\n    function notifySuccess(promise, queue) {\n        var value = promise._value;\n        var listeners = promise._listeners;\n        if (!listeners) {\n            return;\n        }\n        promise._listeners = null;\n        var i, len;\n        for (i = 0, len = Array.isArray(listeners) ? listeners.length : 1; i < len; i++) {\n            var listener = len === 1 ? listeners : listeners[i];\n            var onComplete = listener.c;\n            var target = listener.promise;\n\n            _Trace._traceAsyncOperationCompleted(listener.asyncOpID, _Global.Debug && _Global.Debug.MS_ASYNC_OP_STATUS_SUCCESS);\n\n            if (target) {\n                _Trace._traceAsyncCallbackStarting(listener.asyncOpID);\n                try {\n                    target._setCompleteValue(onComplete ? onComplete(value) : value);\n                } catch (ex) {\n                    target._setExceptionValue(ex);\n                } finally {\n                    _Trace._traceAsyncCallbackCompleted();\n                }\n                if (target._state !== state_waiting && target._listeners) {\n                    queue.push(target);\n                }\n            } else {\n                CompletePromise.prototype.done.call(promise, onComplete);\n            }\n        }\n    }\n    function notifyError(promise, queue) {\n        var value = promise._value;\n        var listeners = promise._listeners;\n        if (!listeners) {\n            return;\n        }\n        promise._listeners = null;\n        var i, len;\n        for (i = 0, len = Array.isArray(listeners) ? listeners.length : 1; i < len; i++) {\n            var listener = len === 1 ? listeners : listeners[i];\n            var onError = listener.e;\n            var target = listener.promise;\n\n            var errorID = _Global.Debug && (value && value.name === canceledName ? _Global.Debug.MS_ASYNC_OP_STATUS_CANCELED : _Global.Debug.MS_ASYNC_OP_STATUS_ERROR);\n            _Trace._traceAsyncOperationCompleted(listener.asyncOpID, errorID);\n\n            if (target) {\n                var asyncCallbackStarted = false;\n                try {\n                    if (onError) {\n                        _Trace._traceAsyncCallbackStarting(listener.asyncOpID);\n                        asyncCallbackStarted = true;\n                        if (!onError.handlesOnError) {\n                            callonerror(target, value, detailsForHandledError, promise, onError);\n                        }\n                        target._setCompleteValue(onError(value));\n                    } else {\n                        target._setChainedErrorValue(value, promise);\n                    }\n                } catch (ex) {\n                    target._setExceptionValue(ex);\n                } finally {\n                    if (asyncCallbackStarted) {\n                        _Trace._traceAsyncCallbackCompleted();\n                    }\n                }\n                if (target._state !== state_waiting && target._listeners) {\n                    queue.push(target);\n                }\n            } else {\n                ErrorPromise.prototype.done.call(promise, null, onError);\n            }\n        }\n    }\n    function callonerror(promise, value, onerrorDetailsGenerator, context, handler) {\n        if (promiseEventListeners._listeners[errorET]) {\n            if (value instanceof Error && value.message === canceledName) {\n                return;\n            }\n            promiseEventListeners.dispatchEvent(errorET, onerrorDetailsGenerator(promise, value, context, handler));\n        }\n    }\n    function progress(promise, value) {\n        var listeners = promise._listeners;\n        if (listeners) {\n            var i, len;\n            for (i = 0, len = Array.isArray(listeners) ? listeners.length : 1; i < len; i++) {\n                var listener = len === 1 ? listeners : listeners[i];\n                var onProgress = listener.p;\n                if (onProgress) {\n                    try { onProgress(value); } catch (ex) { }\n                }\n                if (!(listener.c || listener.e) && listener.promise) {\n                    listener.promise._progress(value);\n                }\n            }\n        }\n    }\n    function pushListener(promise, listener) {\n        var listeners = promise._listeners;\n        if (listeners) {\n            // We may have either a single listener (which will never be wrapped in an array)\n            // or 2+ listeners (which will be wrapped). Since we are now adding one more listener\n            // we may have to wrap the single listener before adding the second.\n            listeners = Array.isArray(listeners) ? listeners : [listeners];\n            listeners.push(listener);\n        } else {\n            listeners = listener;\n        }\n        promise._listeners = listeners;\n    }\n    // The difference beween setCompleteValue()/setErrorValue() and complete()/error() is that setXXXValue() moves\n    // a promise directly to the success/error state without starting another notification pass (because one\n    // is already ongoing).\n    function setErrorInfo(promise, errorId, isException) {\n        promise._isException = isException || false;\n        promise._errorId = errorId;\n    }\n    function setErrorValue(promise, value, onerrorDetails, context) {\n        promise._value = value;\n        callonerror(promise, value, onerrorDetails, context);\n        promise._setState(state_error);\n    }\n    function setCompleteValue(promise, value) {\n        var targetState;\n        if (value && typeof value === \"object\" && typeof value.then === \"function\") {\n            targetState = state_waiting;\n        } else {\n            targetState = state_success;\n        }\n        promise._value = value;\n        promise._setState(targetState);\n    }\n    function then(promise, onComplete, onError, onProgress) {\n        var result = new ThenPromise(promise);\n        var asyncOpID = _Trace._traceAsyncOperationStarting(\"WinJS.Promise.then\");\n        pushListener(promise, { promise: result, c: onComplete, e: onError, p: onProgress, asyncOpID: asyncOpID });\n        return result;\n    }\n\n    //\n    // Internal implementation detail promise, ThenPromise is created when a promise needs\n    // to be returned from a then() method.\n    //\n    var ThenPromise = _Base.Class.derive(PromiseStateMachine,\n        function (creator) {\n\n            if (tagWithStack && (tagWithStack === true || (tagWithStack & tag.thenPromise))) {\n                this._stack = Promise._getStack();\n            }\n\n            this._creator = creator;\n            this._setState(state_created);\n            this._run();\n        }, {\n            _creator: null,\n\n            _cancelAction: function () { if (this._creator) { this._creator.cancel(); } },\n            _cleanupAction: function () { this._creator = null; }\n        }, {\n            supportedForProcessing: false\n        }\n    );\n\n    //\n    // Slim promise implementations for already completed promises, these are created\n    // under the hood on synchronous completion paths as well as by WinJS.Promise.wrap\n    // and WinJS.Promise.wrapError.\n    //\n\n    var ErrorPromise = _Base.Class.define(\n        function ErrorPromise_ctor(value) {\n\n            if (tagWithStack && (tagWithStack === true || (tagWithStack & tag.errorPromise))) {\n                this._stack = Promise._getStack();\n            }\n\n            this._value = value;\n            callonerror(this, value, detailsForError);\n        }, {\n            cancel: function () {\n                /// <signature helpKeyword=\"WinJS.PromiseStateMachine.cancel\">\n                /// <summary locid=\"WinJS.PromiseStateMachine.cancel\">\n                /// Attempts to cancel the fulfillment of a promised value. If the promise hasn't\n                /// already been fulfilled and cancellation is supported, the promise enters\n                /// the error state with a value of Error(\"Canceled\").\n                /// </summary>\n                /// </signature>\n            },\n            done: function ErrorPromise_done(unused, onError) {\n                /// <signature helpKeyword=\"WinJS.PromiseStateMachine.done\">\n                /// <summary locid=\"WinJS.PromiseStateMachine.done\">\n                /// Allows you to specify the work to be done on the fulfillment of the promised value,\n                /// the error handling to be performed if the promise fails to fulfill\n                /// a value, and the handling of progress notifications along the way.\n                ///\n                /// After the handlers have finished executing, this function throws any error that would have been returned\n                /// from then() as a promise in the error state.\n                /// </summary>\n                /// <param name='onComplete' type='Function' locid=\"WinJS.PromiseStateMachine.done_p:onComplete\">\n                /// The function to be called if the promise is fulfilled successfully with a value.\n                /// The fulfilled value is passed as the single argument. If the value is null,\n                /// the fulfilled value is returned. The value returned\n                /// from the function becomes the fulfilled value of the promise returned by\n                /// then(). If an exception is thrown while executing the function, the promise returned\n                /// by then() moves into the error state.\n                /// </param>\n                /// <param name='onError' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.done_p:onError\">\n                /// The function to be called if the promise is fulfilled with an error. The error\n                /// is passed as the single argument. If it is null, the error is forwarded.\n                /// The value returned from the function is the fulfilled value of the promise returned by then().\n                /// </param>\n                /// <param name='onProgress' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.done_p:onProgress\">\n                /// the function to be called if the promise reports progress. Data about the progress\n                /// is passed as the single argument. Promises are not required to support\n                /// progress.\n                /// </param>\n                /// </signature>\n                var value = this._value;\n                if (onError) {\n                    try {\n                        if (!onError.handlesOnError) {\n                            callonerror(null, value, detailsForHandledError, this, onError);\n                        }\n                        var result = onError(value);\n                        if (result && typeof result === \"object\" && typeof result.done === \"function\") {\n                            // If a promise is returned we need to wait on it.\n                            result.done();\n                        }\n                        return;\n                    } catch (ex) {\n                        value = ex;\n                    }\n                }\n                if (value instanceof Error && value.message === canceledName) {\n                    // suppress cancel\n                    return;\n                }\n                // force the exception to be thrown asyncronously to avoid any try/catch blocks\n                //\n                Promise._doneHandler(value);\n            },\n            then: function ErrorPromise_then(unused, onError) {\n                /// <signature helpKeyword=\"WinJS.PromiseStateMachine.then\">\n                /// <summary locid=\"WinJS.PromiseStateMachine.then\">\n                /// Allows you to specify the work to be done on the fulfillment of the promised value,\n                /// the error handling to be performed if the promise fails to fulfill\n                /// a value, and the handling of progress notifications along the way.\n                /// </summary>\n                /// <param name='onComplete' type='Function' locid=\"WinJS.PromiseStateMachine.then_p:onComplete\">\n                /// The function to be called if the promise is fulfilled successfully with a value.\n                /// The value is passed as the single argument. If the value is null, the value is returned.\n                /// The value returned from the function becomes the fulfilled value of the promise returned by\n                /// then(). If an exception is thrown while this function is being executed, the promise returned\n                /// by then() moves into the error state.\n                /// </param>\n                /// <param name='onError' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.then_p:onError\">\n                /// The function to be called if the promise is fulfilled with an error. The error\n                /// is passed as the single argument. If it is null, the error is forwarded.\n                /// The value returned from the function becomes the fulfilled value of the promise returned by then().\n                /// </param>\n                /// <param name='onProgress' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.then_p:onProgress\">\n                /// The function to be called if the promise reports progress. Data about the progress\n                /// is passed as the single argument. Promises are not required to support\n                /// progress.\n                /// </param>\n                /// <returns type=\"WinJS.Promise\" locid=\"WinJS.PromiseStateMachine.then_returnValue\">\n                /// The promise whose value is the result of executing the complete or\n                /// error function.\n                /// </returns>\n                /// </signature>\n\n                // If the promise is already in a error state and no error handler is provided\n                // we optimize by simply returning the promise instead of creating a new one.\n                //\n                if (!onError) { return this; }\n                var result;\n                var value = this._value;\n                try {\n                    if (!onError.handlesOnError) {\n                        callonerror(null, value, detailsForHandledError, this, onError);\n                    }\n                    result = new CompletePromise(onError(value));\n                } catch (ex) {\n                    // If the value throw from the error handler is the same as the value\n                    // provided to the error handler then there is no need for a new promise.\n                    //\n                    if (ex === value) {\n                        result = this;\n                    } else {\n                        result = new ExceptionPromise(ex);\n                    }\n                }\n                return result;\n            }\n        }, {\n            supportedForProcessing: false\n        }\n    );\n\n    var ExceptionPromise = _Base.Class.derive(ErrorPromise,\n        function ExceptionPromise_ctor(value) {\n\n            if (tagWithStack && (tagWithStack === true || (tagWithStack & tag.exceptionPromise))) {\n                this._stack = Promise._getStack();\n            }\n\n            this._value = value;\n            callonerror(this, value, detailsForException);\n        }, {\n            /* empty */\n        }, {\n            supportedForProcessing: false\n        }\n    );\n\n    var CompletePromise = _Base.Class.define(\n        function CompletePromise_ctor(value) {\n\n            if (tagWithStack && (tagWithStack === true || (tagWithStack & tag.completePromise))) {\n                this._stack = Promise._getStack();\n            }\n\n            if (value && typeof value === \"object\" && typeof value.then === \"function\") {\n                var result = new ThenPromise(null);\n                result._setCompleteValue(value);\n                return result;\n            }\n            this._value = value;\n        }, {\n            cancel: function () {\n                /// <signature helpKeyword=\"WinJS.PromiseStateMachine.cancel\">\n                /// <summary locid=\"WinJS.PromiseStateMachine.cancel\">\n                /// Attempts to cancel the fulfillment of a promised value. If the promise hasn't\n                /// already been fulfilled and cancellation is supported, the promise enters\n                /// the error state with a value of Error(\"Canceled\").\n                /// </summary>\n                /// </signature>\n            },\n            done: function CompletePromise_done(onComplete) {\n                /// <signature helpKeyword=\"WinJS.PromiseStateMachine.done\">\n                /// <summary locid=\"WinJS.PromiseStateMachine.done\">\n                /// Allows you to specify the work to be done on the fulfillment of the promised value,\n                /// the error handling to be performed if the promise fails to fulfill\n                /// a value, and the handling of progress notifications along the way.\n                ///\n                /// After the handlers have finished executing, this function throws any error that would have been returned\n                /// from then() as a promise in the error state.\n                /// </summary>\n                /// <param name='onComplete' type='Function' locid=\"WinJS.PromiseStateMachine.done_p:onComplete\">\n                /// The function to be called if the promise is fulfilled successfully with a value.\n                /// The fulfilled value is passed as the single argument. If the value is null,\n                /// the fulfilled value is returned. The value returned\n                /// from the function becomes the fulfilled value of the promise returned by\n                /// then(). If an exception is thrown while executing the function, the promise returned\n                /// by then() moves into the error state.\n                /// </param>\n                /// <param name='onError' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.done_p:onError\">\n                /// The function to be called if the promise is fulfilled with an error. The error\n                /// is passed as the single argument. If it is null, the error is forwarded.\n                /// The value returned from the function is the fulfilled value of the promise returned by then().\n                /// </param>\n                /// <param name='onProgress' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.done_p:onProgress\">\n                /// the function to be called if the promise reports progress. Data about the progress\n                /// is passed as the single argument. Promises are not required to support\n                /// progress.\n                /// </param>\n                /// </signature>\n                if (!onComplete) { return; }\n                try {\n                    var result = onComplete(this._value);\n                    if (result && typeof result === \"object\" && typeof result.done === \"function\") {\n                        result.done();\n                    }\n                } catch (ex) {\n                    // force the exception to be thrown asynchronously to avoid any try/catch blocks\n                    Promise._doneHandler(ex);\n                }\n            },\n            then: function CompletePromise_then(onComplete) {\n                /// <signature helpKeyword=\"WinJS.PromiseStateMachine.then\">\n                /// <summary locid=\"WinJS.PromiseStateMachine.then\">\n                /// Allows you to specify the work to be done on the fulfillment of the promised value,\n                /// the error handling to be performed if the promise fails to fulfill\n                /// a value, and the handling of progress notifications along the way.\n                /// </summary>\n                /// <param name='onComplete' type='Function' locid=\"WinJS.PromiseStateMachine.then_p:onComplete\">\n                /// The function to be called if the promise is fulfilled successfully with a value.\n                /// The value is passed as the single argument. If the value is null, the value is returned.\n                /// The value returned from the function becomes the fulfilled value of the promise returned by\n                /// then(). If an exception is thrown while this function is being executed, the promise returned\n                /// by then() moves into the error state.\n                /// </param>\n                /// <param name='onError' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.then_p:onError\">\n                /// The function to be called if the promise is fulfilled with an error. The error\n                /// is passed as the single argument. If it is null, the error is forwarded.\n                /// The value returned from the function becomes the fulfilled value of the promise returned by then().\n                /// </param>\n                /// <param name='onProgress' type='Function' optional='true' locid=\"WinJS.PromiseStateMachine.then_p:onProgress\">\n                /// The function to be called if the promise reports progress. Data about the progress\n                /// is passed as the single argument. Promises are not required to support\n                /// progress.\n                /// </param>\n                /// <returns type=\"WinJS.Promise\" locid=\"WinJS.PromiseStateMachine.then_returnValue\">\n                /// The promise whose value is the result of executing the complete or\n                /// error function.\n                /// </returns>\n                /// </signature>\n                try {\n                    // If the value returned from the completion handler is the same as the value\n                    // provided to the completion handler then there is no need for a new promise.\n                    //\n                    var newValue = onComplete ? onComplete(this._value) : this._value;\n                    return newValue === this._value ? this : new CompletePromise(newValue);\n                } catch (ex) {\n                    return new ExceptionPromise(ex);\n                }\n            }\n        }, {\n            supportedForProcessing: false\n        }\n    );\n\n    //\n    // Promise is the user-creatable WinJS.Promise object.\n    //\n\n    function timeout(timeoutMS) {\n        var id;\n        return new Promise(\n            function (c) {\n                if (timeoutMS) {\n                    id = _Global.setTimeout(c, timeoutMS);\n                } else {\n                    _BaseCoreUtils._setImmediate(c);\n                }\n            },\n            function () {\n                if (id) {\n                    _Global.clearTimeout(id);\n                }\n            }\n        );\n    }\n\n    function timeoutWithPromise(timeout, promise) {\n        var cancelPromise = function () { promise.cancel(); };\n        var cancelTimeout = function () { timeout.cancel(); };\n        timeout.then(cancelPromise);\n        promise.then(cancelTimeout, cancelTimeout);\n        return promise;\n    }\n\n    var staticCanceledPromise;\n\n    var Promise = _Base.Class.derive(PromiseStateMachine,\n        function Promise_ctor(init, oncancel) {\n            /// <signature helpKeyword=\"WinJS.Promise\">\n            /// <summary locid=\"WinJS.Promise\">\n            /// A promise provides a mechanism to schedule work to be done on a value that\n            /// has not yet been computed. It is a convenient abstraction for managing\n            /// interactions with asynchronous APIs.\n            /// </summary>\n            /// <param name=\"init\" type=\"Function\" locid=\"WinJS.Promise_p:init\">\n            /// The function that is called during construction of the  promise. The function\n            /// is given three arguments (complete, error, progress). Inside this function\n            /// you should add event listeners for the notifications supported by this value.\n            /// </param>\n            /// <param name=\"oncancel\" optional=\"true\" locid=\"WinJS.Promise_p:oncancel\">\n            /// The function to call if a consumer of this promise wants\n            /// to cancel its undone work. Promises are not required to\n            /// support cancellation.\n            /// </param>\n            /// </signature>\n\n            if (tagWithStack && (tagWithStack === true || (tagWithStack & tag.promise))) {\n                this._stack = Promise._getStack();\n            }\n\n            this._oncancel = oncancel;\n            this._setState(state_created);\n            this._run();\n\n            try {\n                var complete = this._completed.bind(this);\n                var error = this._error.bind(this);\n                var progress = this._progress.bind(this);\n                init(complete, error, progress);\n            } catch (ex) {\n                this._setExceptionValue(ex);\n            }\n        }, {\n            _oncancel: null,\n\n            _cancelAction: function () {\n                // BEGIN monaco change\n                try {\n                    if (this._oncancel) {\n                        this._oncancel();\n                    } else {\n                        throw new Error('Promise did not implement oncancel');\n                    }\n                } catch (ex) {\n                    // Access fields to get them created\n                    var msg = ex.message;\n                    var stack = ex.stack;\n                    promiseEventListeners.dispatchEvent('error', ex);\n                }\n                // END monaco change\n            },\n            _cleanupAction: function () { this._oncancel = null; }\n        }, {\n\n            addEventListener: function Promise_addEventListener(eventType, listener, capture) {\n                /// <signature helpKeyword=\"WinJS.Promise.addEventListener\">\n                /// <summary locid=\"WinJS.Promise.addEventListener\">\n                /// Adds an event listener to the control.\n                /// </summary>\n                /// <param name=\"eventType\" locid=\"WinJS.Promise.addEventListener_p:eventType\">\n                /// The type (name) of the event.\n                /// </param>\n                /// <param name=\"listener\" locid=\"WinJS.Promise.addEventListener_p:listener\">\n                /// The listener to invoke when the event is raised.\n                /// </param>\n                /// <param name=\"capture\" locid=\"WinJS.Promise.addEventListener_p:capture\">\n                /// Specifies whether or not to initiate capture.\n                /// </param>\n                /// </signature>\n                promiseEventListeners.addEventListener(eventType, listener, capture);\n            },\n            any: function Promise_any(values) {\n                /// <signature helpKeyword=\"WinJS.Promise.any\">\n                /// <summary locid=\"WinJS.Promise.any\">\n                /// Returns a promise that is fulfilled when one of the input promises\n                /// has been fulfilled.\n                /// </summary>\n                /// <param name=\"values\" type=\"Array\" locid=\"WinJS.Promise.any_p:values\">\n                /// An array that contains promise objects or objects whose property\n                /// values include promise objects.\n                /// </param>\n                /// <returns type=\"WinJS.Promise\" locid=\"WinJS.Promise.any_returnValue\">\n                /// A promise that on fulfillment yields the value of the input (complete or error).\n                /// </returns>\n                /// </signature>\n                return new Promise(\n                    function (complete, error) {\n                        var keys = Object.keys(values);\n                        if (keys.length === 0) {\n                            complete();\n                        }\n                        var canceled = 0;\n                        keys.forEach(function (key) {\n                            Promise.as(values[key]).then(\n                                function () { complete({ key: key, value: values[key] }); },\n                                function (e) {\n                                    if (e instanceof Error && e.name === canceledName) {\n                                        if ((++canceled) === keys.length) {\n                                            complete(Promise.cancel);\n                                        }\n                                        return;\n                                    }\n                                    error({ key: key, value: values[key] });\n                                }\n                            );\n                        });\n                    },\n                    function () {\n                        var keys = Object.keys(values);\n                        keys.forEach(function (key) {\n                            var promise = Promise.as(values[key]);\n                            if (typeof promise.cancel === \"function\") {\n                                promise.cancel();\n                            }\n                        });\n                    }\n                );\n            },\n            as: function Promise_as(value) {\n                /// <signature helpKeyword=\"WinJS.Promise.as\">\n                /// <summary locid=\"WinJS.Promise.as\">\n                /// Returns a promise. If the object is already a promise it is returned;\n                /// otherwise the object is wrapped in a promise.\n                /// </summary>\n                /// <param name=\"value\" locid=\"WinJS.Promise.as_p:value\">\n                /// The value to be treated as a promise.\n                /// </param>\n                /// <returns type=\"WinJS.Promise\" locid=\"WinJS.Promise.as_returnValue\">\n                /// A promise.\n                /// </returns>\n                /// </signature>\n                if (value && typeof value === \"object\" && typeof value.then === \"function\") {\n                    return value;\n                }\n                return new CompletePromise(value);\n            },\n            /// <field type=\"WinJS.Promise\" helpKeyword=\"WinJS.Promise.cancel\" locid=\"WinJS.Promise.cancel\">\n            /// Canceled promise value, can be returned from a promise completion handler\n            /// to indicate cancelation of the promise chain.\n            /// </field>\n            cancel: {\n                get: function () {\n                    return (staticCanceledPromise = staticCanceledPromise || new ErrorPromise(new _ErrorFromName(canceledName)));\n                }\n            },\n            dispatchEvent: function Promise_dispatchEvent(eventType, details) {\n                /// <signature helpKeyword=\"WinJS.Promise.dispatchEvent\">\n                /// <summary locid=\"WinJS.Promise.dispatchEvent\">\n                /// Raises an event of the specified type and properties.\n                /// </summary>\n                /// <param name=\"eventType\" locid=\"WinJS.Promise.dispatchEvent_p:eventType\">\n                /// The type (name) of the event.\n                /// </param>\n                /// <param name=\"details\" locid=\"WinJS.Promise.dispatchEvent_p:details\">\n                /// The set of additional properties to be attached to the event object.\n                /// </param>\n                /// <returns type=\"Boolean\" locid=\"WinJS.Promise.dispatchEvent_returnValue\">\n                /// Specifies whether preventDefault was called on the event.\n                /// </returns>\n                /// </signature>\n                return promiseEventListeners.dispatchEvent(eventType, details);\n            },\n            is: function Promise_is(value) {\n                /// <signature helpKeyword=\"WinJS.Promise.is\">\n                /// <summary locid=\"WinJS.Promise.is\">\n                /// Determines whether a value fulfills the promise contract.\n                /// </summary>\n                /// <param name=\"value\" locid=\"WinJS.Promise.is_p:value\">\n                /// A value that may be a promise.\n                /// </param>\n                /// <returns type=\"Boolean\" locid=\"WinJS.Promise.is_returnValue\">\n                /// true if the specified value is a promise, otherwise false.\n                /// </returns>\n                /// </signature>\n                return value && typeof value === \"object\" && typeof value.then === \"function\";\n            },\n            join: function Promise_join(values) {\n                /// <signature helpKeyword=\"WinJS.Promise.join\">\n                /// <summary locid=\"WinJS.Promise.join\">\n                /// Creates a promise that is fulfilled when all the values are fulfilled.\n                /// </summary>\n                /// <param name=\"values\" type=\"Object\" locid=\"WinJS.Promise.join_p:values\">\n                /// An object whose fields contain values, some of which may be promises.\n                /// </param>\n                /// <returns type=\"WinJS.Promise\" locid=\"WinJS.Promise.join_returnValue\">\n                /// A promise whose value is an object with the same field names as those of the object in the values parameter, where\n                /// each field value is the fulfilled value of a promise.\n                /// </returns>\n                /// </signature>\n                return new Promise(\n                    function (complete, error, progress) {\n                        var keys = Object.keys(values);\n                        var errors = Array.isArray(values) ? [] : {};\n                        var results = Array.isArray(values) ? [] : {};\n                        var undefineds = 0;\n                        var pending = keys.length;\n                        var argDone = function (key) {\n                            if ((--pending) === 0) {\n                                var errorCount = Object.keys(errors).length;\n                                if (errorCount === 0) {\n                                    complete(results);\n                                } else {\n                                    var canceledCount = 0;\n                                    keys.forEach(function (key) {\n                                        var e = errors[key];\n                                        if (e instanceof Error && e.name === canceledName) {\n                                            canceledCount++;\n                                        }\n                                    });\n                                    if (canceledCount === errorCount) {\n                                        complete(Promise.cancel);\n                                    } else {\n                                        error(errors);\n                                    }\n                                }\n                            } else {\n                                progress({ Key: key, Done: true });\n                            }\n                        };\n                        keys.forEach(function (key) {\n                            var value = values[key];\n                            if (value === undefined) {\n                                undefineds++;\n                            } else {\n                                Promise.then(value,\n                                    function (value) { results[key] = value; argDone(key); },\n                                    function (value) { errors[key] = value; argDone(key); }\n                                );\n                            }\n                        });\n                        pending -= undefineds;\n                        if (pending === 0) {\n                            complete(results);\n                            return;\n                        }\n                    },\n                    function () {\n                        Object.keys(values).forEach(function (key) {\n                            var promise = Promise.as(values[key]);\n                            if (typeof promise.cancel === \"function\") {\n                                promise.cancel();\n                            }\n                        });\n                    }\n                );\n            },\n            removeEventListener: function Promise_removeEventListener(eventType, listener, capture) {\n                /// <signature helpKeyword=\"WinJS.Promise.removeEventListener\">\n                /// <summary locid=\"WinJS.Promise.removeEventListener\">\n                /// Removes an event listener from the control.\n                /// </summary>\n                /// <param name='eventType' locid=\"WinJS.Promise.removeEventListener_eventType\">\n                /// The type (name) of the event.\n                /// </param>\n                /// <param name='listener' locid=\"WinJS.Promise.removeEventListener_listener\">\n                /// The listener to remove.\n                /// </param>\n                /// <param name='capture' locid=\"WinJS.Promise.removeEventListener_capture\">\n                /// Specifies whether or not to initiate capture.\n                /// </param>\n                /// </signature>\n                promiseEventListeners.removeEventListener(eventType, listener, capture);\n            },\n            supportedForProcessing: false,\n            then: function Promise_then(value, onComplete, onError, onProgress) {\n                /// <signature helpKeyword=\"WinJS.Promise.then\">\n                /// <summary locid=\"WinJS.Promise.then\">\n                /// A static version of the promise instance method then().\n                /// </summary>\n                /// <param name=\"value\" locid=\"WinJS.Promise.then_p:value\">\n                /// the value to be treated as a promise.\n                /// </param>\n                /// <param name=\"onComplete\" type=\"Function\" locid=\"WinJS.Promise.then_p:complete\">\n                /// The function to be called if the promise is fulfilled with a value.\n                /// If it is null, the promise simply\n                /// returns the value. The value is passed as the single argument.\n                /// </param>\n                /// <param name=\"onError\" type=\"Function\" optional=\"true\" locid=\"WinJS.Promise.then_p:error\">\n                /// The function to be called if the promise is fulfilled with an error. The error\n                /// is passed as the single argument.\n                /// </param>\n                /// <param name=\"onProgress\" type=\"Function\" optional=\"true\" locid=\"WinJS.Promise.then_p:progress\">\n                /// The function to be called if the promise reports progress. Data about the progress\n                /// is passed as the single argument. Promises are not required to support\n                /// progress.\n                /// </param>\n                /// <returns type=\"WinJS.Promise\" locid=\"WinJS.Promise.then_returnValue\">\n                /// A promise whose value is the result of executing the provided complete function.\n                /// </returns>\n                /// </signature>\n                return Promise.as(value).then(onComplete, onError, onProgress);\n            },\n            thenEach: function Promise_thenEach(values, onComplete, onError, onProgress) {\n                /// <signature helpKeyword=\"WinJS.Promise.thenEach\">\n                /// <summary locid=\"WinJS.Promise.thenEach\">\n                /// Performs an operation on all the input promises and returns a promise\n                /// that has the shape of the input and contains the result of the operation\n                /// that has been performed on each input.\n                /// </summary>\n                /// <param name=\"values\" locid=\"WinJS.Promise.thenEach_p:values\">\n                /// A set of values (which could be either an array or an object) of which some or all are promises.\n                /// </param>\n                /// <param name=\"onComplete\" type=\"Function\" locid=\"WinJS.Promise.thenEach_p:complete\">\n                /// The function to be called if the promise is fulfilled with a value.\n                /// If the value is null, the promise returns the value.\n                /// The value is passed as the single argument.\n                /// </param>\n                /// <param name=\"onError\" type=\"Function\" optional=\"true\" locid=\"WinJS.Promise.thenEach_p:error\">\n                /// The function to be called if the promise is fulfilled with an error. The error\n                /// is passed as the single argument.\n                /// </param>\n                /// <param name=\"onProgress\" type=\"Function\" optional=\"true\" locid=\"WinJS.Promise.thenEach_p:progress\">\n                /// The function to be called if the promise reports progress. Data about the progress\n                /// is passed as the single argument. Promises are not required to support\n                /// progress.\n                /// </param>\n                /// <returns type=\"WinJS.Promise\" locid=\"WinJS.Promise.thenEach_returnValue\">\n                /// A promise that is the result of calling Promise.join on the values parameter.\n                /// </returns>\n                /// </signature>\n                var result = Array.isArray(values) ? [] : {};\n                Object.keys(values).forEach(function (key) {\n                    result[key] = Promise.as(values[key]).then(onComplete, onError, onProgress);\n                });\n                return Promise.join(result);\n            },\n            timeout: function Promise_timeout(time, promise) {\n                /// <signature helpKeyword=\"WinJS.Promise.timeout\">\n                /// <summary locid=\"WinJS.Promise.timeout\">\n                /// Creates a promise that is fulfilled after a timeout.\n                /// </summary>\n                /// <param name=\"timeout\" type=\"Number\" optional=\"true\" locid=\"WinJS.Promise.timeout_p:timeout\">\n                /// The timeout period in milliseconds. If this value is zero or not specified\n                /// setImmediate is called, otherwise setTimeout is called.\n                /// </param>\n                /// <param name=\"promise\" type=\"Promise\" optional=\"true\" locid=\"WinJS.Promise.timeout_p:promise\">\n                /// A promise that will be canceled if it doesn't complete before the\n                /// timeout has expired.\n                /// </param>\n                /// <returns type=\"WinJS.Promise\" locid=\"WinJS.Promise.timeout_returnValue\">\n                /// A promise that is completed asynchronously after the specified timeout.\n                /// </returns>\n                /// </signature>\n                var to = timeout(time);\n                return promise ? timeoutWithPromise(to, promise) : to;\n            },\n            wrap: function Promise_wrap(value) {\n                /// <signature helpKeyword=\"WinJS.Promise.wrap\">\n                /// <summary locid=\"WinJS.Promise.wrap\">\n                /// Wraps a non-promise value in a promise. You can use this function if you need\n                /// to pass a value to a function that requires a promise.\n                /// </summary>\n                /// <param name=\"value\" locid=\"WinJS.Promise.wrap_p:value\">\n                /// Some non-promise value to be wrapped in a promise.\n                /// </param>\n                /// <returns type=\"WinJS.Promise\" locid=\"WinJS.Promise.wrap_returnValue\">\n                /// A promise that is successfully fulfilled with the specified value\n                /// </returns>\n                /// </signature>\n                return new CompletePromise(value);\n            },\n            wrapError: function Promise_wrapError(error) {\n                /// <signature helpKeyword=\"WinJS.Promise.wrapError\">\n                /// <summary locid=\"WinJS.Promise.wrapError\">\n                /// Wraps a non-promise error value in a promise. You can use this function if you need\n                /// to pass an error to a function that requires a promise.\n                /// </summary>\n                /// <param name=\"error\" locid=\"WinJS.Promise.wrapError_p:error\">\n                /// A non-promise error value to be wrapped in a promise.\n                /// </param>\n                /// <returns type=\"WinJS.Promise\" locid=\"WinJS.Promise.wrapError_returnValue\">\n                /// A promise that is in an error state with the specified value.\n                /// </returns>\n                /// </signature>\n                return new ErrorPromise(error);\n            },\n\n            _veryExpensiveTagWithStack: {\n                get: function () { return tagWithStack; },\n                set: function (value) { tagWithStack = value; }\n            },\n            _veryExpensiveTagWithStack_tag: tag,\n            _getStack: function () {\n                if (_Global.Debug && _Global.Debug.debuggerEnabled) {\n                    try { throw new Error(); } catch (e) { return e.stack; }\n                }\n            },\n\n            _cancelBlocker: function Promise__cancelBlocker(input, oncancel) {\n                //\n                // Returns a promise which on cancelation will still result in downstream cancelation while\n                //  protecting the promise 'input' from being  canceled which has the effect of allowing\n                //  'input' to be shared amoung various consumers.\n                //\n                if (!Promise.is(input)) {\n                    return Promise.wrap(input);\n                }\n                var complete;\n                var error;\n                var output = new Promise(\n                    function (c, e) {\n                        complete = c;\n                        error = e;\n                    },\n                    function () {\n                        complete = null;\n                        error = null;\n                        oncancel && oncancel();\n                    }\n                );\n                input.then(\n                    function (v) { complete && complete(v); },\n                    function (e) { error && error(e); }\n                );\n                return output;\n            },\n\n        }\n    );\n    Object.defineProperties(Promise, _Events.createEventProperties(errorET));\n\n    Promise._doneHandler = function (value) {\n        _BaseCoreUtils._setImmediate(function Promise_done_rethrow() {\n            throw value;\n        });\n    };\n\n    return {\n        PromiseStateMachine: PromiseStateMachine,\n        Promise: Promise,\n        state_created: state_created\n    };\n});\n\n_winjs(\"WinJS/Promise\", [\"WinJS/Core/_Base\",\"WinJS/Promise/_StateMachine\"], function promiseInit( _Base, _StateMachine) {\n    \"use strict\";\n\n    _Base.Namespace.define(\"WinJS\", {\n        Promise: _StateMachine.Promise\n    });\n\n    return _StateMachine.Promise;\n});\n\n__winjs_exports = _modules[\"WinJS/Core/_WinJS\"];\n__winjs_exports.TPromise = __winjs_exports.Promise;\n__winjs_exports.PPromise = __winjs_exports.Promise;\n\n// ESM-comment-begin\n// if (typeof exports === 'undefined' && typeof define === 'function' && define.amd) {\n//     define([], __winjs_exports);\n// } else {\n//     module.exports = __winjs_exports;\n// }\n// ESM-comment-end\n\n})();\n\n// ESM-uncomment-begin\nexport var Promise = __winjs_exports.Promise;\nexport var TPromise = __winjs_exports.TPromise;\nexport var PPromise = __winjs_exports.PPromise;\n// ESM-uncomment-end\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { TPromise } from './winjs.base.js';\r\n// ------ BEGIN Hook up error listeners to winjs promises\r\nvar outstandingPromiseErrors = {};\r\nfunction promiseErrorHandler(e) {\r\n    //\r\n    // e.detail looks like: { exception, error, promise, handler, id, parent }\r\n    //\r\n    var details = e.detail;\r\n    var id = details.id;\r\n    // If the error has a parent promise then this is not the origination of the\r\n    //  error so we check if it has a handler, and if so we mark that the error\r\n    //  was handled by removing it from outstandingPromiseErrors\r\n    //\r\n    if (details.parent) {\r\n        if (details.handler && outstandingPromiseErrors) {\r\n            delete outstandingPromiseErrors[id];\r\n        }\r\n        return;\r\n    }\r\n    // Indicate that this error was originated and needs to be handled\r\n    outstandingPromiseErrors[id] = details;\r\n    // The first time the queue fills up this iteration, schedule a timeout to\r\n    // check if any errors are still unhandled.\r\n    if (Object.keys(outstandingPromiseErrors).length === 1) {\r\n        setTimeout(function () {\r\n            var errors = outstandingPromiseErrors;\r\n            outstandingPromiseErrors = {};\r\n            Object.keys(errors).forEach(function (errorId) {\r\n                var error = errors[errorId];\r\n                if (error.exception) {\r\n                    onUnexpectedError(error.exception);\r\n                }\r\n                else if (error.error) {\r\n                    onUnexpectedError(error.error);\r\n                }\r\n                console.log('WARNING: Promise with no error callback:' + error.id);\r\n                console.log(error);\r\n                if (error.exception) {\r\n                    console.log(error.exception.stack);\r\n                }\r\n            });\r\n        }, 0);\r\n    }\r\n}\r\nTPromise.addEventListener('error', promiseErrorHandler);\r\n// Avoid circular dependency on EventEmitter by implementing a subset of the interface.\r\nvar ErrorHandler = /** @class */ (function () {\r\n    function ErrorHandler() {\r\n        this.listeners = [];\r\n        this.unexpectedErrorHandler = function (e) {\r\n            setTimeout(function () {\r\n                if (e.stack) {\r\n                    throw new Error(e.message + '\\n\\n' + e.stack);\r\n                }\r\n                throw e;\r\n            }, 0);\r\n        };\r\n    }\r\n    ErrorHandler.prototype.emit = function (e) {\r\n        this.listeners.forEach(function (listener) {\r\n            listener(e);\r\n        });\r\n    };\r\n    ErrorHandler.prototype.onUnexpectedError = function (e) {\r\n        this.unexpectedErrorHandler(e);\r\n        this.emit(e);\r\n    };\r\n    // For external errors, we don't want the listeners to be called\r\n    ErrorHandler.prototype.onUnexpectedExternalError = function (e) {\r\n        this.unexpectedErrorHandler(e);\r\n    };\r\n    return ErrorHandler;\r\n}());\r\nexport { ErrorHandler };\r\nexport var errorHandler = new ErrorHandler();\r\nexport function onUnexpectedError(e) {\r\n    // ignore errors from cancelled promises\r\n    if (!isPromiseCanceledError(e)) {\r\n        errorHandler.onUnexpectedError(e);\r\n    }\r\n    return undefined;\r\n}\r\nexport function onUnexpectedExternalError(e) {\r\n    // ignore errors from cancelled promises\r\n    if (!isPromiseCanceledError(e)) {\r\n        errorHandler.onUnexpectedExternalError(e);\r\n    }\r\n    return undefined;\r\n}\r\nexport function transformErrorForSerialization(error) {\r\n    if (error instanceof Error) {\r\n        var name_1 = error.name, message = error.message;\r\n        var stack = error.stacktrace || error.stack;\r\n        return {\r\n            $isError: true,\r\n            name: name_1,\r\n            message: message,\r\n            stack: stack\r\n        };\r\n    }\r\n    // return as is\r\n    return error;\r\n}\r\nvar canceledName = 'Canceled';\r\n/**\r\n * Checks if the given error is a promise in canceled state\r\n */\r\nexport function isPromiseCanceledError(error) {\r\n    return error instanceof Error && error.name === canceledName && error.message === canceledName;\r\n}\r\n/**\r\n * Returns an error that signals cancellation.\r\n */\r\nexport function canceled() {\r\n    var error = new Error(canceledName);\r\n    error.name = error.message;\r\n    return error;\r\n}\r\nexport function illegalArgument(name) {\r\n    if (name) {\r\n        return new Error(\"Illegal argument: \" + name);\r\n    }\r\n    else {\r\n        return new Error('Illegal argument');\r\n    }\r\n}\r\nexport function illegalState(name) {\r\n    if (name) {\r\n        return new Error(\"Illegal state: \" + name);\r\n    }\r\n    else {\r\n        return new Error('Illegal state');\r\n    }\r\n}\r\n","export function isDisposable(thing) {\r\n    return typeof thing.dispose === 'function'\r\n        && thing.dispose.length === 0;\r\n}\r\nexport function dispose(first) {\r\n    var rest = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        rest[_i - 1] = arguments[_i];\r\n    }\r\n    if (Array.isArray(first)) {\r\n        first.forEach(function (d) { return d && d.dispose(); });\r\n        return [];\r\n    }\r\n    else if (rest.length === 0) {\r\n        if (first) {\r\n            first.dispose();\r\n            return first;\r\n        }\r\n        return undefined;\r\n    }\r\n    else {\r\n        dispose(first);\r\n        dispose(rest);\r\n        return [];\r\n    }\r\n}\r\nexport function combinedDisposable(disposables) {\r\n    return { dispose: function () { return dispose(disposables); } };\r\n}\r\nexport function toDisposable(fn) {\r\n    return { dispose: function () { fn(); } };\r\n}\r\nvar Disposable = /** @class */ (function () {\r\n    function Disposable() {\r\n        this._toDispose = [];\r\n    }\r\n    Disposable.prototype.dispose = function () {\r\n        this._toDispose = dispose(this._toDispose);\r\n    };\r\n    Disposable.prototype._register = function (t) {\r\n        this._toDispose.push(t);\r\n        return t;\r\n    };\r\n    Disposable.None = Object.freeze({ dispose: function () { } });\r\n    return Disposable;\r\n}());\r\nexport { Disposable };\r\nvar ImmortalReference = /** @class */ (function () {\r\n    function ImmortalReference(object) {\r\n        this.object = object;\r\n    }\r\n    ImmortalReference.prototype.dispose = function () { };\r\n    return ImmortalReference;\r\n}());\r\nexport { ImmortalReference };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar _isWindows = false;\r\nvar _isMacintosh = false;\r\nvar _isLinux = false;\r\nvar _isNative = false;\r\nvar _isWeb = false;\r\nvar _locale = undefined;\r\nvar _language = undefined;\r\nvar _translationsConfigFile = undefined;\r\nexport var LANGUAGE_DEFAULT = 'en';\r\nvar isElectronRenderer = (typeof process !== 'undefined' && typeof process.versions !== 'undefined' && typeof process.versions.electron !== 'undefined' && process.type === 'renderer');\r\n// OS detection\r\nif (typeof navigator === 'object' && !isElectronRenderer) {\r\n    var userAgent = navigator.userAgent;\r\n    _isWindows = userAgent.indexOf('Windows') >= 0;\r\n    _isMacintosh = userAgent.indexOf('Macintosh') >= 0;\r\n    _isLinux = userAgent.indexOf('Linux') >= 0;\r\n    _isWeb = true;\r\n    _locale = navigator.language;\r\n    _language = _locale;\r\n}\r\nelse if (typeof process === 'object') {\r\n    _isWindows = (process.platform === 'win32');\r\n    _isMacintosh = (process.platform === 'darwin');\r\n    _isLinux = (process.platform === 'linux');\r\n    _locale = LANGUAGE_DEFAULT;\r\n    _language = LANGUAGE_DEFAULT;\r\n    var rawNlsConfig = process.env['VSCODE_NLS_CONFIG'];\r\n    if (rawNlsConfig) {\r\n        try {\r\n            var nlsConfig = JSON.parse(rawNlsConfig);\r\n            var resolved = nlsConfig.availableLanguages['*'];\r\n            _locale = nlsConfig.locale;\r\n            // VSCode's default language is 'en'\r\n            _language = resolved ? resolved : LANGUAGE_DEFAULT;\r\n            _translationsConfigFile = nlsConfig._translationsConfigFile;\r\n        }\r\n        catch (e) {\r\n        }\r\n    }\r\n    _isNative = true;\r\n}\r\nvar _platform = 0 /* Web */;\r\nif (_isNative) {\r\n    if (_isMacintosh) {\r\n        _platform = 1 /* Mac */;\r\n    }\r\n    else if (_isWindows) {\r\n        _platform = 3 /* Windows */;\r\n    }\r\n    else if (_isLinux) {\r\n        _platform = 2 /* Linux */;\r\n    }\r\n}\r\nexport var isWindows = _isWindows;\r\nexport var isMacintosh = _isMacintosh;\r\nexport var isLinux = _isLinux;\r\nexport var isNative = _isNative;\r\nexport var isWeb = _isWeb;\r\nvar _globals = (typeof self === 'object' ? self : typeof global === 'object' ? global : {});\r\nexport var globals = _globals;\r\nvar _setImmediate = null;\r\nexport function setImmediate(callback) {\r\n    if (_setImmediate === null) {\r\n        if (globals.setImmediate) {\r\n            _setImmediate = globals.setImmediate.bind(globals);\r\n        }\r\n        else if (typeof process !== 'undefined' && typeof process.nextTick === 'function') {\r\n            _setImmediate = process.nextTick.bind(process);\r\n        }\r\n        else {\r\n            _setImmediate = globals.setTimeout.bind(globals);\r\n        }\r\n    }\r\n    return _setImmediate(callback);\r\n}\r\nexport var OS = (_isMacintosh ? 2 /* Macintosh */ : (_isWindows ? 1 /* Windows */ : 3 /* Linux */));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport function once(fn) {\r\n    var _this = this;\r\n    var didCall = false;\r\n    var result;\r\n    return function () {\r\n        if (didCall) {\r\n            return result;\r\n        }\r\n        didCall = true;\r\n        result = fn.apply(_this, arguments);\r\n        return result;\r\n    };\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nexport var FIN = { done: true, value: undefined };\r\nexport var Iterator;\r\n(function (Iterator) {\r\n    var _empty = {\r\n        next: function () {\r\n            return FIN;\r\n        }\r\n    };\r\n    function empty() {\r\n        return _empty;\r\n    }\r\n    Iterator.empty = empty;\r\n    function fromArray(array, index, length) {\r\n        if (index === void 0) { index = 0; }\r\n        if (length === void 0) { length = array.length; }\r\n        return {\r\n            next: function () {\r\n                if (index >= length) {\r\n                    return FIN;\r\n                }\r\n                return { done: false, value: array[index++] };\r\n            }\r\n        };\r\n    }\r\n    Iterator.fromArray = fromArray;\r\n    function from(elements) {\r\n        if (!elements) {\r\n            return Iterator.empty();\r\n        }\r\n        else if (Array.isArray(elements)) {\r\n            return Iterator.fromArray(elements);\r\n        }\r\n        else {\r\n            return elements;\r\n        }\r\n    }\r\n    Iterator.from = from;\r\n    function map(iterator, fn) {\r\n        return {\r\n            next: function () {\r\n                var element = iterator.next();\r\n                if (element.done) {\r\n                    return FIN;\r\n                }\r\n                else {\r\n                    return { done: false, value: fn(element.value) };\r\n                }\r\n            }\r\n        };\r\n    }\r\n    Iterator.map = map;\r\n    function filter(iterator, fn) {\r\n        return {\r\n            next: function () {\r\n                while (true) {\r\n                    var element = iterator.next();\r\n                    if (element.done) {\r\n                        return FIN;\r\n                    }\r\n                    if (fn(element.value)) {\r\n                        return { done: false, value: element.value };\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n    Iterator.filter = filter;\r\n    function forEach(iterator, fn) {\r\n        for (var next = iterator.next(); !next.done; next = iterator.next()) {\r\n            fn(next.value);\r\n        }\r\n    }\r\n    Iterator.forEach = forEach;\r\n    function collect(iterator) {\r\n        var result = [];\r\n        forEach(iterator, function (value) { return result.push(value); });\r\n        return result;\r\n    }\r\n    Iterator.collect = collect;\r\n})(Iterator || (Iterator = {}));\r\nvar ArrayIterator = /** @class */ (function () {\r\n    function ArrayIterator(items, start, end, index) {\r\n        if (start === void 0) { start = 0; }\r\n        if (end === void 0) { end = items.length; }\r\n        if (index === void 0) { index = start - 1; }\r\n        this.items = items;\r\n        this.start = start;\r\n        this.end = end;\r\n        this.index = index;\r\n    }\r\n    ArrayIterator.prototype.next = function () {\r\n        this.index = Math.min(this.index + 1, this.end);\r\n        return this.current();\r\n    };\r\n    ArrayIterator.prototype.current = function () {\r\n        if (this.index === this.start - 1 || this.index === this.end) {\r\n            return null;\r\n        }\r\n        return this.items[this.index];\r\n    };\r\n    return ArrayIterator;\r\n}());\r\nexport { ArrayIterator };\r\nvar ArrayNavigator = /** @class */ (function (_super) {\r\n    __extends(ArrayNavigator, _super);\r\n    function ArrayNavigator(items, start, end, index) {\r\n        if (start === void 0) { start = 0; }\r\n        if (end === void 0) { end = items.length; }\r\n        if (index === void 0) { index = start - 1; }\r\n        return _super.call(this, items, start, end, index) || this;\r\n    }\r\n    ArrayNavigator.prototype.current = function () {\r\n        return _super.prototype.current.call(this);\r\n    };\r\n    ArrayNavigator.prototype.previous = function () {\r\n        this.index = Math.max(this.index - 1, this.start - 1);\r\n        return this.current();\r\n    };\r\n    ArrayNavigator.prototype.first = function () {\r\n        this.index = this.start;\r\n        return this.current();\r\n    };\r\n    ArrayNavigator.prototype.last = function () {\r\n        this.index = this.end - 1;\r\n        return this.current();\r\n    };\r\n    ArrayNavigator.prototype.parent = function () {\r\n        return null;\r\n    };\r\n    return ArrayNavigator;\r\n}(ArrayIterator));\r\nexport { ArrayNavigator };\r\nvar MappedIterator = /** @class */ (function () {\r\n    function MappedIterator(iterator, fn) {\r\n        this.iterator = iterator;\r\n        this.fn = fn;\r\n        // noop\r\n    }\r\n    MappedIterator.prototype.next = function () { return this.fn(this.iterator.next()); };\r\n    return MappedIterator;\r\n}());\r\nexport { MappedIterator };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { FIN } from './iterator.js';\r\nvar Node = /** @class */ (function () {\r\n    function Node(element) {\r\n        this.element = element;\r\n    }\r\n    return Node;\r\n}());\r\nvar LinkedList = /** @class */ (function () {\r\n    function LinkedList() {\r\n    }\r\n    LinkedList.prototype.isEmpty = function () {\r\n        return !this._first;\r\n    };\r\n    LinkedList.prototype.unshift = function (element) {\r\n        return this.insert(element, false);\r\n    };\r\n    LinkedList.prototype.push = function (element) {\r\n        return this.insert(element, true);\r\n    };\r\n    LinkedList.prototype.insert = function (element, atTheEnd) {\r\n        var _this = this;\r\n        var newNode = new Node(element);\r\n        if (!this._first) {\r\n            this._first = newNode;\r\n            this._last = newNode;\r\n        }\r\n        else if (atTheEnd) {\r\n            // push\r\n            var oldLast = this._last;\r\n            this._last = newNode;\r\n            newNode.prev = oldLast;\r\n            oldLast.next = newNode;\r\n        }\r\n        else {\r\n            // unshift\r\n            var oldFirst = this._first;\r\n            this._first = newNode;\r\n            newNode.next = oldFirst;\r\n            oldFirst.prev = newNode;\r\n        }\r\n        return function () {\r\n            var candidate = _this._first;\r\n            while (candidate instanceof Node) {\r\n                if (candidate !== newNode) {\r\n                    candidate = candidate.next;\r\n                    continue;\r\n                }\r\n                if (candidate.prev && candidate.next) {\r\n                    // middle\r\n                    var anchor = candidate.prev;\r\n                    anchor.next = candidate.next;\r\n                    candidate.next.prev = anchor;\r\n                }\r\n                else if (!candidate.prev && !candidate.next) {\r\n                    // only node\r\n                    _this._first = undefined;\r\n                    _this._last = undefined;\r\n                }\r\n                else if (!candidate.next) {\r\n                    // last\r\n                    _this._last = _this._last.prev;\r\n                    _this._last.next = undefined;\r\n                }\r\n                else if (!candidate.prev) {\r\n                    // first\r\n                    _this._first = _this._first.next;\r\n                    _this._first.prev = undefined;\r\n                }\r\n                // done\r\n                break;\r\n            }\r\n        };\r\n    };\r\n    LinkedList.prototype.iterator = function () {\r\n        var element;\r\n        var node = this._first;\r\n        return {\r\n            next: function () {\r\n                if (!node) {\r\n                    return FIN;\r\n                }\r\n                if (!element) {\r\n                    element = { done: false, value: node.element };\r\n                }\r\n                else {\r\n                    element.value = node.element;\r\n                }\r\n                node = node.next;\r\n                return element;\r\n            }\r\n        };\r\n    };\r\n    return LinkedList;\r\n}());\r\nexport { LinkedList };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { onUnexpectedError } from './errors.js';\r\nimport { once as onceFn } from './functional.js';\r\nimport { combinedDisposable, Disposable, toDisposable } from './lifecycle.js';\r\nimport { LinkedList } from './linkedList.js';\r\nexport var Event;\r\n(function (Event) {\r\n    var _disposable = { dispose: function () { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event || (Event = {}));\r\n/**\r\n * The Emitter can be used to expose an Event to the public\r\n * to fire it from the insides.\r\n * Sample:\r\n    class Document {\r\n\r\n        private _onDidChange = new Emitter<(value:string)=>any>();\r\n\r\n        public onDidChange = this._onDidChange.event;\r\n\r\n        // getter-style\r\n        // get onDidChange(): Event<(value:string)=>any> {\r\n        // \treturn this._onDidChange.event;\r\n        // }\r\n\r\n        private _doIt() {\r\n            //...\r\n            this._onDidChange.fire(value);\r\n        }\r\n    }\r\n */\r\nvar Emitter = /** @class */ (function () {\r\n    function Emitter(_options) {\r\n        if (_options === void 0) { _options = null; }\r\n        this._options = _options;\r\n        this._event = null;\r\n        this._disposed = false;\r\n        this._deliveryQueue = null;\r\n        this._listeners = null;\r\n    }\r\n    Object.defineProperty(Emitter.prototype, \"event\", {\r\n        /**\r\n         * For the public to allow to subscribe\r\n         * to events from this Emitter\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._event) {\r\n                this._event = function (listener, thisArgs, disposables) {\r\n                    if (!_this._listeners) {\r\n                        _this._listeners = new LinkedList();\r\n                    }\r\n                    var firstListener = _this._listeners.isEmpty();\r\n                    if (firstListener && _this._options && _this._options.onFirstListenerAdd) {\r\n                        _this._options.onFirstListenerAdd(_this);\r\n                    }\r\n                    var remove = _this._listeners.push(!thisArgs ? listener : [listener, thisArgs]);\r\n                    if (firstListener && _this._options && _this._options.onFirstListenerDidAdd) {\r\n                        _this._options.onFirstListenerDidAdd(_this);\r\n                    }\r\n                    if (_this._options && _this._options.onListenerDidAdd) {\r\n                        _this._options.onListenerDidAdd(_this, listener, thisArgs);\r\n                    }\r\n                    var result;\r\n                    result = {\r\n                        dispose: function () {\r\n                            result.dispose = Emitter._noop;\r\n                            if (!_this._disposed) {\r\n                                remove();\r\n                                if (_this._options && _this._options.onLastListenerRemove) {\r\n                                    var hasListeners = (_this._listeners && !_this._listeners.isEmpty());\r\n                                    if (!hasListeners) {\r\n                                        _this._options.onLastListenerRemove(_this);\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    };\r\n                    if (Array.isArray(disposables)) {\r\n                        disposables.push(result);\r\n                    }\r\n                    return result;\r\n                };\r\n            }\r\n            return this._event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    Emitter.prototype.fire = function (event) {\r\n        if (this._listeners) {\r\n            // put all [listener,event]-pairs into delivery queue\r\n            // then emit all event. an inner/nested event might be\r\n            // the driver of this\r\n            if (!this._deliveryQueue) {\r\n                this._deliveryQueue = [];\r\n            }\r\n            for (var iter = this._listeners.iterator(), e = iter.next(); !e.done; e = iter.next()) {\r\n                this._deliveryQueue.push([e.value, event]);\r\n            }\r\n            while (this._deliveryQueue.length > 0) {\r\n                var _a = this._deliveryQueue.shift(), listener = _a[0], event_1 = _a[1];\r\n                try {\r\n                    if (typeof listener === 'function') {\r\n                        listener.call(undefined, event_1);\r\n                    }\r\n                    else {\r\n                        listener[0].call(listener[1], event_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    onUnexpectedError(e);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Emitter.prototype.dispose = function () {\r\n        if (this._listeners) {\r\n            this._listeners = null;\r\n        }\r\n        if (this._deliveryQueue) {\r\n            this._deliveryQueue.length = 0;\r\n        }\r\n        this._disposed = true;\r\n    };\r\n    Emitter._noop = function () { };\r\n    return Emitter;\r\n}());\r\nexport { Emitter };\r\nvar EventMultiplexer = /** @class */ (function () {\r\n    function EventMultiplexer() {\r\n        var _this = this;\r\n        this.hasListeners = false;\r\n        this.events = [];\r\n        this.emitter = new Emitter({\r\n            onFirstListenerAdd: function () { return _this.onFirstListenerAdd(); },\r\n            onLastListenerRemove: function () { return _this.onLastListenerRemove(); }\r\n        });\r\n    }\r\n    Object.defineProperty(EventMultiplexer.prototype, \"event\", {\r\n        get: function () {\r\n            return this.emitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    EventMultiplexer.prototype.add = function (event) {\r\n        var _this = this;\r\n        var e = { event: event, listener: null };\r\n        this.events.push(e);\r\n        if (this.hasListeners) {\r\n            this.hook(e);\r\n        }\r\n        var dispose = function () {\r\n            if (_this.hasListeners) {\r\n                _this.unhook(e);\r\n            }\r\n            var idx = _this.events.indexOf(e);\r\n            _this.events.splice(idx, 1);\r\n        };\r\n        return toDisposable(onceFn(dispose));\r\n    };\r\n    EventMultiplexer.prototype.onFirstListenerAdd = function () {\r\n        var _this = this;\r\n        this.hasListeners = true;\r\n        this.events.forEach(function (e) { return _this.hook(e); });\r\n    };\r\n    EventMultiplexer.prototype.onLastListenerRemove = function () {\r\n        var _this = this;\r\n        this.hasListeners = false;\r\n        this.events.forEach(function (e) { return _this.unhook(e); });\r\n    };\r\n    EventMultiplexer.prototype.hook = function (e) {\r\n        var _this = this;\r\n        e.listener = e.event(function (r) { return _this.emitter.fire(r); });\r\n    };\r\n    EventMultiplexer.prototype.unhook = function (e) {\r\n        if (e.listener) {\r\n            e.listener.dispose();\r\n        }\r\n        e.listener = null;\r\n    };\r\n    EventMultiplexer.prototype.dispose = function () {\r\n        this.emitter.dispose();\r\n    };\r\n    return EventMultiplexer;\r\n}());\r\nexport { EventMultiplexer };\r\nexport function once(event) {\r\n    return function (listener, thisArgs, disposables) {\r\n        if (thisArgs === void 0) { thisArgs = null; }\r\n        // we need this, in case the event fires during the listener call\r\n        var didFire = false;\r\n        var result = event(function (e) {\r\n            if (didFire) {\r\n                return;\r\n            }\r\n            else if (result) {\r\n                result.dispose();\r\n            }\r\n            else {\r\n                didFire = true;\r\n            }\r\n            return listener.call(thisArgs, e);\r\n        }, null, disposables);\r\n        if (didFire) {\r\n            result.dispose();\r\n        }\r\n        return result;\r\n    };\r\n}\r\nexport function anyEvent() {\r\n    var events = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        events[_i] = arguments[_i];\r\n    }\r\n    return function (listener, thisArgs, disposables) {\r\n        if (thisArgs === void 0) { thisArgs = null; }\r\n        return combinedDisposable(events.map(function (event) { return event(function (e) { return listener.call(thisArgs, e); }, null, disposables); }));\r\n    };\r\n}\r\nexport function debounceEvent(event, merger, delay, leading) {\r\n    if (delay === void 0) { delay = 100; }\r\n    if (leading === void 0) { leading = false; }\r\n    var subscription;\r\n    var output = undefined;\r\n    var handle = undefined;\r\n    var numDebouncedCalls = 0;\r\n    var emitter = new Emitter({\r\n        onFirstListenerAdd: function () {\r\n            subscription = event(function (cur) {\r\n                numDebouncedCalls++;\r\n                output = merger(output, cur);\r\n                if (leading && !handle) {\r\n                    emitter.fire(output);\r\n                }\r\n                clearTimeout(handle);\r\n                handle = setTimeout(function () {\r\n                    var _output = output;\r\n                    output = undefined;\r\n                    handle = undefined;\r\n                    if (!leading || numDebouncedCalls > 1) {\r\n                        emitter.fire(_output);\r\n                    }\r\n                    numDebouncedCalls = 0;\r\n                }, delay);\r\n            });\r\n        },\r\n        onLastListenerRemove: function () {\r\n            subscription.dispose();\r\n        }\r\n    });\r\n    return emitter.event;\r\n}\r\n/**\r\n * The EventDelayer is useful in situations in which you want\r\n * to delay firing your events during some code.\r\n * You can wrap that code and be sure that the event will not\r\n * be fired during that wrap.\r\n *\r\n * ```\r\n * const emitter: Emitter;\r\n * const delayer = new EventDelayer();\r\n * const delayedEvent = delayer.wrapEvent(emitter.event);\r\n *\r\n * delayedEvent(console.log);\r\n *\r\n * delayer.bufferEvents(() => {\r\n *   emitter.fire(); // event will not be fired yet\r\n * });\r\n *\r\n * // event will only be fired at this point\r\n * ```\r\n */\r\nvar EventBufferer = /** @class */ (function () {\r\n    function EventBufferer() {\r\n        this.buffers = [];\r\n    }\r\n    EventBufferer.prototype.wrapEvent = function (event) {\r\n        var _this = this;\r\n        return function (listener, thisArgs, disposables) {\r\n            return event(function (i) {\r\n                var buffer = _this.buffers[_this.buffers.length - 1];\r\n                if (buffer) {\r\n                    buffer.push(function () { return listener.call(thisArgs, i); });\r\n                }\r\n                else {\r\n                    listener.call(thisArgs, i);\r\n                }\r\n            }, void 0, disposables);\r\n        };\r\n    };\r\n    EventBufferer.prototype.bufferEvents = function (fn) {\r\n        var buffer = [];\r\n        this.buffers.push(buffer);\r\n        var r = fn();\r\n        this.buffers.pop();\r\n        buffer.forEach(function (flush) { return flush(); });\r\n        return r;\r\n    };\r\n    return EventBufferer;\r\n}());\r\nexport { EventBufferer };\r\nexport function mapEvent(event, map) {\r\n    return function (listener, thisArgs, disposables) {\r\n        if (thisArgs === void 0) { thisArgs = null; }\r\n        return event(function (i) { return listener.call(thisArgs, map(i)); }, null, disposables);\r\n    };\r\n}\r\nexport function filterEvent(event, filter) {\r\n    return function (listener, thisArgs, disposables) {\r\n        if (thisArgs === void 0) { thisArgs = null; }\r\n        return event(function (e) { return filter(e) && listener.call(thisArgs, e); }, null, disposables);\r\n    };\r\n}\r\nvar ChainableEvent = /** @class */ (function () {\r\n    function ChainableEvent(_event) {\r\n        this._event = _event;\r\n    }\r\n    Object.defineProperty(ChainableEvent.prototype, \"event\", {\r\n        get: function () { return this._event; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ChainableEvent.prototype.map = function (fn) {\r\n        return new ChainableEvent(mapEvent(this._event, fn));\r\n    };\r\n    ChainableEvent.prototype.filter = function (fn) {\r\n        return new ChainableEvent(filterEvent(this._event, fn));\r\n    };\r\n    ChainableEvent.prototype.on = function (listener, thisArgs, disposables) {\r\n        return this._event(listener, thisArgs, disposables);\r\n    };\r\n    return ChainableEvent;\r\n}());\r\nexport function chain(event) {\r\n    return new ChainableEvent(event);\r\n}\r\nvar Relay = /** @class */ (function () {\r\n    function Relay() {\r\n        var _this = this;\r\n        this.listening = false;\r\n        this.inputEvent = Event.None;\r\n        this.inputEventListener = Disposable.None;\r\n        this.emitter = new Emitter({\r\n            onFirstListenerDidAdd: function () {\r\n                _this.listening = true;\r\n                _this.inputEventListener = _this.inputEvent(_this.emitter.fire, _this.emitter);\r\n            },\r\n            onLastListenerRemove: function () {\r\n                _this.listening = false;\r\n                _this.inputEventListener.dispose();\r\n            }\r\n        });\r\n        this.event = this.emitter.event;\r\n    }\r\n    Object.defineProperty(Relay.prototype, \"input\", {\r\n        set: function (event) {\r\n            this.inputEvent = event;\r\n            if (this.listening) {\r\n                this.inputEventListener.dispose();\r\n                this.inputEventListener = event(this.emitter.fire, this.emitter);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Relay.prototype.dispose = function () {\r\n        this.inputEventListener.dispose();\r\n        this.emitter.dispose();\r\n    };\r\n    return Relay;\r\n}());\r\nexport { Relay };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter, Event } from './event.js';\r\nvar shortcutEvent = Object.freeze(function (callback, context) {\r\n    var handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose: function () { clearTimeout(handle); } };\r\n});\r\nexport var CancellationToken;\r\n(function (CancellationToken) {\r\n    function isCancellationToken(thing) {\r\n        if (thing === CancellationToken.None || thing === CancellationToken.Cancelled) {\r\n            return true;\r\n        }\r\n        if (thing instanceof MutableToken) {\r\n            return true;\r\n        }\r\n        if (!thing || typeof thing !== 'object') {\r\n            return false;\r\n        }\r\n        return typeof thing.isCancellationRequested === 'boolean'\r\n            && typeof thing.onCancellationRequested === 'function';\r\n    }\r\n    CancellationToken.isCancellationToken = isCancellationToken;\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: shortcutEvent\r\n    });\r\n})(CancellationToken || (CancellationToken = {}));\r\nvar MutableToken = /** @class */ (function () {\r\n    function MutableToken() {\r\n        this._isCancelled = false;\r\n        this._emitter = null;\r\n    }\r\n    MutableToken.prototype.cancel = function () {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(MutableToken.prototype, \"isCancellationRequested\", {\r\n        get: function () {\r\n            return this._isCancelled;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MutableToken.prototype, \"onCancellationRequested\", {\r\n        get: function () {\r\n            if (this._isCancelled) {\r\n                return shortcutEvent;\r\n            }\r\n            if (!this._emitter) {\r\n                this._emitter = new Emitter();\r\n            }\r\n            return this._emitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MutableToken.prototype.dispose = function () {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = null;\r\n        }\r\n    };\r\n    return MutableToken;\r\n}());\r\nvar CancellationTokenSource = /** @class */ (function () {\r\n    function CancellationTokenSource() {\r\n    }\r\n    Object.defineProperty(CancellationTokenSource.prototype, \"token\", {\r\n        get: function () {\r\n            if (!this._token) {\r\n                // be lazy and create the token only when\r\n                // actually needed\r\n                this._token = new MutableToken();\r\n            }\r\n            return this._token;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CancellationTokenSource.prototype.cancel = function () {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually cancel\r\n            this._token.cancel();\r\n        }\r\n    };\r\n    CancellationTokenSource.prototype.dispose = function () {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    };\r\n    return CancellationTokenSource;\r\n}());\r\nexport { CancellationTokenSource };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { CancellationTokenSource } from './cancellation.js';\r\nimport * as errors from './errors.js';\r\nimport { Disposable } from './lifecycle.js';\r\nimport { TPromise } from './winjs.base.js';\r\nexport function isThenable(obj) {\r\n    return obj && typeof obj.then === 'function';\r\n}\r\nexport function createCancelablePromise(callback) {\r\n    var source = new CancellationTokenSource();\r\n    var thenable = callback(source.token);\r\n    var promise = new Promise(function (resolve, reject) {\r\n        source.token.onCancellationRequested(function () {\r\n            reject(errors.canceled());\r\n        });\r\n        Promise.resolve(thenable).then(function (value) {\r\n            source.dispose();\r\n            resolve(value);\r\n        }, function (err) {\r\n            source.dispose();\r\n            reject(err);\r\n        });\r\n    });\r\n    return new /** @class */ (function () {\r\n        function class_1() {\r\n        }\r\n        class_1.prototype.cancel = function () {\r\n            source.cancel();\r\n        };\r\n        class_1.prototype.then = function (resolve, reject) {\r\n            return promise.then(resolve, reject);\r\n        };\r\n        class_1.prototype.catch = function (reject) {\r\n            return this.then(undefined, reject);\r\n        };\r\n        return class_1;\r\n    }());\r\n}\r\n/**\r\n * A helper to delay execution of a task that is being requested often.\r\n *\r\n * Following the throttler, now imagine the mail man wants to optimize the number of\r\n * trips proactively. The trip itself can be long, so he decides not to make the trip\r\n * as soon as a letter is submitted. Instead he waits a while, in case more\r\n * letters are submitted. After said waiting period, if no letters were submitted, he\r\n * decides to make the trip. Imagine that N more letters were submitted after the first\r\n * one, all within a short period of time between each other. Even though N+1\r\n * submissions occurred, only 1 delivery was made.\r\n *\r\n * The delayer offers this behavior via the trigger() method, into which both the task\r\n * to be executed and the waiting period (delay) must be passed in as arguments. Following\r\n * the example:\r\n *\r\n * \t\tconst delayer = new Delayer(WAITING_PERIOD);\r\n * \t\tconst letters = [];\r\n *\r\n * \t\tfunction letterReceived(l) {\r\n * \t\t\tletters.push(l);\r\n * \t\t\tdelayer.trigger(() => { return makeTheTrip(); });\r\n * \t\t}\r\n */\r\nvar Delayer = /** @class */ (function () {\r\n    function Delayer(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = null;\r\n        this.completionPromise = null;\r\n        this.doResolve = null;\r\n        this.task = null;\r\n    }\r\n    Delayer.prototype.trigger = function (task, delay) {\r\n        var _this = this;\r\n        if (delay === void 0) { delay = this.defaultDelay; }\r\n        this.task = task;\r\n        this.cancelTimeout();\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new TPromise(function (c, e) {\r\n                _this.doResolve = c;\r\n                _this.doReject = e;\r\n            }).then(function () {\r\n                _this.completionPromise = null;\r\n                _this.doResolve = null;\r\n                var task = _this.task;\r\n                _this.task = null;\r\n                return task();\r\n            });\r\n        }\r\n        this.timeout = setTimeout(function () {\r\n            _this.timeout = null;\r\n            _this.doResolve(null);\r\n        }, delay);\r\n        return this.completionPromise;\r\n    };\r\n    Delayer.prototype.cancel = function () {\r\n        this.cancelTimeout();\r\n        if (this.completionPromise) {\r\n            this.doReject(errors.canceled());\r\n            this.completionPromise = null;\r\n        }\r\n    };\r\n    Delayer.prototype.cancelTimeout = function () {\r\n        if (this.timeout !== null) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = null;\r\n        }\r\n    };\r\n    Delayer.prototype.dispose = function () {\r\n        this.cancelTimeout();\r\n    };\r\n    return Delayer;\r\n}());\r\nexport { Delayer };\r\nexport function timeout(millis, token) {\r\n    if (!token) {\r\n        return createCancelablePromise(function (token) { return timeout(millis, token); });\r\n    }\r\n    return new Promise(function (resolve, reject) {\r\n        var handle = setTimeout(resolve, millis);\r\n        token.onCancellationRequested(function () {\r\n            clearTimeout(handle);\r\n            reject(errors.canceled());\r\n        });\r\n    });\r\n}\r\n/**\r\n * Returns a new promise that joins the provided promise. Upon completion of\r\n * the provided promise the provided function will always be called. This\r\n * method is comparable to a try-finally code block.\r\n * @param promise a promise\r\n * @param callback a function that will be call in the success and error case.\r\n */\r\nexport function always(promise, callback) {\r\n    function safeCallback() {\r\n        try {\r\n            callback();\r\n        }\r\n        catch (err) {\r\n            errors.onUnexpectedError(err);\r\n        }\r\n    }\r\n    promise.then(function (_) { return safeCallback(); }, function (_) { return safeCallback(); });\r\n    return Promise.resolve(promise);\r\n}\r\nexport function first(promiseFactories, shouldStop, defaultValue) {\r\n    if (shouldStop === void 0) { shouldStop = function (t) { return !!t; }; }\r\n    if (defaultValue === void 0) { defaultValue = null; }\r\n    var index = 0;\r\n    var len = promiseFactories.length;\r\n    var loop = function () {\r\n        if (index >= len) {\r\n            return Promise.resolve(defaultValue);\r\n        }\r\n        var factory = promiseFactories[index++];\r\n        var promise = Promise.resolve(factory());\r\n        return promise.then(function (result) {\r\n            if (shouldStop(result)) {\r\n                return Promise.resolve(result);\r\n            }\r\n            return loop();\r\n        });\r\n    };\r\n    return loop();\r\n}\r\nvar TimeoutTimer = /** @class */ (function (_super) {\r\n    __extends(TimeoutTimer, _super);\r\n    function TimeoutTimer(runner, timeout) {\r\n        var _this = _super.call(this) || this;\r\n        _this._token = -1;\r\n        if (typeof runner === 'function' && typeof timeout === 'number') {\r\n            _this.setIfNotSet(runner, timeout);\r\n        }\r\n        return _this;\r\n    }\r\n    TimeoutTimer.prototype.dispose = function () {\r\n        this.cancel();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    TimeoutTimer.prototype.cancel = function () {\r\n        if (this._token !== -1) {\r\n            clearTimeout(this._token);\r\n            this._token = -1;\r\n        }\r\n    };\r\n    TimeoutTimer.prototype.cancelAndSet = function (runner, timeout) {\r\n        var _this = this;\r\n        this.cancel();\r\n        this._token = setTimeout(function () {\r\n            _this._token = -1;\r\n            runner();\r\n        }, timeout);\r\n    };\r\n    TimeoutTimer.prototype.setIfNotSet = function (runner, timeout) {\r\n        var _this = this;\r\n        if (this._token !== -1) {\r\n            // timer is already set\r\n            return;\r\n        }\r\n        this._token = setTimeout(function () {\r\n            _this._token = -1;\r\n            runner();\r\n        }, timeout);\r\n    };\r\n    return TimeoutTimer;\r\n}(Disposable));\r\nexport { TimeoutTimer };\r\nvar IntervalTimer = /** @class */ (function (_super) {\r\n    __extends(IntervalTimer, _super);\r\n    function IntervalTimer() {\r\n        var _this = _super.call(this) || this;\r\n        _this._token = -1;\r\n        return _this;\r\n    }\r\n    IntervalTimer.prototype.dispose = function () {\r\n        this.cancel();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    IntervalTimer.prototype.cancel = function () {\r\n        if (this._token !== -1) {\r\n            clearInterval(this._token);\r\n            this._token = -1;\r\n        }\r\n    };\r\n    IntervalTimer.prototype.cancelAndSet = function (runner, interval) {\r\n        this.cancel();\r\n        this._token = setInterval(function () {\r\n            runner();\r\n        }, interval);\r\n    };\r\n    return IntervalTimer;\r\n}(Disposable));\r\nexport { IntervalTimer };\r\nvar RunOnceScheduler = /** @class */ (function () {\r\n    function RunOnceScheduler(runner, timeout) {\r\n        this.timeoutToken = -1;\r\n        this.runner = runner;\r\n        this.timeout = timeout;\r\n        this.timeoutHandler = this.onTimeout.bind(this);\r\n    }\r\n    /**\r\n     * Dispose RunOnceScheduler\r\n     */\r\n    RunOnceScheduler.prototype.dispose = function () {\r\n        this.cancel();\r\n        this.runner = null;\r\n    };\r\n    /**\r\n     * Cancel current scheduled runner (if any).\r\n     */\r\n    RunOnceScheduler.prototype.cancel = function () {\r\n        if (this.isScheduled()) {\r\n            clearTimeout(this.timeoutToken);\r\n            this.timeoutToken = -1;\r\n        }\r\n    };\r\n    /**\r\n     * Cancel previous runner (if any) & schedule a new runner.\r\n     */\r\n    RunOnceScheduler.prototype.schedule = function (delay) {\r\n        if (delay === void 0) { delay = this.timeout; }\r\n        this.cancel();\r\n        this.timeoutToken = setTimeout(this.timeoutHandler, delay);\r\n    };\r\n    /**\r\n     * Returns true if scheduled.\r\n     */\r\n    RunOnceScheduler.prototype.isScheduled = function () {\r\n        return this.timeoutToken !== -1;\r\n    };\r\n    RunOnceScheduler.prototype.onTimeout = function () {\r\n        this.timeoutToken = -1;\r\n        if (this.runner) {\r\n            this.doRun();\r\n        }\r\n    };\r\n    RunOnceScheduler.prototype.doRun = function () {\r\n        if (this.runner) {\r\n            this.runner();\r\n        }\r\n    };\r\n    return RunOnceScheduler;\r\n}());\r\nexport { RunOnceScheduler };\r\n/**\r\n * Execute the callback the next time the browser is idle\r\n */\r\nexport var runWhenIdle;\r\n(function () {\r\n    if (typeof requestIdleCallback !== 'function' || typeof cancelIdleCallback !== 'function') {\r\n        var dummyIdle_1 = Object.freeze({\r\n            didTimeout: true,\r\n            timeRemaining: function () { return 15; }\r\n        });\r\n        runWhenIdle = function (runner, timeout) {\r\n            if (timeout === void 0) { timeout = 0; }\r\n            var handle = setTimeout(function () { return runner(dummyIdle_1); }, timeout);\r\n            var disposed = false;\r\n            return {\r\n                dispose: function () {\r\n                    if (disposed) {\r\n                        return;\r\n                    }\r\n                    disposed = true;\r\n                    clearTimeout(handle);\r\n                }\r\n            };\r\n        };\r\n    }\r\n    else {\r\n        runWhenIdle = function (runner, timeout) {\r\n            var handle = requestIdleCallback(runner, typeof timeout === 'number' ? { timeout: timeout } : undefined);\r\n            var disposed = false;\r\n            return {\r\n                dispose: function () {\r\n                    if (disposed) {\r\n                        return;\r\n                    }\r\n                    disposed = true;\r\n                    cancelIdleCallback(handle);\r\n                }\r\n            };\r\n        };\r\n    }\r\n})();\r\n/**\r\n * An implementation of the \"idle-until-urgent\"-strategy as introduced\r\n * here: https://philipwalton.com/articles/idle-until-urgent/\r\n */\r\nvar IdleValue = /** @class */ (function () {\r\n    function IdleValue(executor) {\r\n        var _this = this;\r\n        this._executor = function () {\r\n            try {\r\n                _this._value = executor();\r\n            }\r\n            catch (err) {\r\n                _this._error = err;\r\n            }\r\n            finally {\r\n                _this._didRun = true;\r\n            }\r\n        };\r\n        this._handle = runWhenIdle(function () { return _this._executor(); });\r\n    }\r\n    IdleValue.prototype.dispose = function () {\r\n        this._handle.dispose();\r\n    };\r\n    IdleValue.prototype.getValue = function () {\r\n        if (!this._didRun) {\r\n            this._handle.dispose();\r\n            this._executor();\r\n        }\r\n        if (this._error) {\r\n            throw this._error;\r\n        }\r\n        return this._value;\r\n    };\r\n    return IdleValue;\r\n}());\r\nexport { IdleValue };\r\n//#endregion\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Promise as WinJSPromise } from './winjs.base.js';\r\nimport * as platform from './platform.js';\r\nimport { isThenable } from './async.js';\r\nfunction isWinJSPromise(candidate) {\r\n    return isThenable(candidate) && typeof candidate.done === 'function';\r\n}\r\n/**\r\n * A polyfill for the native promises. The implementation is based on\r\n * WinJS promises but tries to gap differences between winjs promises\r\n * and native promises.\r\n */\r\nvar PolyfillPromise = /** @class */ (function () {\r\n    function PolyfillPromise(initOrPromise) {\r\n        if (isWinJSPromise(initOrPromise)) {\r\n            this._winjsPromise = initOrPromise;\r\n        }\r\n        else {\r\n            this._winjsPromise = new WinJSPromise(function (resolve, reject) {\r\n                var initializing = true;\r\n                initOrPromise(function (value) {\r\n                    if (!initializing) {\r\n                        resolve(value);\r\n                    }\r\n                    else {\r\n                        platform.setImmediate(function () { return resolve(value); });\r\n                    }\r\n                }, function (err) {\r\n                    if (!initializing) {\r\n                        reject(err);\r\n                    }\r\n                    else {\r\n                        platform.setImmediate(function () { return reject(err); });\r\n                    }\r\n                });\r\n                initializing = false;\r\n            });\r\n        }\r\n    }\r\n    PolyfillPromise.all = function (thenables) {\r\n        return new PolyfillPromise(WinJSPromise.join(thenables).then(null, function (values) {\r\n            // WinJSPromise returns a sparse array whereas\r\n            // native promises return the *first* error\r\n            for (var key in values) {\r\n                if (values.hasOwnProperty(key)) {\r\n                    return values[key];\r\n                }\r\n            }\r\n        }));\r\n    };\r\n    PolyfillPromise.race = function (thenables) {\r\n        // WinJSPromise returns `{ key: <index/key>, value: <promise> }`\r\n        // from the `any` call and Promise.race just wants the value\r\n        return new PolyfillPromise(WinJSPromise.any(thenables).then(function (entry) { return entry.value; }, function (err) { return err.value; }));\r\n    };\r\n    PolyfillPromise.resolve = function (value) {\r\n        return new PolyfillPromise(WinJSPromise.wrap(value));\r\n    };\r\n    PolyfillPromise.reject = function (value) {\r\n        return new PolyfillPromise(WinJSPromise.wrapError(value));\r\n    };\r\n    PolyfillPromise.prototype.then = function (onFulfilled, onRejected) {\r\n        var sync = true;\r\n        // To support chaining, we need to return the value of the\r\n        // onFulfilled and onRejected callback.\r\n        // WinJSPromise supports a flat-map style #then, ie. the callbacks\r\n        // passed to WinJSPromise#then can return a Promise.\r\n        var promise = new PolyfillPromise(this._winjsPromise.then(onFulfilled && function (value) {\r\n            if (!sync) {\r\n                return onFulfilled(value);\r\n            }\r\n            else {\r\n                return new WinJSPromise(function (resolve, reject) {\r\n                    platform.setImmediate(function () {\r\n                        var result;\r\n                        try {\r\n                            result = onFulfilled(value);\r\n                        }\r\n                        catch (err2) {\r\n                            reject(err2);\r\n                            return;\r\n                        }\r\n                        resolve(result);\r\n                    });\r\n                });\r\n            }\r\n        }, onRejected && function (err) {\r\n            if (!sync) {\r\n                return onRejected(err);\r\n            }\r\n            else {\r\n                return new WinJSPromise(function (resolve, reject) {\r\n                    platform.setImmediate(function () {\r\n                        var result;\r\n                        try {\r\n                            result = onRejected(err);\r\n                        }\r\n                        catch (err2) {\r\n                            reject(err2);\r\n                            return;\r\n                        }\r\n                        resolve(result);\r\n                    });\r\n                });\r\n            }\r\n        }));\r\n        sync = false;\r\n        return promise;\r\n    };\r\n    PolyfillPromise.prototype.catch = function (onRejected) {\r\n        return this.then(null, onRejected);\r\n    };\r\n    return PolyfillPromise;\r\n}());\r\nexport { PolyfillPromise };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { transformErrorForSerialization } from '../errors.js';\r\nimport { Disposable } from '../lifecycle.js';\r\nimport { isWeb } from '../platform.js';\r\nimport { PolyfillPromise } from '../winjs.polyfill.promise.js';\r\nvar global = self;\r\n// When missing, polyfill the native promise\r\n// with our winjs-based polyfill\r\nif (typeof global.Promise === 'undefined') {\r\n    global.Promise = PolyfillPromise;\r\n}\r\nvar INITIALIZE = '$initialize';\r\nvar webWorkerWarningLogged = false;\r\nexport function logOnceWebWorkerWarning(err) {\r\n    if (!isWeb) {\r\n        // running tests\r\n        return;\r\n    }\r\n    if (!webWorkerWarningLogged) {\r\n        webWorkerWarningLogged = true;\r\n        console.warn('Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/Microsoft/monaco-editor#faq');\r\n    }\r\n    console.warn(err.message);\r\n}\r\nvar SimpleWorkerProtocol = /** @class */ (function () {\r\n    function SimpleWorkerProtocol(handler) {\r\n        this._workerId = -1;\r\n        this._handler = handler;\r\n        this._lastSentReq = 0;\r\n        this._pendingReplies = Object.create(null);\r\n    }\r\n    SimpleWorkerProtocol.prototype.setWorkerId = function (workerId) {\r\n        this._workerId = workerId;\r\n    };\r\n    SimpleWorkerProtocol.prototype.sendMessage = function (method, args) {\r\n        var _this = this;\r\n        var req = String(++this._lastSentReq);\r\n        return new Promise(function (resolve, reject) {\r\n            _this._pendingReplies[req] = {\r\n                resolve: resolve,\r\n                reject: reject\r\n            };\r\n            _this._send({\r\n                vsWorker: _this._workerId,\r\n                req: req,\r\n                method: method,\r\n                args: args\r\n            });\r\n        });\r\n    };\r\n    SimpleWorkerProtocol.prototype.handleMessage = function (serializedMessage) {\r\n        var message;\r\n        try {\r\n            message = JSON.parse(serializedMessage);\r\n        }\r\n        catch (e) {\r\n            // nothing\r\n            return;\r\n        }\r\n        if (!message || !message.vsWorker) {\r\n            return;\r\n        }\r\n        if (this._workerId !== -1 && message.vsWorker !== this._workerId) {\r\n            return;\r\n        }\r\n        this._handleMessage(message);\r\n    };\r\n    SimpleWorkerProtocol.prototype._handleMessage = function (msg) {\r\n        var _this = this;\r\n        if (msg.seq) {\r\n            var replyMessage = msg;\r\n            if (!this._pendingReplies[replyMessage.seq]) {\r\n                console.warn('Got reply to unknown seq');\r\n                return;\r\n            }\r\n            var reply = this._pendingReplies[replyMessage.seq];\r\n            delete this._pendingReplies[replyMessage.seq];\r\n            if (replyMessage.err) {\r\n                var err = replyMessage.err;\r\n                if (replyMessage.err.$isError) {\r\n                    err = new Error();\r\n                    err.name = replyMessage.err.name;\r\n                    err.message = replyMessage.err.message;\r\n                    err.stack = replyMessage.err.stack;\r\n                }\r\n                reply.reject(err);\r\n                return;\r\n            }\r\n            reply.resolve(replyMessage.res);\r\n            return;\r\n        }\r\n        var requestMessage = msg;\r\n        var req = requestMessage.req;\r\n        var result = this._handler.handleMessage(requestMessage.method, requestMessage.args);\r\n        result.then(function (r) {\r\n            _this._send({\r\n                vsWorker: _this._workerId,\r\n                seq: req,\r\n                res: r,\r\n                err: undefined\r\n            });\r\n        }, function (e) {\r\n            if (e.detail instanceof Error) {\r\n                // Loading errors have a detail property that points to the actual error\r\n                e.detail = transformErrorForSerialization(e.detail);\r\n            }\r\n            _this._send({\r\n                vsWorker: _this._workerId,\r\n                seq: req,\r\n                res: undefined,\r\n                err: transformErrorForSerialization(e)\r\n            });\r\n        });\r\n    };\r\n    SimpleWorkerProtocol.prototype._send = function (msg) {\r\n        var strMsg = JSON.stringify(msg);\r\n        // console.log('SENDING: ' + strMsg);\r\n        this._handler.sendMessage(strMsg);\r\n    };\r\n    return SimpleWorkerProtocol;\r\n}());\r\n/**\r\n * Main thread side\r\n */\r\nvar SimpleWorkerClient = /** @class */ (function (_super) {\r\n    __extends(SimpleWorkerClient, _super);\r\n    function SimpleWorkerClient(workerFactory, moduleId) {\r\n        var _this = _super.call(this) || this;\r\n        var lazyProxyReject = null;\r\n        _this._worker = _this._register(workerFactory.create('vs/base/common/worker/simpleWorker', function (msg) {\r\n            _this._protocol.handleMessage(msg);\r\n        }, function (err) {\r\n            // in Firefox, web workers fail lazily :(\r\n            // we will reject the proxy\r\n            if (lazyProxyReject) {\r\n                lazyProxyReject(err);\r\n            }\r\n        }));\r\n        _this._protocol = new SimpleWorkerProtocol({\r\n            sendMessage: function (msg) {\r\n                _this._worker.postMessage(msg);\r\n            },\r\n            handleMessage: function (method, args) {\r\n                // Intentionally not supporting worker -> main requests\r\n                return Promise.resolve(null);\r\n            }\r\n        });\r\n        _this._protocol.setWorkerId(_this._worker.getId());\r\n        // Gather loader configuration\r\n        var loaderConfiguration = null;\r\n        if (typeof self.require !== 'undefined' && typeof self.require.getConfig === 'function') {\r\n            // Get the configuration from the Monaco AMD Loader\r\n            loaderConfiguration = self.require.getConfig();\r\n        }\r\n        else if (typeof self.requirejs !== 'undefined') {\r\n            // Get the configuration from requirejs\r\n            loaderConfiguration = self.requirejs.s.contexts._.config;\r\n        }\r\n        // Send initialize message\r\n        _this._onModuleLoaded = _this._protocol.sendMessage(INITIALIZE, [\r\n            _this._worker.getId(),\r\n            moduleId,\r\n            loaderConfiguration\r\n        ]);\r\n        _this._lazyProxy = new Promise(function (resolve, reject) {\r\n            lazyProxyReject = reject;\r\n            _this._onModuleLoaded.then(function (availableMethods) {\r\n                var proxy = {};\r\n                for (var i = 0; i < availableMethods.length; i++) {\r\n                    proxy[availableMethods[i]] = createProxyMethod(availableMethods[i], proxyMethodRequest);\r\n                }\r\n                resolve(proxy);\r\n            }, function (e) {\r\n                reject(e);\r\n                _this._onError('Worker failed to load ' + moduleId, e);\r\n            });\r\n        });\r\n        // Create proxy to loaded code\r\n        var proxyMethodRequest = function (method, args) {\r\n            return _this._request(method, args);\r\n        };\r\n        var createProxyMethod = function (method, proxyMethodRequest) {\r\n            return function () {\r\n                var args = Array.prototype.slice.call(arguments, 0);\r\n                return proxyMethodRequest(method, args);\r\n            };\r\n        };\r\n        return _this;\r\n    }\r\n    SimpleWorkerClient.prototype.getProxyObject = function () {\r\n        return this._lazyProxy;\r\n    };\r\n    SimpleWorkerClient.prototype._request = function (method, args) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this._onModuleLoaded.then(function () {\r\n                _this._protocol.sendMessage(method, args).then(resolve, reject);\r\n            }, reject);\r\n        });\r\n    };\r\n    SimpleWorkerClient.prototype._onError = function (message, error) {\r\n        console.error(message);\r\n        console.info(error);\r\n    };\r\n    return SimpleWorkerClient;\r\n}(Disposable));\r\nexport { SimpleWorkerClient };\r\n/**\r\n * Worker side\r\n */\r\nvar SimpleWorkerServer = /** @class */ (function () {\r\n    function SimpleWorkerServer(postSerializedMessage, requestHandler) {\r\n        var _this = this;\r\n        this._requestHandler = requestHandler;\r\n        this._protocol = new SimpleWorkerProtocol({\r\n            sendMessage: function (msg) {\r\n                postSerializedMessage(msg);\r\n            },\r\n            handleMessage: function (method, args) { return _this._handleMessage(method, args); }\r\n        });\r\n    }\r\n    SimpleWorkerServer.prototype.onmessage = function (msg) {\r\n        this._protocol.handleMessage(msg);\r\n    };\r\n    SimpleWorkerServer.prototype._handleMessage = function (method, args) {\r\n        if (method === INITIALIZE) {\r\n            return this.initialize(args[0], args[1], args[2]);\r\n        }\r\n        if (!this._requestHandler || typeof this._requestHandler[method] !== 'function') {\r\n            return Promise.reject(new Error('Missing requestHandler or method: ' + method));\r\n        }\r\n        try {\r\n            return Promise.resolve(this._requestHandler[method].apply(this._requestHandler, args));\r\n        }\r\n        catch (e) {\r\n            return Promise.reject(e);\r\n        }\r\n    };\r\n    SimpleWorkerServer.prototype.initialize = function (workerId, moduleId, loaderConfig) {\r\n        var _this = this;\r\n        this._protocol.setWorkerId(workerId);\r\n        if (this._requestHandler) {\r\n            // static request handler\r\n            var methods = [];\r\n            for (var prop in this._requestHandler) {\r\n                if (typeof this._requestHandler[prop] === 'function') {\r\n                    methods.push(prop);\r\n                }\r\n            }\r\n            return Promise.resolve(methods);\r\n        }\r\n        if (loaderConfig) {\r\n            // Remove 'baseUrl', handling it is beyond scope for now\r\n            if (typeof loaderConfig.baseUrl !== 'undefined') {\r\n                delete loaderConfig['baseUrl'];\r\n            }\r\n            if (typeof loaderConfig.paths !== 'undefined') {\r\n                if (typeof loaderConfig.paths.vs !== 'undefined') {\r\n                    delete loaderConfig.paths['vs'];\r\n                }\r\n            }\r\n            // Since this is in a web worker, enable catching errors\r\n            loaderConfig.catchError = true;\r\n            self.require.config(loaderConfig);\r\n        }\r\n        return new Promise(function (resolve, reject) {\r\n            // Use the global require to be sure to get the global config\r\n            self.require([moduleId], function () {\r\n                var result = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    result[_i] = arguments[_i];\r\n                }\r\n                var handlerModule = result[0];\r\n                _this._requestHandler = handlerModule.create();\r\n                if (!_this._requestHandler) {\r\n                    reject(new Error(\"No RequestHandler!\"));\r\n                    return;\r\n                }\r\n                var methods = [];\r\n                for (var prop in _this._requestHandler) {\r\n                    if (typeof _this._requestHandler[prop] === 'function') {\r\n                        methods.push(prop);\r\n                    }\r\n                }\r\n                resolve(methods);\r\n            }, reject);\r\n        });\r\n    };\r\n    return SimpleWorkerServer;\r\n}());\r\nexport { SimpleWorkerServer };\r\n/**\r\n * Called on the worker side\r\n */\r\nexport function create(postMessage) {\r\n    return new SimpleWorkerServer(postMessage, null);\r\n}\r\n","/**\r\n * Returns the last element of an array.\r\n * @param array The array.\r\n * @param n Which element from the end (default is zero).\r\n */\r\nexport function tail(array, n) {\r\n    if (n === void 0) { n = 0; }\r\n    return array[array.length - (1 + n)];\r\n}\r\nexport function tail2(arr) {\r\n    if (arr.length === 0) {\r\n        throw new Error('Invalid tail call');\r\n    }\r\n    return [arr.slice(0, arr.length - 1), arr[arr.length - 1]];\r\n}\r\nexport function equals(one, other, itemEquals) {\r\n    if (itemEquals === void 0) { itemEquals = function (a, b) { return a === b; }; }\r\n    if (one === other) {\r\n        return true;\r\n    }\r\n    if (!one || !other) {\r\n        return false;\r\n    }\r\n    if (one.length !== other.length) {\r\n        return false;\r\n    }\r\n    for (var i = 0, len = one.length; i < len; i++) {\r\n        if (!itemEquals(one[i], other[i])) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexport function binarySearch(array, key, comparator) {\r\n    var low = 0, high = array.length - 1;\r\n    while (low <= high) {\r\n        var mid = ((low + high) / 2) | 0;\r\n        var comp = comparator(array[mid], key);\r\n        if (comp < 0) {\r\n            low = mid + 1;\r\n        }\r\n        else if (comp > 0) {\r\n            high = mid - 1;\r\n        }\r\n        else {\r\n            return mid;\r\n        }\r\n    }\r\n    return -(low + 1);\r\n}\r\n/**\r\n * Takes a sorted array and a function p. The array is sorted in such a way that all elements where p(x) is false\r\n * are located before all elements where p(x) is true.\r\n * @returns the least x for which p(x) is true or array.length if no element fullfills the given function.\r\n */\r\nexport function findFirstInSorted(array, p) {\r\n    var low = 0, high = array.length;\r\n    if (high === 0) {\r\n        return 0; // no children\r\n    }\r\n    while (low < high) {\r\n        var mid = Math.floor((low + high) / 2);\r\n        if (p(array[mid])) {\r\n            high = mid;\r\n        }\r\n        else {\r\n            low = mid + 1;\r\n        }\r\n    }\r\n    return low;\r\n}\r\n/**\r\n * Like `Array#sort` but always stable. Usually runs a little slower `than Array#sort`\r\n * so only use this when actually needing stable sort.\r\n */\r\nexport function mergeSort(data, compare) {\r\n    _sort(data, compare, 0, data.length - 1, []);\r\n    return data;\r\n}\r\nfunction _merge(a, compare, lo, mid, hi, aux) {\r\n    var leftIdx = lo, rightIdx = mid + 1;\r\n    for (var i = lo; i <= hi; i++) {\r\n        aux[i] = a[i];\r\n    }\r\n    for (var i = lo; i <= hi; i++) {\r\n        if (leftIdx > mid) {\r\n            // left side consumed\r\n            a[i] = aux[rightIdx++];\r\n        }\r\n        else if (rightIdx > hi) {\r\n            // right side consumed\r\n            a[i] = aux[leftIdx++];\r\n        }\r\n        else if (compare(aux[rightIdx], aux[leftIdx]) < 0) {\r\n            // right element is less -> comes first\r\n            a[i] = aux[rightIdx++];\r\n        }\r\n        else {\r\n            // left element comes first (less or equal)\r\n            a[i] = aux[leftIdx++];\r\n        }\r\n    }\r\n}\r\nfunction _sort(a, compare, lo, hi, aux) {\r\n    if (hi <= lo) {\r\n        return;\r\n    }\r\n    var mid = lo + ((hi - lo) / 2) | 0;\r\n    _sort(a, compare, lo, mid, aux);\r\n    _sort(a, compare, mid + 1, hi, aux);\r\n    if (compare(a[mid], a[mid + 1]) <= 0) {\r\n        // left and right are sorted and if the last-left element is less\r\n        // or equals than the first-right element there is nothing else\r\n        // to do\r\n        return;\r\n    }\r\n    _merge(a, compare, lo, mid, hi, aux);\r\n}\r\nexport function groupBy(data, compare) {\r\n    var result = [];\r\n    var currentGroup = undefined;\r\n    for (var _i = 0, _a = mergeSort(data.slice(0), compare); _i < _a.length; _i++) {\r\n        var element = _a[_i];\r\n        if (!currentGroup || compare(currentGroup[0], element) !== 0) {\r\n            currentGroup = [element];\r\n            result.push(currentGroup);\r\n        }\r\n        else {\r\n            currentGroup.push(element);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * @returns a new array with all falsy values removed. The original array IS NOT modified.\r\n */\r\nexport function coalesce(array) {\r\n    if (!array) {\r\n        return array;\r\n    }\r\n    return array.filter(function (e) { return !!e; });\r\n}\r\n/**\r\n * @returns {{false}} if the provided object is an array\r\n * \tand not empty.\r\n */\r\nexport function isFalsyOrEmpty(obj) {\r\n    return !Array.isArray(obj) || obj.length === 0;\r\n}\r\n/**\r\n * Removes duplicates from the given array. The optional keyFn allows to specify\r\n * how elements are checked for equalness by returning a unique string for each.\r\n */\r\nexport function distinct(array, keyFn) {\r\n    if (!keyFn) {\r\n        return array.filter(function (element, position) {\r\n            return array.indexOf(element) === position;\r\n        });\r\n    }\r\n    var seen = Object.create(null);\r\n    return array.filter(function (elem) {\r\n        var key = keyFn(elem);\r\n        if (seen[key]) {\r\n            return false;\r\n        }\r\n        seen[key] = true;\r\n        return true;\r\n    });\r\n}\r\nexport function firstIndex(array, fn) {\r\n    for (var i = 0; i < array.length; i++) {\r\n        var element = array[i];\r\n        if (fn(element)) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\nexport function first(array, fn, notFoundValue) {\r\n    if (notFoundValue === void 0) { notFoundValue = null; }\r\n    var index = firstIndex(array, fn);\r\n    return index < 0 ? notFoundValue : array[index];\r\n}\r\nexport function flatten(arr) {\r\n    var _a;\r\n    return (_a = []).concat.apply(_a, arr);\r\n}\r\nexport function range(arg, to) {\r\n    var from = typeof to === 'number' ? arg : 0;\r\n    if (typeof to === 'number') {\r\n        from = arg;\r\n    }\r\n    else {\r\n        from = 0;\r\n        to = arg;\r\n    }\r\n    var result = [];\r\n    if (from <= to) {\r\n        for (var i = from; i < to; i++) {\r\n            result.push(i);\r\n        }\r\n    }\r\n    else {\r\n        for (var i = from; i > to; i--) {\r\n            result.push(i);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Insert `insertArr` inside `target` at `insertIndex`.\r\n * Please don't touch unless you understand https://jsperf.com/inserting-an-array-within-an-array\r\n */\r\nexport function arrayInsert(target, insertIndex, insertArr) {\r\n    var before = target.slice(0, insertIndex);\r\n    var after = target.slice(insertIndex);\r\n    return before.concat(insertArr, after);\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n/**\r\n * Represents information about a specific difference between two sequences.\r\n */\r\nvar DiffChange = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new DiffChange with the given sequence information\r\n     * and content.\r\n     */\r\n    function DiffChange(originalStart, originalLength, modifiedStart, modifiedLength) {\r\n        //Debug.Assert(originalLength > 0 || modifiedLength > 0, \"originalLength and modifiedLength cannot both be <= 0\");\r\n        this.originalStart = originalStart;\r\n        this.originalLength = originalLength;\r\n        this.modifiedStart = modifiedStart;\r\n        this.modifiedLength = modifiedLength;\r\n    }\r\n    /**\r\n     * The end point (exclusive) of the change in the original sequence.\r\n     */\r\n    DiffChange.prototype.getOriginalEnd = function () {\r\n        return this.originalStart + this.originalLength;\r\n    };\r\n    /**\r\n     * The end point (exclusive) of the change in the modified sequence.\r\n     */\r\n    DiffChange.prototype.getModifiedEnd = function () {\r\n        return this.modifiedStart + this.modifiedLength;\r\n    };\r\n    return DiffChange;\r\n}());\r\nexport { DiffChange };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { DiffChange } from './diffChange.js';\r\nfunction createStringSequence(a) {\r\n    return {\r\n        getLength: function () { return a.length; },\r\n        getElementAtIndex: function (pos) { return a.charCodeAt(pos); }\r\n    };\r\n}\r\nexport function stringDiff(original, modified, pretty) {\r\n    return new LcsDiff(createStringSequence(original), createStringSequence(modified)).ComputeDiff(pretty);\r\n}\r\n//\r\n// The code below has been ported from a C# implementation in VS\r\n//\r\nvar Debug = /** @class */ (function () {\r\n    function Debug() {\r\n    }\r\n    Debug.Assert = function (condition, message) {\r\n        if (!condition) {\r\n            throw new Error(message);\r\n        }\r\n    };\r\n    return Debug;\r\n}());\r\nexport { Debug };\r\nvar MyArray = /** @class */ (function () {\r\n    function MyArray() {\r\n    }\r\n    /**\r\n     * Copies a range of elements from an Array starting at the specified source index and pastes\r\n     * them to another Array starting at the specified destination index. The length and the indexes\r\n     * are specified as 64-bit integers.\r\n     * sourceArray:\r\n     *\t\tThe Array that contains the data to copy.\r\n     * sourceIndex:\r\n     *\t\tA 64-bit integer that represents the index in the sourceArray at which copying begins.\r\n     * destinationArray:\r\n     *\t\tThe Array that receives the data.\r\n     * destinationIndex:\r\n     *\t\tA 64-bit integer that represents the index in the destinationArray at which storing begins.\r\n     * length:\r\n     *\t\tA 64-bit integer that represents the number of elements to copy.\r\n     */\r\n    MyArray.Copy = function (sourceArray, sourceIndex, destinationArray, destinationIndex, length) {\r\n        for (var i = 0; i < length; i++) {\r\n            destinationArray[destinationIndex + i] = sourceArray[sourceIndex + i];\r\n        }\r\n    };\r\n    return MyArray;\r\n}());\r\nexport { MyArray };\r\n//*****************************************************************************\r\n// LcsDiff.cs\r\n//\r\n// An implementation of the difference algorithm described in\r\n// \"An O(ND) Difference Algorithm and its variations\" by Eugene W. Myers\r\n//\r\n// Copyright (C) 2008 Microsoft Corporation @minifier_do_not_preserve\r\n//*****************************************************************************\r\n// Our total memory usage for storing history is (worst-case):\r\n// 2 * [(MaxDifferencesHistory + 1) * (MaxDifferencesHistory + 1) - 1] * sizeof(int)\r\n// 2 * [1448*1448 - 1] * 4 = 16773624 = 16MB\r\nvar MaxDifferencesHistory = 1447;\r\n//let MaxDifferencesHistory = 100;\r\n/**\r\n * A utility class which helps to create the set of DiffChanges from\r\n * a difference operation. This class accepts original DiffElements and\r\n * modified DiffElements that are involved in a particular change. The\r\n * MarktNextChange() method can be called to mark the separation between\r\n * distinct changes. At the end, the Changes property can be called to retrieve\r\n * the constructed changes.\r\n */\r\nvar DiffChangeHelper = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new DiffChangeHelper for the given DiffSequences.\r\n     */\r\n    function DiffChangeHelper() {\r\n        this.m_changes = [];\r\n        this.m_originalStart = Number.MAX_VALUE;\r\n        this.m_modifiedStart = Number.MAX_VALUE;\r\n        this.m_originalCount = 0;\r\n        this.m_modifiedCount = 0;\r\n    }\r\n    /**\r\n     * Marks the beginning of the next change in the set of differences.\r\n     */\r\n    DiffChangeHelper.prototype.MarkNextChange = function () {\r\n        // Only add to the list if there is something to add\r\n        if (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n            // Add the new change to our list\r\n            this.m_changes.push(new DiffChange(this.m_originalStart, this.m_originalCount, this.m_modifiedStart, this.m_modifiedCount));\r\n        }\r\n        // Reset for the next change\r\n        this.m_originalCount = 0;\r\n        this.m_modifiedCount = 0;\r\n        this.m_originalStart = Number.MAX_VALUE;\r\n        this.m_modifiedStart = Number.MAX_VALUE;\r\n    };\r\n    /**\r\n     * Adds the original element at the given position to the elements\r\n     * affected by the current change. The modified index gives context\r\n     * to the change position with respect to the original sequence.\r\n     * @param originalIndex The index of the original element to add.\r\n     * @param modifiedIndex The index of the modified element that provides corresponding position in the modified sequence.\r\n     */\r\n    DiffChangeHelper.prototype.AddOriginalElement = function (originalIndex, modifiedIndex) {\r\n        // The 'true' start index is the smallest of the ones we've seen\r\n        this.m_originalStart = Math.min(this.m_originalStart, originalIndex);\r\n        this.m_modifiedStart = Math.min(this.m_modifiedStart, modifiedIndex);\r\n        this.m_originalCount++;\r\n    };\r\n    /**\r\n     * Adds the modified element at the given position to the elements\r\n     * affected by the current change. The original index gives context\r\n     * to the change position with respect to the modified sequence.\r\n     * @param originalIndex The index of the original element that provides corresponding position in the original sequence.\r\n     * @param modifiedIndex The index of the modified element to add.\r\n     */\r\n    DiffChangeHelper.prototype.AddModifiedElement = function (originalIndex, modifiedIndex) {\r\n        // The 'true' start index is the smallest of the ones we've seen\r\n        this.m_originalStart = Math.min(this.m_originalStart, originalIndex);\r\n        this.m_modifiedStart = Math.min(this.m_modifiedStart, modifiedIndex);\r\n        this.m_modifiedCount++;\r\n    };\r\n    /**\r\n     * Retrieves all of the changes marked by the class.\r\n     */\r\n    DiffChangeHelper.prototype.getChanges = function () {\r\n        if (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n            // Finish up on whatever is left\r\n            this.MarkNextChange();\r\n        }\r\n        return this.m_changes;\r\n    };\r\n    /**\r\n     * Retrieves all of the changes marked by the class in the reverse order\r\n     */\r\n    DiffChangeHelper.prototype.getReverseChanges = function () {\r\n        if (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n            // Finish up on whatever is left\r\n            this.MarkNextChange();\r\n        }\r\n        this.m_changes.reverse();\r\n        return this.m_changes;\r\n    };\r\n    return DiffChangeHelper;\r\n}());\r\n/**\r\n * An implementation of the difference algorithm described in\r\n * \"An O(ND) Difference Algorithm and its variations\" by Eugene W. Myers\r\n */\r\nvar LcsDiff = /** @class */ (function () {\r\n    /**\r\n     * Constructs the DiffFinder\r\n     */\r\n    function LcsDiff(originalSequence, newSequence, continueProcessingPredicate) {\r\n        if (continueProcessingPredicate === void 0) { continueProcessingPredicate = null; }\r\n        this.OriginalSequence = originalSequence;\r\n        this.ModifiedSequence = newSequence;\r\n        this.ContinueProcessingPredicate = continueProcessingPredicate;\r\n        this.m_forwardHistory = [];\r\n        this.m_reverseHistory = [];\r\n    }\r\n    LcsDiff.prototype.ElementsAreEqual = function (originalIndex, newIndex) {\r\n        return (this.OriginalSequence.getElementAtIndex(originalIndex) === this.ModifiedSequence.getElementAtIndex(newIndex));\r\n    };\r\n    LcsDiff.prototype.OriginalElementsAreEqual = function (index1, index2) {\r\n        return (this.OriginalSequence.getElementAtIndex(index1) === this.OriginalSequence.getElementAtIndex(index2));\r\n    };\r\n    LcsDiff.prototype.ModifiedElementsAreEqual = function (index1, index2) {\r\n        return (this.ModifiedSequence.getElementAtIndex(index1) === this.ModifiedSequence.getElementAtIndex(index2));\r\n    };\r\n    LcsDiff.prototype.ComputeDiff = function (pretty) {\r\n        return this._ComputeDiff(0, this.OriginalSequence.getLength() - 1, 0, this.ModifiedSequence.getLength() - 1, pretty);\r\n    };\r\n    /**\r\n     * Computes the differences between the original and modified input\r\n     * sequences on the bounded range.\r\n     * @returns An array of the differences between the two input sequences.\r\n     */\r\n    LcsDiff.prototype._ComputeDiff = function (originalStart, originalEnd, modifiedStart, modifiedEnd, pretty) {\r\n        var quitEarlyArr = [false];\r\n        var changes = this.ComputeDiffRecursive(originalStart, originalEnd, modifiedStart, modifiedEnd, quitEarlyArr);\r\n        if (pretty) {\r\n            // We have to clean up the computed diff to be more intuitive\r\n            // but it turns out this cannot be done correctly until the entire set\r\n            // of diffs have been computed\r\n            return this.PrettifyChanges(changes);\r\n        }\r\n        return changes;\r\n    };\r\n    /**\r\n     * Private helper method which computes the differences on the bounded range\r\n     * recursively.\r\n     * @returns An array of the differences between the two input sequences.\r\n     */\r\n    LcsDiff.prototype.ComputeDiffRecursive = function (originalStart, originalEnd, modifiedStart, modifiedEnd, quitEarlyArr) {\r\n        quitEarlyArr[0] = false;\r\n        // Find the start of the differences\r\n        while (originalStart <= originalEnd && modifiedStart <= modifiedEnd && this.ElementsAreEqual(originalStart, modifiedStart)) {\r\n            originalStart++;\r\n            modifiedStart++;\r\n        }\r\n        // Find the end of the differences\r\n        while (originalEnd >= originalStart && modifiedEnd >= modifiedStart && this.ElementsAreEqual(originalEnd, modifiedEnd)) {\r\n            originalEnd--;\r\n            modifiedEnd--;\r\n        }\r\n        // In the special case where we either have all insertions or all deletions or the sequences are identical\r\n        if (originalStart > originalEnd || modifiedStart > modifiedEnd) {\r\n            var changes = void 0;\r\n            if (modifiedStart <= modifiedEnd) {\r\n                Debug.Assert(originalStart === originalEnd + 1, 'originalStart should only be one more than originalEnd');\r\n                // All insertions\r\n                changes = [\r\n                    new DiffChange(originalStart, 0, modifiedStart, modifiedEnd - modifiedStart + 1)\r\n                ];\r\n            }\r\n            else if (originalStart <= originalEnd) {\r\n                Debug.Assert(modifiedStart === modifiedEnd + 1, 'modifiedStart should only be one more than modifiedEnd');\r\n                // All deletions\r\n                changes = [\r\n                    new DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, 0)\r\n                ];\r\n            }\r\n            else {\r\n                Debug.Assert(originalStart === originalEnd + 1, 'originalStart should only be one more than originalEnd');\r\n                Debug.Assert(modifiedStart === modifiedEnd + 1, 'modifiedStart should only be one more than modifiedEnd');\r\n                // Identical sequences - No differences\r\n                changes = [];\r\n            }\r\n            return changes;\r\n        }\r\n        // This problem can be solved using the Divide-And-Conquer technique.\r\n        var midOriginalArr = [0], midModifiedArr = [0];\r\n        var result = this.ComputeRecursionPoint(originalStart, originalEnd, modifiedStart, modifiedEnd, midOriginalArr, midModifiedArr, quitEarlyArr);\r\n        var midOriginal = midOriginalArr[0];\r\n        var midModified = midModifiedArr[0];\r\n        if (result !== null) {\r\n            // Result is not-null when there was enough memory to compute the changes while\r\n            // searching for the recursion point\r\n            return result;\r\n        }\r\n        else if (!quitEarlyArr[0]) {\r\n            // We can break the problem down recursively by finding the changes in the\r\n            // First Half:   (originalStart, modifiedStart) to (midOriginal, midModified)\r\n            // Second Half:  (midOriginal + 1, minModified + 1) to (originalEnd, modifiedEnd)\r\n            // NOTE: ComputeDiff() is inclusive, therefore the second range starts on the next point\r\n            var leftChanges = this.ComputeDiffRecursive(originalStart, midOriginal, modifiedStart, midModified, quitEarlyArr);\r\n            var rightChanges = [];\r\n            if (!quitEarlyArr[0]) {\r\n                rightChanges = this.ComputeDiffRecursive(midOriginal + 1, originalEnd, midModified + 1, modifiedEnd, quitEarlyArr);\r\n            }\r\n            else {\r\n                // We did't have time to finish the first half, so we don't have time to compute this half.\r\n                // Consider the entire rest of the sequence different.\r\n                rightChanges = [\r\n                    new DiffChange(midOriginal + 1, originalEnd - (midOriginal + 1) + 1, midModified + 1, modifiedEnd - (midModified + 1) + 1)\r\n                ];\r\n            }\r\n            return this.ConcatenateChanges(leftChanges, rightChanges);\r\n        }\r\n        // If we hit here, we quit early, and so can't return anything meaningful\r\n        return [\r\n            new DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, modifiedEnd - modifiedStart + 1)\r\n        ];\r\n    };\r\n    LcsDiff.prototype.WALKTRACE = function (diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset, diagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset, forwardPoints, reversePoints, originalIndex, originalEnd, midOriginalArr, modifiedIndex, modifiedEnd, midModifiedArr, deltaIsEven, quitEarlyArr) {\r\n        var forwardChanges = null, reverseChanges = null;\r\n        // First, walk backward through the forward diagonals history\r\n        var changeHelper = new DiffChangeHelper();\r\n        var diagonalMin = diagonalForwardStart;\r\n        var diagonalMax = diagonalForwardEnd;\r\n        var diagonalRelative = (midOriginalArr[0] - midModifiedArr[0]) - diagonalForwardOffset;\r\n        var lastOriginalIndex = Number.MIN_VALUE;\r\n        var historyIndex = this.m_forwardHistory.length - 1;\r\n        var diagonal;\r\n        do {\r\n            // Get the diagonal index from the relative diagonal number\r\n            diagonal = diagonalRelative + diagonalForwardBase;\r\n            // Figure out where we came from\r\n            if (diagonal === diagonalMin || (diagonal < diagonalMax && forwardPoints[diagonal - 1] < forwardPoints[diagonal + 1])) {\r\n                // Vertical line (the element is an insert)\r\n                originalIndex = forwardPoints[diagonal + 1];\r\n                modifiedIndex = originalIndex - diagonalRelative - diagonalForwardOffset;\r\n                if (originalIndex < lastOriginalIndex) {\r\n                    changeHelper.MarkNextChange();\r\n                }\r\n                lastOriginalIndex = originalIndex;\r\n                changeHelper.AddModifiedElement(originalIndex + 1, modifiedIndex);\r\n                diagonalRelative = (diagonal + 1) - diagonalForwardBase; //Setup for the next iteration\r\n            }\r\n            else {\r\n                // Horizontal line (the element is a deletion)\r\n                originalIndex = forwardPoints[diagonal - 1] + 1;\r\n                modifiedIndex = originalIndex - diagonalRelative - diagonalForwardOffset;\r\n                if (originalIndex < lastOriginalIndex) {\r\n                    changeHelper.MarkNextChange();\r\n                }\r\n                lastOriginalIndex = originalIndex - 1;\r\n                changeHelper.AddOriginalElement(originalIndex, modifiedIndex + 1);\r\n                diagonalRelative = (diagonal - 1) - diagonalForwardBase; //Setup for the next iteration\r\n            }\r\n            if (historyIndex >= 0) {\r\n                forwardPoints = this.m_forwardHistory[historyIndex];\r\n                diagonalForwardBase = forwardPoints[0]; //We stored this in the first spot\r\n                diagonalMin = 1;\r\n                diagonalMax = forwardPoints.length - 1;\r\n            }\r\n        } while (--historyIndex >= -1);\r\n        // Ironically, we get the forward changes as the reverse of the\r\n        // order we added them since we technically added them backwards\r\n        forwardChanges = changeHelper.getReverseChanges();\r\n        if (quitEarlyArr[0]) {\r\n            // TODO: Calculate a partial from the reverse diagonals.\r\n            //       For now, just assume everything after the midOriginal/midModified point is a diff\r\n            var originalStartPoint = midOriginalArr[0] + 1;\r\n            var modifiedStartPoint = midModifiedArr[0] + 1;\r\n            if (forwardChanges !== null && forwardChanges.length > 0) {\r\n                var lastForwardChange = forwardChanges[forwardChanges.length - 1];\r\n                originalStartPoint = Math.max(originalStartPoint, lastForwardChange.getOriginalEnd());\r\n                modifiedStartPoint = Math.max(modifiedStartPoint, lastForwardChange.getModifiedEnd());\r\n            }\r\n            reverseChanges = [\r\n                new DiffChange(originalStartPoint, originalEnd - originalStartPoint + 1, modifiedStartPoint, modifiedEnd - modifiedStartPoint + 1)\r\n            ];\r\n        }\r\n        else {\r\n            // Now walk backward through the reverse diagonals history\r\n            changeHelper = new DiffChangeHelper();\r\n            diagonalMin = diagonalReverseStart;\r\n            diagonalMax = diagonalReverseEnd;\r\n            diagonalRelative = (midOriginalArr[0] - midModifiedArr[0]) - diagonalReverseOffset;\r\n            lastOriginalIndex = Number.MAX_VALUE;\r\n            historyIndex = (deltaIsEven) ? this.m_reverseHistory.length - 1 : this.m_reverseHistory.length - 2;\r\n            do {\r\n                // Get the diagonal index from the relative diagonal number\r\n                diagonal = diagonalRelative + diagonalReverseBase;\r\n                // Figure out where we came from\r\n                if (diagonal === diagonalMin || (diagonal < diagonalMax && reversePoints[diagonal - 1] >= reversePoints[diagonal + 1])) {\r\n                    // Horizontal line (the element is a deletion))\r\n                    originalIndex = reversePoints[diagonal + 1] - 1;\r\n                    modifiedIndex = originalIndex - diagonalRelative - diagonalReverseOffset;\r\n                    if (originalIndex > lastOriginalIndex) {\r\n                        changeHelper.MarkNextChange();\r\n                    }\r\n                    lastOriginalIndex = originalIndex + 1;\r\n                    changeHelper.AddOriginalElement(originalIndex + 1, modifiedIndex + 1);\r\n                    diagonalRelative = (diagonal + 1) - diagonalReverseBase; //Setup for the next iteration\r\n                }\r\n                else {\r\n                    // Vertical line (the element is an insertion)\r\n                    originalIndex = reversePoints[diagonal - 1];\r\n                    modifiedIndex = originalIndex - diagonalRelative - diagonalReverseOffset;\r\n                    if (originalIndex > lastOriginalIndex) {\r\n                        changeHelper.MarkNextChange();\r\n                    }\r\n                    lastOriginalIndex = originalIndex;\r\n                    changeHelper.AddModifiedElement(originalIndex + 1, modifiedIndex + 1);\r\n                    diagonalRelative = (diagonal - 1) - diagonalReverseBase; //Setup for the next iteration\r\n                }\r\n                if (historyIndex >= 0) {\r\n                    reversePoints = this.m_reverseHistory[historyIndex];\r\n                    diagonalReverseBase = reversePoints[0]; //We stored this in the first spot\r\n                    diagonalMin = 1;\r\n                    diagonalMax = reversePoints.length - 1;\r\n                }\r\n            } while (--historyIndex >= -1);\r\n            // There are cases where the reverse history will find diffs that\r\n            // are correct, but not intuitive, so we need shift them.\r\n            reverseChanges = changeHelper.getChanges();\r\n        }\r\n        return this.ConcatenateChanges(forwardChanges, reverseChanges);\r\n    };\r\n    /**\r\n     * Given the range to compute the diff on, this method finds the point:\r\n     * (midOriginal, midModified)\r\n     * that exists in the middle of the LCS of the two sequences and\r\n     * is the point at which the LCS problem may be broken down recursively.\r\n     * This method will try to keep the LCS trace in memory. If the LCS recursion\r\n     * point is calculated and the full trace is available in memory, then this method\r\n     * will return the change list.\r\n     * @param originalStart The start bound of the original sequence range\r\n     * @param originalEnd The end bound of the original sequence range\r\n     * @param modifiedStart The start bound of the modified sequence range\r\n     * @param modifiedEnd The end bound of the modified sequence range\r\n     * @param midOriginal The middle point of the original sequence range\r\n     * @param midModified The middle point of the modified sequence range\r\n     * @returns The diff changes, if available, otherwise null\r\n     */\r\n    LcsDiff.prototype.ComputeRecursionPoint = function (originalStart, originalEnd, modifiedStart, modifiedEnd, midOriginalArr, midModifiedArr, quitEarlyArr) {\r\n        var originalIndex = 0, modifiedIndex = 0;\r\n        var diagonalForwardStart = 0, diagonalForwardEnd = 0;\r\n        var diagonalReverseStart = 0, diagonalReverseEnd = 0;\r\n        var numDifferences;\r\n        // To traverse the edit graph and produce the proper LCS, our actual\r\n        // start position is just outside the given boundary\r\n        originalStart--;\r\n        modifiedStart--;\r\n        // We set these up to make the compiler happy, but they will\r\n        // be replaced before we return with the actual recursion point\r\n        midOriginalArr[0] = 0;\r\n        midModifiedArr[0] = 0;\r\n        // Clear out the history\r\n        this.m_forwardHistory = [];\r\n        this.m_reverseHistory = [];\r\n        // Each cell in the two arrays corresponds to a diagonal in the edit graph.\r\n        // The integer value in the cell represents the originalIndex of the furthest\r\n        // reaching point found so far that ends in that diagonal.\r\n        // The modifiedIndex can be computed mathematically from the originalIndex and the diagonal number.\r\n        var maxDifferences = (originalEnd - originalStart) + (modifiedEnd - modifiedStart);\r\n        var numDiagonals = maxDifferences + 1;\r\n        var forwardPoints = new Array(numDiagonals);\r\n        var reversePoints = new Array(numDiagonals);\r\n        // diagonalForwardBase: Index into forwardPoints of the diagonal which passes through (originalStart, modifiedStart)\r\n        // diagonalReverseBase: Index into reversePoints of the diagonal which passes through (originalEnd, modifiedEnd)\r\n        var diagonalForwardBase = (modifiedEnd - modifiedStart);\r\n        var diagonalReverseBase = (originalEnd - originalStart);\r\n        // diagonalForwardOffset: Geometric offset which allows modifiedIndex to be computed from originalIndex and the\r\n        //    diagonal number (relative to diagonalForwardBase)\r\n        // diagonalReverseOffset: Geometric offset which allows modifiedIndex to be computed from originalIndex and the\r\n        //    diagonal number (relative to diagonalReverseBase)\r\n        var diagonalForwardOffset = (originalStart - modifiedStart);\r\n        var diagonalReverseOffset = (originalEnd - modifiedEnd);\r\n        // delta: The difference between the end diagonal and the start diagonal. This is used to relate diagonal numbers\r\n        //   relative to the start diagonal with diagonal numbers relative to the end diagonal.\r\n        // The Even/Oddn-ness of this delta is important for determining when we should check for overlap\r\n        var delta = diagonalReverseBase - diagonalForwardBase;\r\n        var deltaIsEven = (delta % 2 === 0);\r\n        // Here we set up the start and end points as the furthest points found so far\r\n        // in both the forward and reverse directions, respectively\r\n        forwardPoints[diagonalForwardBase] = originalStart;\r\n        reversePoints[diagonalReverseBase] = originalEnd;\r\n        // Remember if we quit early, and thus need to do a best-effort result instead of a real result.\r\n        quitEarlyArr[0] = false;\r\n        // A couple of points:\r\n        // --With this method, we iterate on the number of differences between the two sequences.\r\n        //   The more differences there actually are, the longer this will take.\r\n        // --Also, as the number of differences increases, we have to search on diagonals further\r\n        //   away from the reference diagonal (which is diagonalForwardBase for forward, diagonalReverseBase for reverse).\r\n        // --We extend on even diagonals (relative to the reference diagonal) only when numDifferences\r\n        //   is even and odd diagonals only when numDifferences is odd.\r\n        var diagonal, tempOriginalIndex;\r\n        for (numDifferences = 1; numDifferences <= (maxDifferences / 2) + 1; numDifferences++) {\r\n            var furthestOriginalIndex = 0;\r\n            var furthestModifiedIndex = 0;\r\n            // Run the algorithm in the forward direction\r\n            diagonalForwardStart = this.ClipDiagonalBound(diagonalForwardBase - numDifferences, numDifferences, diagonalForwardBase, numDiagonals);\r\n            diagonalForwardEnd = this.ClipDiagonalBound(diagonalForwardBase + numDifferences, numDifferences, diagonalForwardBase, numDiagonals);\r\n            for (diagonal = diagonalForwardStart; diagonal <= diagonalForwardEnd; diagonal += 2) {\r\n                // STEP 1: We extend the furthest reaching point in the present diagonal\r\n                // by looking at the diagonals above and below and picking the one whose point\r\n                // is further away from the start point (originalStart, modifiedStart)\r\n                if (diagonal === diagonalForwardStart || (diagonal < diagonalForwardEnd && forwardPoints[diagonal - 1] < forwardPoints[diagonal + 1])) {\r\n                    originalIndex = forwardPoints[diagonal + 1];\r\n                }\r\n                else {\r\n                    originalIndex = forwardPoints[diagonal - 1] + 1;\r\n                }\r\n                modifiedIndex = originalIndex - (diagonal - diagonalForwardBase) - diagonalForwardOffset;\r\n                // Save the current originalIndex so we can test for false overlap in step 3\r\n                tempOriginalIndex = originalIndex;\r\n                // STEP 2: We can continue to extend the furthest reaching point in the present diagonal\r\n                // so long as the elements are equal.\r\n                while (originalIndex < originalEnd && modifiedIndex < modifiedEnd && this.ElementsAreEqual(originalIndex + 1, modifiedIndex + 1)) {\r\n                    originalIndex++;\r\n                    modifiedIndex++;\r\n                }\r\n                forwardPoints[diagonal] = originalIndex;\r\n                if (originalIndex + modifiedIndex > furthestOriginalIndex + furthestModifiedIndex) {\r\n                    furthestOriginalIndex = originalIndex;\r\n                    furthestModifiedIndex = modifiedIndex;\r\n                }\r\n                // STEP 3: If delta is odd (overlap first happens on forward when delta is odd)\r\n                // and diagonal is in the range of reverse diagonals computed for numDifferences-1\r\n                // (the previous iteration; we haven't computed reverse diagonals for numDifferences yet)\r\n                // then check for overlap.\r\n                if (!deltaIsEven && Math.abs(diagonal - diagonalReverseBase) <= (numDifferences - 1)) {\r\n                    if (originalIndex >= reversePoints[diagonal]) {\r\n                        midOriginalArr[0] = originalIndex;\r\n                        midModifiedArr[0] = modifiedIndex;\r\n                        if (tempOriginalIndex <= reversePoints[diagonal] && MaxDifferencesHistory > 0 && numDifferences <= (MaxDifferencesHistory + 1)) {\r\n                            // BINGO! We overlapped, and we have the full trace in memory!\r\n                            return this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset, diagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset, forwardPoints, reversePoints, originalIndex, originalEnd, midOriginalArr, modifiedIndex, modifiedEnd, midModifiedArr, deltaIsEven, quitEarlyArr);\r\n                        }\r\n                        else {\r\n                            // Either false overlap, or we didn't have enough memory for the full trace\r\n                            // Just return the recursion point\r\n                            return null;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Check to see if we should be quitting early, before moving on to the next iteration.\r\n            var matchLengthOfLongest = ((furthestOriginalIndex - originalStart) + (furthestModifiedIndex - modifiedStart) - numDifferences) / 2;\r\n            if (this.ContinueProcessingPredicate !== null && !this.ContinueProcessingPredicate(furthestOriginalIndex, this.OriginalSequence, matchLengthOfLongest)) {\r\n                // We can't finish, so skip ahead to generating a result from what we have.\r\n                quitEarlyArr[0] = true;\r\n                // Use the furthest distance we got in the forward direction.\r\n                midOriginalArr[0] = furthestOriginalIndex;\r\n                midModifiedArr[0] = furthestModifiedIndex;\r\n                if (matchLengthOfLongest > 0 && MaxDifferencesHistory > 0 && numDifferences <= (MaxDifferencesHistory + 1)) {\r\n                    // Enough of the history is in memory to walk it backwards\r\n                    return this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset, diagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset, forwardPoints, reversePoints, originalIndex, originalEnd, midOriginalArr, modifiedIndex, modifiedEnd, midModifiedArr, deltaIsEven, quitEarlyArr);\r\n                }\r\n                else {\r\n                    // We didn't actually remember enough of the history.\r\n                    //Since we are quiting the diff early, we need to shift back the originalStart and modified start\r\n                    //back into the boundary limits since we decremented their value above beyond the boundary limit.\r\n                    originalStart++;\r\n                    modifiedStart++;\r\n                    return [\r\n                        new DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, modifiedEnd - modifiedStart + 1)\r\n                    ];\r\n                }\r\n            }\r\n            // Run the algorithm in the reverse direction\r\n            diagonalReverseStart = this.ClipDiagonalBound(diagonalReverseBase - numDifferences, numDifferences, diagonalReverseBase, numDiagonals);\r\n            diagonalReverseEnd = this.ClipDiagonalBound(diagonalReverseBase + numDifferences, numDifferences, diagonalReverseBase, numDiagonals);\r\n            for (diagonal = diagonalReverseStart; diagonal <= diagonalReverseEnd; diagonal += 2) {\r\n                // STEP 1: We extend the furthest reaching point in the present diagonal\r\n                // by looking at the diagonals above and below and picking the one whose point\r\n                // is further away from the start point (originalEnd, modifiedEnd)\r\n                if (diagonal === diagonalReverseStart || (diagonal < diagonalReverseEnd && reversePoints[diagonal - 1] >= reversePoints[diagonal + 1])) {\r\n                    originalIndex = reversePoints[diagonal + 1] - 1;\r\n                }\r\n                else {\r\n                    originalIndex = reversePoints[diagonal - 1];\r\n                }\r\n                modifiedIndex = originalIndex - (diagonal - diagonalReverseBase) - diagonalReverseOffset;\r\n                // Save the current originalIndex so we can test for false overlap\r\n                tempOriginalIndex = originalIndex;\r\n                // STEP 2: We can continue to extend the furthest reaching point in the present diagonal\r\n                // as long as the elements are equal.\r\n                while (originalIndex > originalStart && modifiedIndex > modifiedStart && this.ElementsAreEqual(originalIndex, modifiedIndex)) {\r\n                    originalIndex--;\r\n                    modifiedIndex--;\r\n                }\r\n                reversePoints[diagonal] = originalIndex;\r\n                // STEP 4: If delta is even (overlap first happens on reverse when delta is even)\r\n                // and diagonal is in the range of forward diagonals computed for numDifferences\r\n                // then check for overlap.\r\n                if (deltaIsEven && Math.abs(diagonal - diagonalForwardBase) <= numDifferences) {\r\n                    if (originalIndex <= forwardPoints[diagonal]) {\r\n                        midOriginalArr[0] = originalIndex;\r\n                        midModifiedArr[0] = modifiedIndex;\r\n                        if (tempOriginalIndex >= forwardPoints[diagonal] && MaxDifferencesHistory > 0 && numDifferences <= (MaxDifferencesHistory + 1)) {\r\n                            // BINGO! We overlapped, and we have the full trace in memory!\r\n                            return this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset, diagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset, forwardPoints, reversePoints, originalIndex, originalEnd, midOriginalArr, modifiedIndex, modifiedEnd, midModifiedArr, deltaIsEven, quitEarlyArr);\r\n                        }\r\n                        else {\r\n                            // Either false overlap, or we didn't have enough memory for the full trace\r\n                            // Just return the recursion point\r\n                            return null;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Save current vectors to history before the next iteration\r\n            if (numDifferences <= MaxDifferencesHistory) {\r\n                // We are allocating space for one extra int, which we fill with\r\n                // the index of the diagonal base index\r\n                var temp = new Array(diagonalForwardEnd - diagonalForwardStart + 2);\r\n                temp[0] = diagonalForwardBase - diagonalForwardStart + 1;\r\n                MyArray.Copy(forwardPoints, diagonalForwardStart, temp, 1, diagonalForwardEnd - diagonalForwardStart + 1);\r\n                this.m_forwardHistory.push(temp);\r\n                temp = new Array(diagonalReverseEnd - diagonalReverseStart + 2);\r\n                temp[0] = diagonalReverseBase - diagonalReverseStart + 1;\r\n                MyArray.Copy(reversePoints, diagonalReverseStart, temp, 1, diagonalReverseEnd - diagonalReverseStart + 1);\r\n                this.m_reverseHistory.push(temp);\r\n            }\r\n        }\r\n        // If we got here, then we have the full trace in history. We just have to convert it to a change list\r\n        // NOTE: This part is a bit messy\r\n        return this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset, diagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset, forwardPoints, reversePoints, originalIndex, originalEnd, midOriginalArr, modifiedIndex, modifiedEnd, midModifiedArr, deltaIsEven, quitEarlyArr);\r\n    };\r\n    /**\r\n     * Shifts the given changes to provide a more intuitive diff.\r\n     * While the first element in a diff matches the first element after the diff,\r\n     * we shift the diff down.\r\n     *\r\n     * @param changes The list of changes to shift\r\n     * @returns The shifted changes\r\n     */\r\n    LcsDiff.prototype.PrettifyChanges = function (changes) {\r\n        // Shift all the changes down first\r\n        for (var i = 0; i < changes.length; i++) {\r\n            var change = changes[i];\r\n            var originalStop = (i < changes.length - 1) ? changes[i + 1].originalStart : this.OriginalSequence.getLength();\r\n            var modifiedStop = (i < changes.length - 1) ? changes[i + 1].modifiedStart : this.ModifiedSequence.getLength();\r\n            var checkOriginal = change.originalLength > 0;\r\n            var checkModified = change.modifiedLength > 0;\r\n            while (change.originalStart + change.originalLength < originalStop &&\r\n                change.modifiedStart + change.modifiedLength < modifiedStop &&\r\n                (!checkOriginal || this.OriginalElementsAreEqual(change.originalStart, change.originalStart + change.originalLength)) &&\r\n                (!checkModified || this.ModifiedElementsAreEqual(change.modifiedStart, change.modifiedStart + change.modifiedLength))) {\r\n                change.originalStart++;\r\n                change.modifiedStart++;\r\n            }\r\n            var mergedChangeArr = [null];\r\n            if (i < changes.length - 1 && this.ChangesOverlap(changes[i], changes[i + 1], mergedChangeArr)) {\r\n                changes[i] = mergedChangeArr[0];\r\n                changes.splice(i + 1, 1);\r\n                i--;\r\n                continue;\r\n            }\r\n        }\r\n        // Shift changes back up until we hit empty or whitespace-only lines\r\n        for (var i = changes.length - 1; i >= 0; i--) {\r\n            var change = changes[i];\r\n            var originalStop = 0;\r\n            var modifiedStop = 0;\r\n            if (i > 0) {\r\n                var prevChange = changes[i - 1];\r\n                if (prevChange.originalLength > 0) {\r\n                    originalStop = prevChange.originalStart + prevChange.originalLength;\r\n                }\r\n                if (prevChange.modifiedLength > 0) {\r\n                    modifiedStop = prevChange.modifiedStart + prevChange.modifiedLength;\r\n                }\r\n            }\r\n            var checkOriginal = change.originalLength > 0;\r\n            var checkModified = change.modifiedLength > 0;\r\n            var bestDelta = 0;\r\n            var bestScore = this._boundaryScore(change.originalStart, change.originalLength, change.modifiedStart, change.modifiedLength);\r\n            for (var delta = 1;; delta++) {\r\n                var originalStart = change.originalStart - delta;\r\n                var modifiedStart = change.modifiedStart - delta;\r\n                if (originalStart < originalStop || modifiedStart < modifiedStop) {\r\n                    break;\r\n                }\r\n                if (checkOriginal && !this.OriginalElementsAreEqual(originalStart, originalStart + change.originalLength)) {\r\n                    break;\r\n                }\r\n                if (checkModified && !this.ModifiedElementsAreEqual(modifiedStart, modifiedStart + change.modifiedLength)) {\r\n                    break;\r\n                }\r\n                var score = this._boundaryScore(originalStart, change.originalLength, modifiedStart, change.modifiedLength);\r\n                if (score > bestScore) {\r\n                    bestScore = score;\r\n                    bestDelta = delta;\r\n                }\r\n            }\r\n            change.originalStart -= bestDelta;\r\n            change.modifiedStart -= bestDelta;\r\n        }\r\n        return changes;\r\n    };\r\n    LcsDiff.prototype._OriginalIsBoundary = function (index) {\r\n        if (index <= 0 || index >= this.OriginalSequence.getLength() - 1) {\r\n            return true;\r\n        }\r\n        var element = this.OriginalSequence.getElementAtIndex(index);\r\n        return (typeof element === 'string' && /^\\s*$/.test(element));\r\n    };\r\n    LcsDiff.prototype._OriginalRegionIsBoundary = function (originalStart, originalLength) {\r\n        if (this._OriginalIsBoundary(originalStart) || this._OriginalIsBoundary(originalStart - 1)) {\r\n            return true;\r\n        }\r\n        if (originalLength > 0) {\r\n            var originalEnd = originalStart + originalLength;\r\n            if (this._OriginalIsBoundary(originalEnd - 1) || this._OriginalIsBoundary(originalEnd)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    LcsDiff.prototype._ModifiedIsBoundary = function (index) {\r\n        if (index <= 0 || index >= this.ModifiedSequence.getLength() - 1) {\r\n            return true;\r\n        }\r\n        var element = this.ModifiedSequence.getElementAtIndex(index);\r\n        return (typeof element === 'string' && /^\\s*$/.test(element));\r\n    };\r\n    LcsDiff.prototype._ModifiedRegionIsBoundary = function (modifiedStart, modifiedLength) {\r\n        if (this._ModifiedIsBoundary(modifiedStart) || this._ModifiedIsBoundary(modifiedStart - 1)) {\r\n            return true;\r\n        }\r\n        if (modifiedLength > 0) {\r\n            var modifiedEnd = modifiedStart + modifiedLength;\r\n            if (this._ModifiedIsBoundary(modifiedEnd - 1) || this._ModifiedIsBoundary(modifiedEnd)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    LcsDiff.prototype._boundaryScore = function (originalStart, originalLength, modifiedStart, modifiedLength) {\r\n        var originalScore = (this._OriginalRegionIsBoundary(originalStart, originalLength) ? 1 : 0);\r\n        var modifiedScore = (this._ModifiedRegionIsBoundary(modifiedStart, modifiedLength) ? 1 : 0);\r\n        return (originalScore + modifiedScore);\r\n    };\r\n    /**\r\n     * Concatenates the two input DiffChange lists and returns the resulting\r\n     * list.\r\n     * @param The left changes\r\n     * @param The right changes\r\n     * @returns The concatenated list\r\n     */\r\n    LcsDiff.prototype.ConcatenateChanges = function (left, right) {\r\n        var mergedChangeArr = [];\r\n        if (left.length === 0 || right.length === 0) {\r\n            return (right.length > 0) ? right : left;\r\n        }\r\n        else if (this.ChangesOverlap(left[left.length - 1], right[0], mergedChangeArr)) {\r\n            // Since we break the problem down recursively, it is possible that we\r\n            // might recurse in the middle of a change thereby splitting it into\r\n            // two changes. Here in the combining stage, we detect and fuse those\r\n            // changes back together\r\n            var result = new Array(left.length + right.length - 1);\r\n            MyArray.Copy(left, 0, result, 0, left.length - 1);\r\n            result[left.length - 1] = mergedChangeArr[0];\r\n            MyArray.Copy(right, 1, result, left.length, right.length - 1);\r\n            return result;\r\n        }\r\n        else {\r\n            var result = new Array(left.length + right.length);\r\n            MyArray.Copy(left, 0, result, 0, left.length);\r\n            MyArray.Copy(right, 0, result, left.length, right.length);\r\n            return result;\r\n        }\r\n    };\r\n    /**\r\n     * Returns true if the two changes overlap and can be merged into a single\r\n     * change\r\n     * @param left The left change\r\n     * @param right The right change\r\n     * @param mergedChange The merged change if the two overlap, null otherwise\r\n     * @returns True if the two changes overlap\r\n     */\r\n    LcsDiff.prototype.ChangesOverlap = function (left, right, mergedChangeArr) {\r\n        Debug.Assert(left.originalStart <= right.originalStart, 'Left change is not less than or equal to right change');\r\n        Debug.Assert(left.modifiedStart <= right.modifiedStart, 'Left change is not less than or equal to right change');\r\n        if (left.originalStart + left.originalLength >= right.originalStart || left.modifiedStart + left.modifiedLength >= right.modifiedStart) {\r\n            var originalStart = left.originalStart;\r\n            var originalLength = left.originalLength;\r\n            var modifiedStart = left.modifiedStart;\r\n            var modifiedLength = left.modifiedLength;\r\n            if (left.originalStart + left.originalLength >= right.originalStart) {\r\n                originalLength = right.originalStart + right.originalLength - left.originalStart;\r\n            }\r\n            if (left.modifiedStart + left.modifiedLength >= right.modifiedStart) {\r\n                modifiedLength = right.modifiedStart + right.modifiedLength - left.modifiedStart;\r\n            }\r\n            mergedChangeArr[0] = new DiffChange(originalStart, originalLength, modifiedStart, modifiedLength);\r\n            return true;\r\n        }\r\n        else {\r\n            mergedChangeArr[0] = null;\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * Helper method used to clip a diagonal index to the range of valid\r\n     * diagonals. This also decides whether or not the diagonal index,\r\n     * if it exceeds the boundary, should be clipped to the boundary or clipped\r\n     * one inside the boundary depending on the Even/Odd status of the boundary\r\n     * and numDifferences.\r\n     * @param diagonal The index of the diagonal to clip.\r\n     * @param numDifferences The current number of differences being iterated upon.\r\n     * @param diagonalBaseIndex The base reference diagonal.\r\n     * @param numDiagonals The total number of diagonals.\r\n     * @returns The clipped diagonal index.\r\n     */\r\n    LcsDiff.prototype.ClipDiagonalBound = function (diagonal, numDifferences, diagonalBaseIndex, numDiagonals) {\r\n        if (diagonal >= 0 && diagonal < numDiagonals) {\r\n            // Nothing to clip, its in range\r\n            return diagonal;\r\n        }\r\n        // diagonalsBelow: The number of diagonals below the reference diagonal\r\n        // diagonalsAbove: The number of diagonals above the reference diagonal\r\n        var diagonalsBelow = diagonalBaseIndex;\r\n        var diagonalsAbove = numDiagonals - diagonalBaseIndex - 1;\r\n        var diffEven = (numDifferences % 2 === 0);\r\n        if (diagonal < 0) {\r\n            var lowerBoundEven = (diagonalsBelow % 2 === 0);\r\n            return (diffEven === lowerBoundEven) ? 0 : 1;\r\n        }\r\n        else {\r\n            var upperBoundEven = (diagonalsAbove % 2 === 0);\r\n            return (diffEven === upperBoundEven) ? numDiagonals - 1 : numDiagonals - 2;\r\n        }\r\n    };\r\n    return LcsDiff;\r\n}());\r\nexport { LcsDiff };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar _a;\r\nimport { isWindows } from './platform.js';\r\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\r\nvar _singleSlashStart = /^\\//;\r\nvar _doubleSlashStart = /^\\/\\//;\r\nvar _throwOnMissingSchema = true;\r\nfunction _validateUri(ret) {\r\n    // scheme, must be set\r\n    if (!ret.scheme) {\r\n        if (_throwOnMissingSchema) {\r\n            throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\r\n        }\r\n        else {\r\n            console.warn(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\r\n        }\r\n    }\r\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\r\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\r\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\r\n        throw new Error('[UriError]: Scheme contains illegal characters.');\r\n    }\r\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\r\n    // If a URI contains an authority component, then the path component\r\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\r\n    // does not contain an authority component, then the path cannot begin\r\n    // with two slash characters (\"//\").\r\n    if (ret.path) {\r\n        if (ret.authority) {\r\n            if (!_singleSlashStart.test(ret.path)) {\r\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\r\n            }\r\n        }\r\n        else {\r\n            if (_doubleSlashStart.test(ret.path)) {\r\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\r\n            }\r\n        }\r\n    }\r\n}\r\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\r\nfunction _referenceResolution(scheme, path) {\r\n    // the slash-character is our 'default base' as we don't\r\n    // support constructing URIs relative to other URIs. This\r\n    // also means that we alter and potentially break paths.\r\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\r\n    switch (scheme) {\r\n        case 'https':\r\n        case 'http':\r\n        case 'file':\r\n            if (!path) {\r\n                path = _slash;\r\n            }\r\n            else if (path[0] !== _slash) {\r\n                path = _slash + path;\r\n            }\r\n            break;\r\n    }\r\n    return path;\r\n}\r\nvar _empty = '';\r\nvar _slash = '/';\r\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\r\n/**\r\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\r\n * This class is a simple parser which creates the basic component parts\r\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\r\n * and encoding.\r\n *\r\n *       foo://example.com:8042/over/there?name=ferret#nose\r\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\r\n *        |           |            |            |        |\r\n *     scheme     authority       path        query   fragment\r\n *        |   _____________________|__\r\n *       / \\ /                        \\\r\n *       urn:example:animal:ferret:nose\r\n */\r\nvar URI = /** @class */ (function () {\r\n    /**\r\n     * @internal\r\n     */\r\n    function URI(schemeOrData, authority, path, query, fragment) {\r\n        if (typeof schemeOrData === 'object') {\r\n            this.scheme = schemeOrData.scheme || _empty;\r\n            this.authority = schemeOrData.authority || _empty;\r\n            this.path = schemeOrData.path || _empty;\r\n            this.query = schemeOrData.query || _empty;\r\n            this.fragment = schemeOrData.fragment || _empty;\r\n            // no validation because it's this URI\r\n            // that creates uri components.\r\n            // _validateUri(this);\r\n        }\r\n        else {\r\n            this.scheme = schemeOrData || _empty;\r\n            this.authority = authority || _empty;\r\n            this.path = _referenceResolution(this.scheme, path || _empty);\r\n            this.query = query || _empty;\r\n            this.fragment = fragment || _empty;\r\n            _validateUri(this);\r\n        }\r\n    }\r\n    URI.isUri = function (thing) {\r\n        if (thing instanceof URI) {\r\n            return true;\r\n        }\r\n        if (!thing) {\r\n            return false;\r\n        }\r\n        return typeof thing.authority === 'string'\r\n            && typeof thing.fragment === 'string'\r\n            && typeof thing.path === 'string'\r\n            && typeof thing.query === 'string'\r\n            && typeof thing.scheme === 'string';\r\n    };\r\n    Object.defineProperty(URI.prototype, \"fsPath\", {\r\n        // ---- filesystem path -----------------------\r\n        /**\r\n         * Returns a string representing the corresponding file system path of this URI.\r\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\r\n         * platform specific path separator.\r\n         *\r\n         * * Will *not* validate the path for invalid characters and semantics.\r\n         * * Will *not* look at the scheme of this URI.\r\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\r\n         *\r\n         *\r\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\r\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\r\n         *\r\n         * ```ts\r\n            const u = URI.parse('file://server/c$/folder/file.txt')\r\n            u.authority === 'server'\r\n            u.path === '/shares/c$/file.txt'\r\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\r\n        ```\r\n         *\r\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\r\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\r\n         * with URIs that represent files on disk (`file` scheme).\r\n         */\r\n        get: function () {\r\n            // if (this.scheme !== 'file') {\r\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\r\n            // }\r\n            return _makeFsPath(this);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    // ---- modify to new -------------------------\r\n    URI.prototype.with = function (change) {\r\n        if (!change) {\r\n            return this;\r\n        }\r\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\r\n        if (scheme === void 0) {\r\n            scheme = this.scheme;\r\n        }\r\n        else if (scheme === null) {\r\n            scheme = _empty;\r\n        }\r\n        if (authority === void 0) {\r\n            authority = this.authority;\r\n        }\r\n        else if (authority === null) {\r\n            authority = _empty;\r\n        }\r\n        if (path === void 0) {\r\n            path = this.path;\r\n        }\r\n        else if (path === null) {\r\n            path = _empty;\r\n        }\r\n        if (query === void 0) {\r\n            query = this.query;\r\n        }\r\n        else if (query === null) {\r\n            query = _empty;\r\n        }\r\n        if (fragment === void 0) {\r\n            fragment = this.fragment;\r\n        }\r\n        else if (fragment === null) {\r\n            fragment = _empty;\r\n        }\r\n        if (scheme === this.scheme\r\n            && authority === this.authority\r\n            && path === this.path\r\n            && query === this.query\r\n            && fragment === this.fragment) {\r\n            return this;\r\n        }\r\n        return new _URI(scheme, authority, path, query, fragment);\r\n    };\r\n    // ---- parse & validate ------------------------\r\n    /**\r\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\r\n     * `file:///usr/home`, or `scheme:with/path`.\r\n     *\r\n     * @param value A string which represents an URI (see `URI#toString`).\r\n     */\r\n    URI.parse = function (value) {\r\n        var match = _regexp.exec(value);\r\n        if (!match) {\r\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\r\n        }\r\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty));\r\n    };\r\n    /**\r\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\r\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\r\n     *\r\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\r\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\r\n     * `URI.parse('file://' + path)` because the path might contain characters that are\r\n     * interpreted (# and ?). See the following sample:\r\n     * ```ts\r\n    const good = URI.file('/coding/c#/project1');\r\n    good.scheme === 'file';\r\n    good.path === '/coding/c#/project1';\r\n    good.fragment === '';\r\n    const bad = URI.parse('file://' + '/coding/c#/project1');\r\n    bad.scheme === 'file';\r\n    bad.path === '/coding/c'; // path is now broken\r\n    bad.fragment === '/project1';\r\n    ```\r\n     *\r\n     * @param path A file system path (see `URI#fsPath`)\r\n     */\r\n    URI.file = function (path) {\r\n        var authority = _empty;\r\n        // normalize to fwd-slashes on windows,\r\n        // on other systems bwd-slashes are valid\r\n        // filename character, eg /f\\oo/ba\\r.txt\r\n        if (isWindows) {\r\n            path = path.replace(/\\\\/g, _slash);\r\n        }\r\n        // check for authority as used in UNC shares\r\n        // or use the path as given\r\n        if (path[0] === _slash && path[1] === _slash) {\r\n            var idx = path.indexOf(_slash, 2);\r\n            if (idx === -1) {\r\n                authority = path.substring(2);\r\n                path = _slash;\r\n            }\r\n            else {\r\n                authority = path.substring(2, idx);\r\n                path = path.substring(idx) || _slash;\r\n            }\r\n        }\r\n        return new _URI('file', authority, path, _empty, _empty);\r\n    };\r\n    URI.from = function (components) {\r\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\r\n    };\r\n    // ---- printing/externalize ---------------------------\r\n    /**\r\n     * Creates a string presentation for this URI. It's guaranteed that calling\r\n     * `URI.parse` with the result of this function creates an URI which is equal\r\n     * to this URI.\r\n     *\r\n     * * The result shall *not* be used for display purposes but for externalization or transport.\r\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\r\n     * ignore the scheme-specific encoding rules.\r\n     *\r\n     * @param skipEncoding Do not encode the result, default is `false`\r\n     */\r\n    URI.prototype.toString = function (skipEncoding) {\r\n        if (skipEncoding === void 0) { skipEncoding = false; }\r\n        return _asFormatted(this, skipEncoding);\r\n    };\r\n    URI.prototype.toJSON = function () {\r\n        return this;\r\n    };\r\n    URI.revive = function (data) {\r\n        if (!data) {\r\n            return data;\r\n        }\r\n        else if (data instanceof URI) {\r\n            return data;\r\n        }\r\n        else {\r\n            var result = new _URI(data);\r\n            result._fsPath = data.fsPath;\r\n            result._formatted = data.external;\r\n            return result;\r\n        }\r\n    };\r\n    return URI;\r\n}());\r\nexport { URI };\r\n// tslint:disable-next-line:class-name\r\nvar _URI = /** @class */ (function (_super) {\r\n    __extends(_URI, _super);\r\n    function _URI() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._formatted = null;\r\n        _this._fsPath = null;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\r\n        get: function () {\r\n            if (!this._fsPath) {\r\n                this._fsPath = _makeFsPath(this);\r\n            }\r\n            return this._fsPath;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    _URI.prototype.toString = function (skipEncoding) {\r\n        if (skipEncoding === void 0) { skipEncoding = false; }\r\n        if (!skipEncoding) {\r\n            if (!this._formatted) {\r\n                this._formatted = _asFormatted(this, false);\r\n            }\r\n            return this._formatted;\r\n        }\r\n        else {\r\n            // we don't cache that\r\n            return _asFormatted(this, true);\r\n        }\r\n    };\r\n    _URI.prototype.toJSON = function () {\r\n        var res = {\r\n            $mid: 1\r\n        };\r\n        // cached state\r\n        if (this._fsPath) {\r\n            res.fsPath = this._fsPath;\r\n        }\r\n        if (this._formatted) {\r\n            res.external = this._formatted;\r\n        }\r\n        // uri components\r\n        if (this.path) {\r\n            res.path = this.path;\r\n        }\r\n        if (this.scheme) {\r\n            res.scheme = this.scheme;\r\n        }\r\n        if (this.authority) {\r\n            res.authority = this.authority;\r\n        }\r\n        if (this.query) {\r\n            res.query = this.query;\r\n        }\r\n        if (this.fragment) {\r\n            res.fragment = this.fragment;\r\n        }\r\n        return res;\r\n    };\r\n    return _URI;\r\n}(URI));\r\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\r\nvar encodeTable = (_a = {},\r\n    _a[58 /* Colon */] = '%3A',\r\n    _a[47 /* Slash */] = '%2F',\r\n    _a[63 /* QuestionMark */] = '%3F',\r\n    _a[35 /* Hash */] = '%23',\r\n    _a[91 /* OpenSquareBracket */] = '%5B',\r\n    _a[93 /* CloseSquareBracket */] = '%5D',\r\n    _a[64 /* AtSign */] = '%40',\r\n    _a[33 /* ExclamationMark */] = '%21',\r\n    _a[36 /* DollarSign */] = '%24',\r\n    _a[38 /* Ampersand */] = '%26',\r\n    _a[39 /* SingleQuote */] = '%27',\r\n    _a[40 /* OpenParen */] = '%28',\r\n    _a[41 /* CloseParen */] = '%29',\r\n    _a[42 /* Asterisk */] = '%2A',\r\n    _a[43 /* Plus */] = '%2B',\r\n    _a[44 /* Comma */] = '%2C',\r\n    _a[59 /* Semicolon */] = '%3B',\r\n    _a[61 /* Equals */] = '%3D',\r\n    _a[32 /* Space */] = '%20',\r\n    _a);\r\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\r\n    var res = undefined;\r\n    var nativeEncodePos = -1;\r\n    for (var pos = 0; pos < uriComponent.length; pos++) {\r\n        var code = uriComponent.charCodeAt(pos);\r\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\r\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\r\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\r\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\r\n            || code === 45 /* Dash */\r\n            || code === 46 /* Period */\r\n            || code === 95 /* Underline */\r\n            || code === 126 /* Tilde */\r\n            || (allowSlash && code === 47 /* Slash */)) {\r\n            // check if we are delaying native encode\r\n            if (nativeEncodePos !== -1) {\r\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\r\n                nativeEncodePos = -1;\r\n            }\r\n            // check if we write into a new string (by default we try to return the param)\r\n            if (res !== undefined) {\r\n                res += uriComponent.charAt(pos);\r\n            }\r\n        }\r\n        else {\r\n            // encoding needed, we need to allocate a new string\r\n            if (res === undefined) {\r\n                res = uriComponent.substr(0, pos);\r\n            }\r\n            // check with default table first\r\n            var escaped = encodeTable[code];\r\n            if (escaped !== undefined) {\r\n                // check if we are delaying native encode\r\n                if (nativeEncodePos !== -1) {\r\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\r\n                    nativeEncodePos = -1;\r\n                }\r\n                // append escaped variant to result\r\n                res += escaped;\r\n            }\r\n            else if (nativeEncodePos === -1) {\r\n                // use native encode only when needed\r\n                nativeEncodePos = pos;\r\n            }\r\n        }\r\n    }\r\n    if (nativeEncodePos !== -1) {\r\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\r\n    }\r\n    return res !== undefined ? res : uriComponent;\r\n}\r\nfunction encodeURIComponentMinimal(path) {\r\n    var res = undefined;\r\n    for (var pos = 0; pos < path.length; pos++) {\r\n        var code = path.charCodeAt(pos);\r\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\r\n            if (res === undefined) {\r\n                res = path.substr(0, pos);\r\n            }\r\n            res += encodeTable[code];\r\n        }\r\n        else {\r\n            if (res !== undefined) {\r\n                res += path[pos];\r\n            }\r\n        }\r\n    }\r\n    return res !== undefined ? res : path;\r\n}\r\n/**\r\n * Compute `fsPath` for the given uri\r\n * @param uri\r\n */\r\nfunction _makeFsPath(uri) {\r\n    var value;\r\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\r\n        // unc path: file://shares/c$/far/boo\r\n        value = \"//\" + uri.authority + uri.path;\r\n    }\r\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\r\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\r\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\r\n        // windows drive letter: file:///c:/far/boo\r\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\r\n    }\r\n    else {\r\n        // other path\r\n        value = uri.path;\r\n    }\r\n    if (isWindows) {\r\n        value = value.replace(/\\//g, '\\\\');\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Create the external version of a uri\r\n */\r\nfunction _asFormatted(uri, skipEncoding) {\r\n    var encoder = !skipEncoding\r\n        ? encodeURIComponentFast\r\n        : encodeURIComponentMinimal;\r\n    var res = '';\r\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\r\n    if (scheme) {\r\n        res += scheme;\r\n        res += ':';\r\n    }\r\n    if (authority || scheme === 'file') {\r\n        res += _slash;\r\n        res += _slash;\r\n    }\r\n    if (authority) {\r\n        var idx = authority.indexOf('@');\r\n        if (idx !== -1) {\r\n            // <user>@<auth>\r\n            var userinfo = authority.substr(0, idx);\r\n            authority = authority.substr(idx + 1);\r\n            idx = userinfo.indexOf(':');\r\n            if (idx === -1) {\r\n                res += encoder(userinfo, false);\r\n            }\r\n            else {\r\n                // <user>:<pass>@<auth>\r\n                res += encoder(userinfo.substr(0, idx), false);\r\n                res += ':';\r\n                res += encoder(userinfo.substr(idx + 1), false);\r\n            }\r\n            res += '@';\r\n        }\r\n        authority = authority.toLowerCase();\r\n        idx = authority.indexOf(':');\r\n        if (idx === -1) {\r\n            res += encoder(authority, false);\r\n        }\r\n        else {\r\n            // <auth>:<port>\r\n            res += encoder(authority.substr(0, idx), false);\r\n            res += authority.substr(idx);\r\n        }\r\n    }\r\n    if (path) {\r\n        // lower-case windows drive letters in /C:/fff or C:/fff\r\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\r\n            var code = path.charCodeAt(1);\r\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\r\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\r\n            }\r\n        }\r\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\r\n            var code = path.charCodeAt(0);\r\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\r\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\r\n            }\r\n        }\r\n        // encode the rest of the path\r\n        res += encoder(path, true);\r\n    }\r\n    if (query) {\r\n        res += '?';\r\n        res += encoder(query, false);\r\n    }\r\n    if (fragment) {\r\n        res += '#';\r\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\r\n    }\r\n    return res;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n/**\r\n * A position in the editor.\r\n */\r\nvar Position = /** @class */ (function () {\r\n    function Position(lineNumber, column) {\r\n        this.lineNumber = lineNumber;\r\n        this.column = column;\r\n    }\r\n    /**\r\n     * Create a new postion from this position.\r\n     *\r\n     * @param newLineNumber new line number\r\n     * @param newColumn new column\r\n     */\r\n    Position.prototype.with = function (newLineNumber, newColumn) {\r\n        if (newLineNumber === void 0) { newLineNumber = this.lineNumber; }\r\n        if (newColumn === void 0) { newColumn = this.column; }\r\n        if (newLineNumber === this.lineNumber && newColumn === this.column) {\r\n            return this;\r\n        }\r\n        else {\r\n            return new Position(newLineNumber, newColumn);\r\n        }\r\n    };\r\n    /**\r\n     * Derive a new position from this position.\r\n     *\r\n     * @param deltaLineNumber line number delta\r\n     * @param deltaColumn column delta\r\n     */\r\n    Position.prototype.delta = function (deltaLineNumber, deltaColumn) {\r\n        if (deltaLineNumber === void 0) { deltaLineNumber = 0; }\r\n        if (deltaColumn === void 0) { deltaColumn = 0; }\r\n        return this.with(this.lineNumber + deltaLineNumber, this.column + deltaColumn);\r\n    };\r\n    /**\r\n     * Test if this position equals other position\r\n     */\r\n    Position.prototype.equals = function (other) {\r\n        return Position.equals(this, other);\r\n    };\r\n    /**\r\n     * Test if position `a` equals position `b`\r\n     */\r\n    Position.equals = function (a, b) {\r\n        if (!a && !b) {\r\n            return true;\r\n        }\r\n        return (!!a &&\r\n            !!b &&\r\n            a.lineNumber === b.lineNumber &&\r\n            a.column === b.column);\r\n    };\r\n    /**\r\n     * Test if this position is before other position.\r\n     * If the two positions are equal, the result will be false.\r\n     */\r\n    Position.prototype.isBefore = function (other) {\r\n        return Position.isBefore(this, other);\r\n    };\r\n    /**\r\n     * Test if position `a` is before position `b`.\r\n     * If the two positions are equal, the result will be false.\r\n     */\r\n    Position.isBefore = function (a, b) {\r\n        if (a.lineNumber < b.lineNumber) {\r\n            return true;\r\n        }\r\n        if (b.lineNumber < a.lineNumber) {\r\n            return false;\r\n        }\r\n        return a.column < b.column;\r\n    };\r\n    /**\r\n     * Test if this position is before other position.\r\n     * If the two positions are equal, the result will be true.\r\n     */\r\n    Position.prototype.isBeforeOrEqual = function (other) {\r\n        return Position.isBeforeOrEqual(this, other);\r\n    };\r\n    /**\r\n     * Test if position `a` is before position `b`.\r\n     * If the two positions are equal, the result will be true.\r\n     */\r\n    Position.isBeforeOrEqual = function (a, b) {\r\n        if (a.lineNumber < b.lineNumber) {\r\n            return true;\r\n        }\r\n        if (b.lineNumber < a.lineNumber) {\r\n            return false;\r\n        }\r\n        return a.column <= b.column;\r\n    };\r\n    /**\r\n     * A function that compares positions, useful for sorting\r\n     */\r\n    Position.compare = function (a, b) {\r\n        var aLineNumber = a.lineNumber | 0;\r\n        var bLineNumber = b.lineNumber | 0;\r\n        if (aLineNumber === bLineNumber) {\r\n            var aColumn = a.column | 0;\r\n            var bColumn = b.column | 0;\r\n            return aColumn - bColumn;\r\n        }\r\n        return aLineNumber - bLineNumber;\r\n    };\r\n    /**\r\n     * Clone this position.\r\n     */\r\n    Position.prototype.clone = function () {\r\n        return new Position(this.lineNumber, this.column);\r\n    };\r\n    /**\r\n     * Convert to a human-readable representation.\r\n     */\r\n    Position.prototype.toString = function () {\r\n        return '(' + this.lineNumber + ',' + this.column + ')';\r\n    };\r\n    // ---\r\n    /**\r\n     * Create a `Position` from an `IPosition`.\r\n     */\r\n    Position.lift = function (pos) {\r\n        return new Position(pos.lineNumber, pos.column);\r\n    };\r\n    /**\r\n     * Test if `obj` is an `IPosition`.\r\n     */\r\n    Position.isIPosition = function (obj) {\r\n        return (obj\r\n            && (typeof obj.lineNumber === 'number')\r\n            && (typeof obj.column === 'number'));\r\n    };\r\n    return Position;\r\n}());\r\nexport { Position };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Position } from './position.js';\r\n/**\r\n * A range in the editor. (startLineNumber,startColumn) is <= (endLineNumber,endColumn)\r\n */\r\nvar Range = /** @class */ (function () {\r\n    function Range(startLineNumber, startColumn, endLineNumber, endColumn) {\r\n        if ((startLineNumber > endLineNumber) || (startLineNumber === endLineNumber && startColumn > endColumn)) {\r\n            this.startLineNumber = endLineNumber;\r\n            this.startColumn = endColumn;\r\n            this.endLineNumber = startLineNumber;\r\n            this.endColumn = startColumn;\r\n        }\r\n        else {\r\n            this.startLineNumber = startLineNumber;\r\n            this.startColumn = startColumn;\r\n            this.endLineNumber = endLineNumber;\r\n            this.endColumn = endColumn;\r\n        }\r\n    }\r\n    /**\r\n     * Test if this range is empty.\r\n     */\r\n    Range.prototype.isEmpty = function () {\r\n        return Range.isEmpty(this);\r\n    };\r\n    /**\r\n     * Test if `range` is empty.\r\n     */\r\n    Range.isEmpty = function (range) {\r\n        return (range.startLineNumber === range.endLineNumber && range.startColumn === range.endColumn);\r\n    };\r\n    /**\r\n     * Test if position is in this range. If the position is at the edges, will return true.\r\n     */\r\n    Range.prototype.containsPosition = function (position) {\r\n        return Range.containsPosition(this, position);\r\n    };\r\n    /**\r\n     * Test if `position` is in `range`. If the position is at the edges, will return true.\r\n     */\r\n    Range.containsPosition = function (range, position) {\r\n        if (position.lineNumber < range.startLineNumber || position.lineNumber > range.endLineNumber) {\r\n            return false;\r\n        }\r\n        if (position.lineNumber === range.startLineNumber && position.column < range.startColumn) {\r\n            return false;\r\n        }\r\n        if (position.lineNumber === range.endLineNumber && position.column > range.endColumn) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Test if range is in this range. If the range is equal to this range, will return true.\r\n     */\r\n    Range.prototype.containsRange = function (range) {\r\n        return Range.containsRange(this, range);\r\n    };\r\n    /**\r\n     * Test if `otherRange` is in `range`. If the ranges are equal, will return true.\r\n     */\r\n    Range.containsRange = function (range, otherRange) {\r\n        if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\r\n            return false;\r\n        }\r\n        if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\r\n            return false;\r\n        }\r\n        if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn < range.startColumn) {\r\n            return false;\r\n        }\r\n        if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn > range.endColumn) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * A reunion of the two ranges.\r\n     * The smallest position will be used as the start point, and the largest one as the end point.\r\n     */\r\n    Range.prototype.plusRange = function (range) {\r\n        return Range.plusRange(this, range);\r\n    };\r\n    /**\r\n     * A reunion of the two ranges.\r\n     * The smallest position will be used as the start point, and the largest one as the end point.\r\n     */\r\n    Range.plusRange = function (a, b) {\r\n        var startLineNumber;\r\n        var startColumn;\r\n        var endLineNumber;\r\n        var endColumn;\r\n        if (b.startLineNumber < a.startLineNumber) {\r\n            startLineNumber = b.startLineNumber;\r\n            startColumn = b.startColumn;\r\n        }\r\n        else if (b.startLineNumber === a.startLineNumber) {\r\n            startLineNumber = b.startLineNumber;\r\n            startColumn = Math.min(b.startColumn, a.startColumn);\r\n        }\r\n        else {\r\n            startLineNumber = a.startLineNumber;\r\n            startColumn = a.startColumn;\r\n        }\r\n        if (b.endLineNumber > a.endLineNumber) {\r\n            endLineNumber = b.endLineNumber;\r\n            endColumn = b.endColumn;\r\n        }\r\n        else if (b.endLineNumber === a.endLineNumber) {\r\n            endLineNumber = b.endLineNumber;\r\n            endColumn = Math.max(b.endColumn, a.endColumn);\r\n        }\r\n        else {\r\n            endLineNumber = a.endLineNumber;\r\n            endColumn = a.endColumn;\r\n        }\r\n        return new Range(startLineNumber, startColumn, endLineNumber, endColumn);\r\n    };\r\n    /**\r\n     * A intersection of the two ranges.\r\n     */\r\n    Range.prototype.intersectRanges = function (range) {\r\n        return Range.intersectRanges(this, range);\r\n    };\r\n    /**\r\n     * A intersection of the two ranges.\r\n     */\r\n    Range.intersectRanges = function (a, b) {\r\n        var resultStartLineNumber = a.startLineNumber;\r\n        var resultStartColumn = a.startColumn;\r\n        var resultEndLineNumber = a.endLineNumber;\r\n        var resultEndColumn = a.endColumn;\r\n        var otherStartLineNumber = b.startLineNumber;\r\n        var otherStartColumn = b.startColumn;\r\n        var otherEndLineNumber = b.endLineNumber;\r\n        var otherEndColumn = b.endColumn;\r\n        if (resultStartLineNumber < otherStartLineNumber) {\r\n            resultStartLineNumber = otherStartLineNumber;\r\n            resultStartColumn = otherStartColumn;\r\n        }\r\n        else if (resultStartLineNumber === otherStartLineNumber) {\r\n            resultStartColumn = Math.max(resultStartColumn, otherStartColumn);\r\n        }\r\n        if (resultEndLineNumber > otherEndLineNumber) {\r\n            resultEndLineNumber = otherEndLineNumber;\r\n            resultEndColumn = otherEndColumn;\r\n        }\r\n        else if (resultEndLineNumber === otherEndLineNumber) {\r\n            resultEndColumn = Math.min(resultEndColumn, otherEndColumn);\r\n        }\r\n        // Check if selection is now empty\r\n        if (resultStartLineNumber > resultEndLineNumber) {\r\n            return null;\r\n        }\r\n        if (resultStartLineNumber === resultEndLineNumber && resultStartColumn > resultEndColumn) {\r\n            return null;\r\n        }\r\n        return new Range(resultStartLineNumber, resultStartColumn, resultEndLineNumber, resultEndColumn);\r\n    };\r\n    /**\r\n     * Test if this range equals other.\r\n     */\r\n    Range.prototype.equalsRange = function (other) {\r\n        return Range.equalsRange(this, other);\r\n    };\r\n    /**\r\n     * Test if range `a` equals `b`.\r\n     */\r\n    Range.equalsRange = function (a, b) {\r\n        return (!!a &&\r\n            !!b &&\r\n            a.startLineNumber === b.startLineNumber &&\r\n            a.startColumn === b.startColumn &&\r\n            a.endLineNumber === b.endLineNumber &&\r\n            a.endColumn === b.endColumn);\r\n    };\r\n    /**\r\n     * Return the end position (which will be after or equal to the start position)\r\n     */\r\n    Range.prototype.getEndPosition = function () {\r\n        return new Position(this.endLineNumber, this.endColumn);\r\n    };\r\n    /**\r\n     * Return the start position (which will be before or equal to the end position)\r\n     */\r\n    Range.prototype.getStartPosition = function () {\r\n        return new Position(this.startLineNumber, this.startColumn);\r\n    };\r\n    /**\r\n     * Transform to a user presentable string representation.\r\n     */\r\n    Range.prototype.toString = function () {\r\n        return '[' + this.startLineNumber + ',' + this.startColumn + ' -> ' + this.endLineNumber + ',' + this.endColumn + ']';\r\n    };\r\n    /**\r\n     * Create a new range using this range's start position, and using endLineNumber and endColumn as the end position.\r\n     */\r\n    Range.prototype.setEndPosition = function (endLineNumber, endColumn) {\r\n        return new Range(this.startLineNumber, this.startColumn, endLineNumber, endColumn);\r\n    };\r\n    /**\r\n     * Create a new range using this range's end position, and using startLineNumber and startColumn as the start position.\r\n     */\r\n    Range.prototype.setStartPosition = function (startLineNumber, startColumn) {\r\n        return new Range(startLineNumber, startColumn, this.endLineNumber, this.endColumn);\r\n    };\r\n    /**\r\n     * Create a new empty range using this range's start position.\r\n     */\r\n    Range.prototype.collapseToStart = function () {\r\n        return Range.collapseToStart(this);\r\n    };\r\n    /**\r\n     * Create a new empty range using this range's start position.\r\n     */\r\n    Range.collapseToStart = function (range) {\r\n        return new Range(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\r\n    };\r\n    // ---\r\n    Range.fromPositions = function (start, end) {\r\n        if (end === void 0) { end = start; }\r\n        return new Range(start.lineNumber, start.column, end.lineNumber, end.column);\r\n    };\r\n    Range.lift = function (range) {\r\n        if (!range) {\r\n            return null;\r\n        }\r\n        return new Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\r\n    };\r\n    /**\r\n     * Test if `obj` is an `IRange`.\r\n     */\r\n    Range.isIRange = function (obj) {\r\n        return (obj\r\n            && (typeof obj.startLineNumber === 'number')\r\n            && (typeof obj.startColumn === 'number')\r\n            && (typeof obj.endLineNumber === 'number')\r\n            && (typeof obj.endColumn === 'number'));\r\n    };\r\n    /**\r\n     * Test if the two ranges are touching in any way.\r\n     */\r\n    Range.areIntersectingOrTouching = function (a, b) {\r\n        // Check if `a` is before `b`\r\n        if (a.endLineNumber < b.startLineNumber || (a.endLineNumber === b.startLineNumber && a.endColumn < b.startColumn)) {\r\n            return false;\r\n        }\r\n        // Check if `b` is before `a`\r\n        if (b.endLineNumber < a.startLineNumber || (b.endLineNumber === a.startLineNumber && b.endColumn < a.startColumn)) {\r\n            return false;\r\n        }\r\n        // These ranges must intersect\r\n        return true;\r\n    };\r\n    /**\r\n     * Test if the two ranges are intersecting. If the ranges are touching it returns true.\r\n     */\r\n    Range.areIntersecting = function (a, b) {\r\n        // Check if `a` is before `b`\r\n        if (a.endLineNumber < b.startLineNumber || (a.endLineNumber === b.startLineNumber && a.endColumn <= b.startColumn)) {\r\n            return false;\r\n        }\r\n        // Check if `b` is before `a`\r\n        if (b.endLineNumber < a.startLineNumber || (b.endLineNumber === a.startLineNumber && b.endColumn <= a.startColumn)) {\r\n            return false;\r\n        }\r\n        // These ranges must intersect\r\n        return true;\r\n    };\r\n    /**\r\n     * A function that compares ranges, useful for sorting ranges\r\n     * It will first compare ranges on the startPosition and then on the endPosition\r\n     */\r\n    Range.compareRangesUsingStarts = function (a, b) {\r\n        if (a && b) {\r\n            var aStartLineNumber = a.startLineNumber | 0;\r\n            var bStartLineNumber = b.startLineNumber | 0;\r\n            if (aStartLineNumber === bStartLineNumber) {\r\n                var aStartColumn = a.startColumn | 0;\r\n                var bStartColumn = b.startColumn | 0;\r\n                if (aStartColumn === bStartColumn) {\r\n                    var aEndLineNumber = a.endLineNumber | 0;\r\n                    var bEndLineNumber = b.endLineNumber | 0;\r\n                    if (aEndLineNumber === bEndLineNumber) {\r\n                        var aEndColumn = a.endColumn | 0;\r\n                        var bEndColumn = b.endColumn | 0;\r\n                        return aEndColumn - bEndColumn;\r\n                    }\r\n                    return aEndLineNumber - bEndLineNumber;\r\n                }\r\n                return aStartColumn - bStartColumn;\r\n            }\r\n            return aStartLineNumber - bStartLineNumber;\r\n        }\r\n        var aExists = (a ? 1 : 0);\r\n        var bExists = (b ? 1 : 0);\r\n        return aExists - bExists;\r\n    };\r\n    /**\r\n     * A function that compares ranges, useful for sorting ranges\r\n     * It will first compare ranges on the endPosition and then on the startPosition\r\n     */\r\n    Range.compareRangesUsingEnds = function (a, b) {\r\n        if (a.endLineNumber === b.endLineNumber) {\r\n            if (a.endColumn === b.endColumn) {\r\n                if (a.startLineNumber === b.startLineNumber) {\r\n                    return a.startColumn - b.startColumn;\r\n                }\r\n                return a.startLineNumber - b.startLineNumber;\r\n            }\r\n            return a.endColumn - b.endColumn;\r\n        }\r\n        return a.endLineNumber - b.endLineNumber;\r\n    };\r\n    /**\r\n     * Test if the range spans multiple lines.\r\n     */\r\n    Range.spansMultipleLines = function (range) {\r\n        return range.endLineNumber > range.startLineNumber;\r\n    };\r\n    return Range;\r\n}());\r\nexport { Range };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n/**\r\n * The empty string.\r\n */\r\nexport var empty = '';\r\nexport function isFalsyOrWhitespace(str) {\r\n    if (!str || typeof str !== 'string') {\r\n        return true;\r\n    }\r\n    return str.trim().length === 0;\r\n}\r\n/**\r\n * @returns the provided number with the given number of preceding zeros.\r\n */\r\nexport function pad(n, l, char) {\r\n    if (char === void 0) { char = '0'; }\r\n    var str = '' + n;\r\n    var r = [str];\r\n    for (var i = str.length; i < l; i++) {\r\n        r.push(char);\r\n    }\r\n    return r.reverse().join('');\r\n}\r\nvar _formatRegexp = /{(\\d+)}/g;\r\n/**\r\n * Helper to produce a string with a variable number of arguments. Insert variable segments\r\n * into the string using the {n} notation where N is the index of the argument following the string.\r\n * @param value string to which formatting is applied\r\n * @param args replacements for {n}-entries\r\n */\r\nexport function format(value) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    if (args.length === 0) {\r\n        return value;\r\n    }\r\n    return value.replace(_formatRegexp, function (match, group) {\r\n        var idx = parseInt(group, 10);\r\n        return isNaN(idx) || idx < 0 || idx >= args.length ?\r\n            match :\r\n            args[idx];\r\n    });\r\n}\r\n/**\r\n * Converts HTML characters inside the string to use entities instead. Makes the string safe from\r\n * being used e.g. in HTMLElement.innerHTML.\r\n */\r\nexport function escape(html) {\r\n    return html.replace(/[<|>|&]/g, function (match) {\r\n        switch (match) {\r\n            case '<': return '&lt;';\r\n            case '>': return '&gt;';\r\n            case '&': return '&amp;';\r\n            default: return match;\r\n        }\r\n    });\r\n}\r\n/**\r\n * Escapes regular expression characters in a given string\r\n */\r\nexport function escapeRegExpCharacters(value) {\r\n    return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)\\#]/g, '\\\\$&');\r\n}\r\n/**\r\n * Removes all occurrences of needle from the beginning and end of haystack.\r\n * @param haystack string to trim\r\n * @param needle the thing to trim (default is a blank)\r\n */\r\nexport function trim(haystack, needle) {\r\n    if (needle === void 0) { needle = ' '; }\r\n    var trimmed = ltrim(haystack, needle);\r\n    return rtrim(trimmed, needle);\r\n}\r\n/**\r\n * Removes all occurrences of needle from the beginning of haystack.\r\n * @param haystack string to trim\r\n * @param needle the thing to trim\r\n */\r\nexport function ltrim(haystack, needle) {\r\n    if (!haystack || !needle) {\r\n        return haystack;\r\n    }\r\n    var needleLen = needle.length;\r\n    if (needleLen === 0 || haystack.length === 0) {\r\n        return haystack;\r\n    }\r\n    var offset = 0;\r\n    while (haystack.indexOf(needle, offset) === offset) {\r\n        offset = offset + needleLen;\r\n    }\r\n    return haystack.substring(offset);\r\n}\r\n/**\r\n * Removes all occurrences of needle from the end of haystack.\r\n * @param haystack string to trim\r\n * @param needle the thing to trim\r\n */\r\nexport function rtrim(haystack, needle) {\r\n    if (!haystack || !needle) {\r\n        return haystack;\r\n    }\r\n    var needleLen = needle.length, haystackLen = haystack.length;\r\n    if (needleLen === 0 || haystackLen === 0) {\r\n        return haystack;\r\n    }\r\n    var offset = haystackLen, idx = -1;\r\n    while (true) {\r\n        idx = haystack.lastIndexOf(needle, offset - 1);\r\n        if (idx === -1 || idx + needleLen !== offset) {\r\n            break;\r\n        }\r\n        if (idx === 0) {\r\n            return '';\r\n        }\r\n        offset = idx;\r\n    }\r\n    return haystack.substring(0, offset);\r\n}\r\nexport function convertSimple2RegExpPattern(pattern) {\r\n    return pattern.replace(/[\\-\\\\\\{\\}\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&').replace(/[\\*]/g, '.*');\r\n}\r\n/**\r\n * Determines if haystack starts with needle.\r\n */\r\nexport function startsWith(haystack, needle) {\r\n    if (haystack.length < needle.length) {\r\n        return false;\r\n    }\r\n    if (haystack === needle) {\r\n        return true;\r\n    }\r\n    for (var i = 0; i < needle.length; i++) {\r\n        if (haystack[i] !== needle[i]) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Determines if haystack ends with needle.\r\n */\r\nexport function endsWith(haystack, needle) {\r\n    var diff = haystack.length - needle.length;\r\n    if (diff > 0) {\r\n        return haystack.indexOf(needle, diff) === diff;\r\n    }\r\n    else if (diff === 0) {\r\n        return haystack === needle;\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\nexport function createRegExp(searchString, isRegex, options) {\r\n    if (options === void 0) { options = {}; }\r\n    if (!searchString) {\r\n        throw new Error('Cannot create regex from empty string');\r\n    }\r\n    if (!isRegex) {\r\n        searchString = escapeRegExpCharacters(searchString);\r\n    }\r\n    if (options.wholeWord) {\r\n        if (!/\\B/.test(searchString.charAt(0))) {\r\n            searchString = '\\\\b' + searchString;\r\n        }\r\n        if (!/\\B/.test(searchString.charAt(searchString.length - 1))) {\r\n            searchString = searchString + '\\\\b';\r\n        }\r\n    }\r\n    var modifiers = '';\r\n    if (options.global) {\r\n        modifiers += 'g';\r\n    }\r\n    if (!options.matchCase) {\r\n        modifiers += 'i';\r\n    }\r\n    if (options.multiline) {\r\n        modifiers += 'm';\r\n    }\r\n    return new RegExp(searchString, modifiers);\r\n}\r\nexport function regExpLeadsToEndlessLoop(regexp) {\r\n    // Exit early if it's one of these special cases which are meant to match\r\n    // against an empty string\r\n    if (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\r\n        return false;\r\n    }\r\n    // We check against an empty string. If the regular expression doesn't advance\r\n    // (e.g. ends in an endless loop) it will match an empty string.\r\n    var match = regexp.exec('');\r\n    return !!(match && regexp.lastIndex === 0);\r\n}\r\n/**\r\n * Returns first index of the string that is not whitespace.\r\n * If string is empty or contains only whitespaces, returns -1\r\n */\r\nexport function firstNonWhitespaceIndex(str) {\r\n    for (var i = 0, len = str.length; i < len; i++) {\r\n        var chCode = str.charCodeAt(i);\r\n        if (chCode !== 32 /* Space */ && chCode !== 9 /* Tab */) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Returns the leading whitespace of the string.\r\n * If the string contains only whitespaces, returns entire string\r\n */\r\nexport function getLeadingWhitespace(str, start, end) {\r\n    if (start === void 0) { start = 0; }\r\n    if (end === void 0) { end = str.length; }\r\n    for (var i = start; i < end; i++) {\r\n        var chCode = str.charCodeAt(i);\r\n        if (chCode !== 32 /* Space */ && chCode !== 9 /* Tab */) {\r\n            return str.substring(start, i);\r\n        }\r\n    }\r\n    return str.substring(start, end);\r\n}\r\n/**\r\n * Returns last index of the string that is not whitespace.\r\n * If string is empty or contains only whitespaces, returns -1\r\n */\r\nexport function lastNonWhitespaceIndex(str, startIndex) {\r\n    if (startIndex === void 0) { startIndex = str.length - 1; }\r\n    for (var i = startIndex; i >= 0; i--) {\r\n        var chCode = str.charCodeAt(i);\r\n        if (chCode !== 32 /* Space */ && chCode !== 9 /* Tab */) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\nexport function compare(a, b) {\r\n    if (a < b) {\r\n        return -1;\r\n    }\r\n    else if (a > b) {\r\n        return 1;\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\nexport function isLowerAsciiLetter(code) {\r\n    return code >= 97 /* a */ && code <= 122 /* z */;\r\n}\r\nexport function isUpperAsciiLetter(code) {\r\n    return code >= 65 /* A */ && code <= 90 /* Z */;\r\n}\r\nfunction isAsciiLetter(code) {\r\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\r\n}\r\nexport function equalsIgnoreCase(a, b) {\r\n    var len1 = a ? a.length : 0;\r\n    var len2 = b ? b.length : 0;\r\n    if (len1 !== len2) {\r\n        return false;\r\n    }\r\n    return doEqualsIgnoreCase(a, b);\r\n}\r\nfunction doEqualsIgnoreCase(a, b, stopAt) {\r\n    if (stopAt === void 0) { stopAt = a.length; }\r\n    if (typeof a !== 'string' || typeof b !== 'string') {\r\n        return false;\r\n    }\r\n    for (var i = 0; i < stopAt; i++) {\r\n        var codeA = a.charCodeAt(i);\r\n        var codeB = b.charCodeAt(i);\r\n        if (codeA === codeB) {\r\n            continue;\r\n        }\r\n        // a-z A-Z\r\n        if (isAsciiLetter(codeA) && isAsciiLetter(codeB)) {\r\n            var diff = Math.abs(codeA - codeB);\r\n            if (diff !== 0 && diff !== 32) {\r\n                return false;\r\n            }\r\n        }\r\n        // Any other charcode\r\n        else {\r\n            if (String.fromCharCode(codeA).toLowerCase() !== String.fromCharCode(codeB).toLowerCase()) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexport function startsWithIgnoreCase(str, candidate) {\r\n    var candidateLength = candidate.length;\r\n    if (candidate.length > str.length) {\r\n        return false;\r\n    }\r\n    return doEqualsIgnoreCase(str, candidate, candidateLength);\r\n}\r\n/**\r\n * @returns the length of the common prefix of the two strings.\r\n */\r\nexport function commonPrefixLength(a, b) {\r\n    var i, len = Math.min(a.length, b.length);\r\n    for (i = 0; i < len; i++) {\r\n        if (a.charCodeAt(i) !== b.charCodeAt(i)) {\r\n            return i;\r\n        }\r\n    }\r\n    return len;\r\n}\r\n/**\r\n * @returns the length of the common suffix of the two strings.\r\n */\r\nexport function commonSuffixLength(a, b) {\r\n    var i, len = Math.min(a.length, b.length);\r\n    var aLastIndex = a.length - 1;\r\n    var bLastIndex = b.length - 1;\r\n    for (i = 0; i < len; i++) {\r\n        if (a.charCodeAt(aLastIndex - i) !== b.charCodeAt(bLastIndex - i)) {\r\n            return i;\r\n        }\r\n    }\r\n    return len;\r\n}\r\n// --- unicode\r\n// http://en.wikipedia.org/wiki/Surrogate_pair\r\n// Returns the code point starting at a specified index in a string\r\n// Code points U+0000 to U+D7FF and U+E000 to U+FFFF are represented on a single character\r\n// Code points U+10000 to U+10FFFF are represented on two consecutive characters\r\n//export function getUnicodePoint(str:string, index:number, len:number):number {\r\n//\tlet chrCode = str.charCodeAt(index);\r\n//\tif (0xD800 <= chrCode && chrCode <= 0xDBFF && index + 1 < len) {\r\n//\t\tlet nextChrCode = str.charCodeAt(index + 1);\r\n//\t\tif (0xDC00 <= nextChrCode && nextChrCode <= 0xDFFF) {\r\n//\t\t\treturn (chrCode - 0xD800) << 10 + (nextChrCode - 0xDC00) + 0x10000;\r\n//\t\t}\r\n//\t}\r\n//\treturn chrCode;\r\n//}\r\nexport function isHighSurrogate(charCode) {\r\n    return (0xD800 <= charCode && charCode <= 0xDBFF);\r\n}\r\nexport function isLowSurrogate(charCode) {\r\n    return (0xDC00 <= charCode && charCode <= 0xDFFF);\r\n}\r\n/**\r\n * Generated using https://github.com/alexandrudima/unicode-utils/blob/master/generate-rtl-test.js\r\n */\r\nvar CONTAINS_RTL = /(?:[\\u05BE\\u05C0\\u05C3\\u05C6\\u05D0-\\u05F4\\u0608\\u060B\\u060D\\u061B-\\u064A\\u066D-\\u066F\\u0671-\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1-\\u07EA\\u07F4\\u07F5\\u07FA-\\u0815\\u081A\\u0824\\u0828\\u0830-\\u0858\\u085E-\\u08BD\\u200F\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFD3D\\uFD50-\\uFDFC\\uFE70-\\uFEFC]|\\uD802[\\uDC00-\\uDD1B\\uDD20-\\uDE00\\uDE10-\\uDE33\\uDE40-\\uDEE4\\uDEEB-\\uDF35\\uDF40-\\uDFFF]|\\uD803[\\uDC00-\\uDCFF]|\\uD83A[\\uDC00-\\uDCCF\\uDD00-\\uDD43\\uDD50-\\uDFFF]|\\uD83B[\\uDC00-\\uDEBB])/;\r\n/**\r\n * Returns true if `str` contains any Unicode character that is classified as \"R\" or \"AL\".\r\n */\r\nexport function containsRTL(str) {\r\n    return CONTAINS_RTL.test(str);\r\n}\r\n/**\r\n * Generated using https://github.com/alexandrudima/unicode-utils/blob/master/generate-emoji-test.js\r\n */\r\nvar CONTAINS_EMOJI = /(?:[\\u231A\\u231B\\u23F0\\u23F3\\u2600-\\u27BF\\u2B50\\u2B55]|\\uD83C[\\uDDE6-\\uDDFF\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F\\uDE80-\\uDEF8]|\\uD83E[\\uDD00-\\uDDE6])/;\r\nexport function containsEmoji(str) {\r\n    return CONTAINS_EMOJI.test(str);\r\n}\r\nvar IS_BASIC_ASCII = /^[\\t\\n\\r\\x20-\\x7E]*$/;\r\n/**\r\n * Returns true if `str` contains only basic ASCII characters in the range 32 - 126 (including 32 and 126) or \\n, \\r, \\t\r\n */\r\nexport function isBasicASCII(str) {\r\n    return IS_BASIC_ASCII.test(str);\r\n}\r\nexport function containsFullWidthCharacter(str) {\r\n    for (var i = 0, len = str.length; i < len; i++) {\r\n        if (isFullWidthCharacter(str.charCodeAt(i))) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function isFullWidthCharacter(charCode) {\r\n    // Do a cheap trick to better support wrapping of wide characters, treat them as 2 columns\r\n    // http://jrgraphix.net/research/unicode_blocks.php\r\n    //          2E80 — 2EFF   CJK Radicals Supplement\r\n    //          2F00 — 2FDF   Kangxi Radicals\r\n    //          2FF0 — 2FFF   Ideographic Description Characters\r\n    //          3000 — 303F   CJK Symbols and Punctuation\r\n    //          3040 — 309F   Hiragana\r\n    //          30A0 — 30FF   Katakana\r\n    //          3100 — 312F   Bopomofo\r\n    //          3130 — 318F   Hangul Compatibility Jamo\r\n    //          3190 — 319F   Kanbun\r\n    //          31A0 — 31BF   Bopomofo Extended\r\n    //          31F0 — 31FF   Katakana Phonetic Extensions\r\n    //          3200 — 32FF   Enclosed CJK Letters and Months\r\n    //          3300 — 33FF   CJK Compatibility\r\n    //          3400 — 4DBF   CJK Unified Ideographs Extension A\r\n    //          4DC0 — 4DFF   Yijing Hexagram Symbols\r\n    //          4E00 — 9FFF   CJK Unified Ideographs\r\n    //          A000 — A48F   Yi Syllables\r\n    //          A490 — A4CF   Yi Radicals\r\n    //          AC00 — D7AF   Hangul Syllables\r\n    // [IGNORE] D800 — DB7F   High Surrogates\r\n    // [IGNORE] DB80 — DBFF   High Private Use Surrogates\r\n    // [IGNORE] DC00 — DFFF   Low Surrogates\r\n    // [IGNORE] E000 — F8FF   Private Use Area\r\n    //          F900 — FAFF   CJK Compatibility Ideographs\r\n    // [IGNORE] FB00 — FB4F   Alphabetic Presentation Forms\r\n    // [IGNORE] FB50 — FDFF   Arabic Presentation Forms-A\r\n    // [IGNORE] FE00 — FE0F   Variation Selectors\r\n    // [IGNORE] FE20 — FE2F   Combining Half Marks\r\n    // [IGNORE] FE30 — FE4F   CJK Compatibility Forms\r\n    // [IGNORE] FE50 — FE6F   Small Form Variants\r\n    // [IGNORE] FE70 — FEFF   Arabic Presentation Forms-B\r\n    //          FF00 — FFEF   Halfwidth and Fullwidth Forms\r\n    //               [https://en.wikipedia.org/wiki/Halfwidth_and_fullwidth_forms]\r\n    //               of which FF01 - FF5E fullwidth ASCII of 21 to 7E\r\n    // [IGNORE]    and FF65 - FFDC halfwidth of Katakana and Hangul\r\n    // [IGNORE] FFF0 — FFFF   Specials\r\n    charCode = +charCode; // @perf\r\n    return ((charCode >= 0x2E80 && charCode <= 0xD7AF)\r\n        || (charCode >= 0xF900 && charCode <= 0xFAFF)\r\n        || (charCode >= 0xFF01 && charCode <= 0xFF5E));\r\n}\r\n// -- UTF-8 BOM\r\nexport var UTF8_BOM_CHARACTER = String.fromCharCode(65279 /* UTF8_BOM */);\r\nexport function startsWithUTF8BOM(str) {\r\n    return !!(str && str.length > 0 && str.charCodeAt(0) === 65279 /* UTF8_BOM */);\r\n}\r\nexport function safeBtoa(str) {\r\n    return btoa(encodeURIComponent(str)); // we use encodeURIComponent because btoa fails for non Latin 1 values\r\n}\r\nexport function repeat(s, count) {\r\n    var result = '';\r\n    for (var i = 0; i < count; i++) {\r\n        result += s;\r\n    }\r\n    return result;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { LcsDiff } from '../../../base/common/diff/diff.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nvar MAXIMUM_RUN_TIME = 5000; // 5 seconds\r\nvar MINIMUM_MATCHING_CHARACTER_LENGTH = 3;\r\nfunction computeDiff(originalSequence, modifiedSequence, continueProcessingPredicate, pretty) {\r\n    var diffAlgo = new LcsDiff(originalSequence, modifiedSequence, continueProcessingPredicate);\r\n    return diffAlgo.ComputeDiff(pretty);\r\n}\r\nvar LineMarkerSequence = /** @class */ (function () {\r\n    function LineMarkerSequence(lines) {\r\n        var startColumns = [];\r\n        var endColumns = [];\r\n        for (var i = 0, length_1 = lines.length; i < length_1; i++) {\r\n            startColumns[i] = LineMarkerSequence._getFirstNonBlankColumn(lines[i], 1);\r\n            endColumns[i] = LineMarkerSequence._getLastNonBlankColumn(lines[i], 1);\r\n        }\r\n        this._lines = lines;\r\n        this._startColumns = startColumns;\r\n        this._endColumns = endColumns;\r\n    }\r\n    LineMarkerSequence.prototype.getLength = function () {\r\n        return this._lines.length;\r\n    };\r\n    LineMarkerSequence.prototype.getElementAtIndex = function (i) {\r\n        return this._lines[i].substring(this._startColumns[i] - 1, this._endColumns[i] - 1);\r\n    };\r\n    LineMarkerSequence.prototype.getStartLineNumber = function (i) {\r\n        return i + 1;\r\n    };\r\n    LineMarkerSequence.prototype.getEndLineNumber = function (i) {\r\n        return i + 1;\r\n    };\r\n    LineMarkerSequence._getFirstNonBlankColumn = function (txt, defaultValue) {\r\n        var r = strings.firstNonWhitespaceIndex(txt);\r\n        if (r === -1) {\r\n            return defaultValue;\r\n        }\r\n        return r + 1;\r\n    };\r\n    LineMarkerSequence._getLastNonBlankColumn = function (txt, defaultValue) {\r\n        var r = strings.lastNonWhitespaceIndex(txt);\r\n        if (r === -1) {\r\n            return defaultValue;\r\n        }\r\n        return r + 2;\r\n    };\r\n    LineMarkerSequence.prototype.getCharSequence = function (shouldIgnoreTrimWhitespace, startIndex, endIndex) {\r\n        var charCodes = [];\r\n        var lineNumbers = [];\r\n        var columns = [];\r\n        var len = 0;\r\n        for (var index = startIndex; index <= endIndex; index++) {\r\n            var lineContent = this._lines[index];\r\n            var startColumn = (shouldIgnoreTrimWhitespace ? this._startColumns[index] : 1);\r\n            var endColumn = (shouldIgnoreTrimWhitespace ? this._endColumns[index] : lineContent.length + 1);\r\n            for (var col = startColumn; col < endColumn; col++) {\r\n                charCodes[len] = lineContent.charCodeAt(col - 1);\r\n                lineNumbers[len] = index + 1;\r\n                columns[len] = col;\r\n                len++;\r\n            }\r\n        }\r\n        return new CharSequence(charCodes, lineNumbers, columns);\r\n    };\r\n    return LineMarkerSequence;\r\n}());\r\nvar CharSequence = /** @class */ (function () {\r\n    function CharSequence(charCodes, lineNumbers, columns) {\r\n        this._charCodes = charCodes;\r\n        this._lineNumbers = lineNumbers;\r\n        this._columns = columns;\r\n    }\r\n    CharSequence.prototype.getLength = function () {\r\n        return this._charCodes.length;\r\n    };\r\n    CharSequence.prototype.getElementAtIndex = function (i) {\r\n        return this._charCodes[i];\r\n    };\r\n    CharSequence.prototype.getStartLineNumber = function (i) {\r\n        return this._lineNumbers[i];\r\n    };\r\n    CharSequence.prototype.getStartColumn = function (i) {\r\n        return this._columns[i];\r\n    };\r\n    CharSequence.prototype.getEndLineNumber = function (i) {\r\n        return this._lineNumbers[i];\r\n    };\r\n    CharSequence.prototype.getEndColumn = function (i) {\r\n        return this._columns[i] + 1;\r\n    };\r\n    return CharSequence;\r\n}());\r\nvar CharChange = /** @class */ (function () {\r\n    function CharChange(originalStartLineNumber, originalStartColumn, originalEndLineNumber, originalEndColumn, modifiedStartLineNumber, modifiedStartColumn, modifiedEndLineNumber, modifiedEndColumn) {\r\n        this.originalStartLineNumber = originalStartLineNumber;\r\n        this.originalStartColumn = originalStartColumn;\r\n        this.originalEndLineNumber = originalEndLineNumber;\r\n        this.originalEndColumn = originalEndColumn;\r\n        this.modifiedStartLineNumber = modifiedStartLineNumber;\r\n        this.modifiedStartColumn = modifiedStartColumn;\r\n        this.modifiedEndLineNumber = modifiedEndLineNumber;\r\n        this.modifiedEndColumn = modifiedEndColumn;\r\n    }\r\n    CharChange.createFromDiffChange = function (diffChange, originalCharSequence, modifiedCharSequence) {\r\n        var originalStartLineNumber;\r\n        var originalStartColumn;\r\n        var originalEndLineNumber;\r\n        var originalEndColumn;\r\n        var modifiedStartLineNumber;\r\n        var modifiedStartColumn;\r\n        var modifiedEndLineNumber;\r\n        var modifiedEndColumn;\r\n        if (diffChange.originalLength === 0) {\r\n            originalStartLineNumber = 0;\r\n            originalStartColumn = 0;\r\n            originalEndLineNumber = 0;\r\n            originalEndColumn = 0;\r\n        }\r\n        else {\r\n            originalStartLineNumber = originalCharSequence.getStartLineNumber(diffChange.originalStart);\r\n            originalStartColumn = originalCharSequence.getStartColumn(diffChange.originalStart);\r\n            originalEndLineNumber = originalCharSequence.getEndLineNumber(diffChange.originalStart + diffChange.originalLength - 1);\r\n            originalEndColumn = originalCharSequence.getEndColumn(diffChange.originalStart + diffChange.originalLength - 1);\r\n        }\r\n        if (diffChange.modifiedLength === 0) {\r\n            modifiedStartLineNumber = 0;\r\n            modifiedStartColumn = 0;\r\n            modifiedEndLineNumber = 0;\r\n            modifiedEndColumn = 0;\r\n        }\r\n        else {\r\n            modifiedStartLineNumber = modifiedCharSequence.getStartLineNumber(diffChange.modifiedStart);\r\n            modifiedStartColumn = modifiedCharSequence.getStartColumn(diffChange.modifiedStart);\r\n            modifiedEndLineNumber = modifiedCharSequence.getEndLineNumber(diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n            modifiedEndColumn = modifiedCharSequence.getEndColumn(diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n        }\r\n        return new CharChange(originalStartLineNumber, originalStartColumn, originalEndLineNumber, originalEndColumn, modifiedStartLineNumber, modifiedStartColumn, modifiedEndLineNumber, modifiedEndColumn);\r\n    };\r\n    return CharChange;\r\n}());\r\nfunction postProcessCharChanges(rawChanges) {\r\n    if (rawChanges.length <= 1) {\r\n        return rawChanges;\r\n    }\r\n    var result = [rawChanges[0]];\r\n    var prevChange = result[0];\r\n    for (var i = 1, len = rawChanges.length; i < len; i++) {\r\n        var currChange = rawChanges[i];\r\n        var originalMatchingLength = currChange.originalStart - (prevChange.originalStart + prevChange.originalLength);\r\n        var modifiedMatchingLength = currChange.modifiedStart - (prevChange.modifiedStart + prevChange.modifiedLength);\r\n        // Both of the above should be equal, but the continueProcessingPredicate may prevent this from being true\r\n        var matchingLength = Math.min(originalMatchingLength, modifiedMatchingLength);\r\n        if (matchingLength < MINIMUM_MATCHING_CHARACTER_LENGTH) {\r\n            // Merge the current change into the previous one\r\n            prevChange.originalLength = (currChange.originalStart + currChange.originalLength) - prevChange.originalStart;\r\n            prevChange.modifiedLength = (currChange.modifiedStart + currChange.modifiedLength) - prevChange.modifiedStart;\r\n        }\r\n        else {\r\n            // Add the current change\r\n            result.push(currChange);\r\n            prevChange = currChange;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nvar LineChange = /** @class */ (function () {\r\n    function LineChange(originalStartLineNumber, originalEndLineNumber, modifiedStartLineNumber, modifiedEndLineNumber, charChanges) {\r\n        this.originalStartLineNumber = originalStartLineNumber;\r\n        this.originalEndLineNumber = originalEndLineNumber;\r\n        this.modifiedStartLineNumber = modifiedStartLineNumber;\r\n        this.modifiedEndLineNumber = modifiedEndLineNumber;\r\n        this.charChanges = charChanges;\r\n    }\r\n    LineChange.createFromDiffResult = function (shouldIgnoreTrimWhitespace, diffChange, originalLineSequence, modifiedLineSequence, continueProcessingPredicate, shouldComputeCharChanges, shouldPostProcessCharChanges) {\r\n        var originalStartLineNumber;\r\n        var originalEndLineNumber;\r\n        var modifiedStartLineNumber;\r\n        var modifiedEndLineNumber;\r\n        var charChanges = undefined;\r\n        if (diffChange.originalLength === 0) {\r\n            originalStartLineNumber = originalLineSequence.getStartLineNumber(diffChange.originalStart) - 1;\r\n            originalEndLineNumber = 0;\r\n        }\r\n        else {\r\n            originalStartLineNumber = originalLineSequence.getStartLineNumber(diffChange.originalStart);\r\n            originalEndLineNumber = originalLineSequence.getEndLineNumber(diffChange.originalStart + diffChange.originalLength - 1);\r\n        }\r\n        if (diffChange.modifiedLength === 0) {\r\n            modifiedStartLineNumber = modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart) - 1;\r\n            modifiedEndLineNumber = 0;\r\n        }\r\n        else {\r\n            modifiedStartLineNumber = modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart);\r\n            modifiedEndLineNumber = modifiedLineSequence.getEndLineNumber(diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n        }\r\n        if (shouldComputeCharChanges && diffChange.originalLength !== 0 && diffChange.modifiedLength !== 0 && continueProcessingPredicate()) {\r\n            var originalCharSequence = originalLineSequence.getCharSequence(shouldIgnoreTrimWhitespace, diffChange.originalStart, diffChange.originalStart + diffChange.originalLength - 1);\r\n            var modifiedCharSequence = modifiedLineSequence.getCharSequence(shouldIgnoreTrimWhitespace, diffChange.modifiedStart, diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n            var rawChanges = computeDiff(originalCharSequence, modifiedCharSequence, continueProcessingPredicate, true);\r\n            if (shouldPostProcessCharChanges) {\r\n                rawChanges = postProcessCharChanges(rawChanges);\r\n            }\r\n            charChanges = [];\r\n            for (var i = 0, length_2 = rawChanges.length; i < length_2; i++) {\r\n                charChanges.push(CharChange.createFromDiffChange(rawChanges[i], originalCharSequence, modifiedCharSequence));\r\n            }\r\n        }\r\n        return new LineChange(originalStartLineNumber, originalEndLineNumber, modifiedStartLineNumber, modifiedEndLineNumber, charChanges);\r\n    };\r\n    return LineChange;\r\n}());\r\nvar DiffComputer = /** @class */ (function () {\r\n    function DiffComputer(originalLines, modifiedLines, opts) {\r\n        this.shouldComputeCharChanges = opts.shouldComputeCharChanges;\r\n        this.shouldPostProcessCharChanges = opts.shouldPostProcessCharChanges;\r\n        this.shouldIgnoreTrimWhitespace = opts.shouldIgnoreTrimWhitespace;\r\n        this.shouldMakePrettyDiff = opts.shouldMakePrettyDiff;\r\n        this.maximumRunTimeMs = MAXIMUM_RUN_TIME;\r\n        this.originalLines = originalLines;\r\n        this.modifiedLines = modifiedLines;\r\n        this.original = new LineMarkerSequence(originalLines);\r\n        this.modified = new LineMarkerSequence(modifiedLines);\r\n    }\r\n    DiffComputer.prototype.computeDiff = function () {\r\n        if (this.original.getLength() === 1 && this.original.getElementAtIndex(0).length === 0) {\r\n            // empty original => fast path\r\n            return [{\r\n                    originalStartLineNumber: 1,\r\n                    originalEndLineNumber: 1,\r\n                    modifiedStartLineNumber: 1,\r\n                    modifiedEndLineNumber: this.modified.getLength(),\r\n                    charChanges: [{\r\n                            modifiedEndColumn: 0,\r\n                            modifiedEndLineNumber: 0,\r\n                            modifiedStartColumn: 0,\r\n                            modifiedStartLineNumber: 0,\r\n                            originalEndColumn: 0,\r\n                            originalEndLineNumber: 0,\r\n                            originalStartColumn: 0,\r\n                            originalStartLineNumber: 0\r\n                        }]\r\n                }];\r\n        }\r\n        if (this.modified.getLength() === 1 && this.modified.getElementAtIndex(0).length === 0) {\r\n            // empty modified => fast path\r\n            return [{\r\n                    originalStartLineNumber: 1,\r\n                    originalEndLineNumber: this.original.getLength(),\r\n                    modifiedStartLineNumber: 1,\r\n                    modifiedEndLineNumber: 1,\r\n                    charChanges: [{\r\n                            modifiedEndColumn: 0,\r\n                            modifiedEndLineNumber: 0,\r\n                            modifiedStartColumn: 0,\r\n                            modifiedStartLineNumber: 0,\r\n                            originalEndColumn: 0,\r\n                            originalEndLineNumber: 0,\r\n                            originalStartColumn: 0,\r\n                            originalStartLineNumber: 0\r\n                        }]\r\n                }];\r\n        }\r\n        this.computationStartTime = (new Date()).getTime();\r\n        var rawChanges = computeDiff(this.original, this.modified, this._continueProcessingPredicate.bind(this), this.shouldMakePrettyDiff);\r\n        // The diff is always computed with ignoring trim whitespace\r\n        // This ensures we get the prettiest diff\r\n        if (this.shouldIgnoreTrimWhitespace) {\r\n            var lineChanges = [];\r\n            for (var i = 0, length_3 = rawChanges.length; i < length_3; i++) {\r\n                lineChanges.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace, rawChanges[i], this.original, this.modified, this._continueProcessingPredicate.bind(this), this.shouldComputeCharChanges, this.shouldPostProcessCharChanges));\r\n            }\r\n            return lineChanges;\r\n        }\r\n        // Need to post-process and introduce changes where the trim whitespace is different\r\n        // Note that we are looping starting at -1 to also cover the lines before the first change\r\n        var result = [];\r\n        var originalLineIndex = 0;\r\n        var modifiedLineIndex = 0;\r\n        for (var i = -1 /* !!!! */, len = rawChanges.length; i < len; i++) {\r\n            var nextChange = (i + 1 < len ? rawChanges[i + 1] : null);\r\n            var originalStop = (nextChange ? nextChange.originalStart : this.originalLines.length);\r\n            var modifiedStop = (nextChange ? nextChange.modifiedStart : this.modifiedLines.length);\r\n            while (originalLineIndex < originalStop && modifiedLineIndex < modifiedStop) {\r\n                var originalLine = this.originalLines[originalLineIndex];\r\n                var modifiedLine = this.modifiedLines[modifiedLineIndex];\r\n                if (originalLine !== modifiedLine) {\r\n                    // These lines differ only in trim whitespace\r\n                    // Check the leading whitespace\r\n                    {\r\n                        var originalStartColumn = LineMarkerSequence._getFirstNonBlankColumn(originalLine, 1);\r\n                        var modifiedStartColumn = LineMarkerSequence._getFirstNonBlankColumn(modifiedLine, 1);\r\n                        while (originalStartColumn > 1 && modifiedStartColumn > 1) {\r\n                            var originalChar = originalLine.charCodeAt(originalStartColumn - 2);\r\n                            var modifiedChar = modifiedLine.charCodeAt(modifiedStartColumn - 2);\r\n                            if (originalChar !== modifiedChar) {\r\n                                break;\r\n                            }\r\n                            originalStartColumn--;\r\n                            modifiedStartColumn--;\r\n                        }\r\n                        if (originalStartColumn > 1 || modifiedStartColumn > 1) {\r\n                            this._pushTrimWhitespaceCharChange(result, originalLineIndex + 1, 1, originalStartColumn, modifiedLineIndex + 1, 1, modifiedStartColumn);\r\n                        }\r\n                    }\r\n                    // Check the trailing whitespace\r\n                    {\r\n                        var originalEndColumn = LineMarkerSequence._getLastNonBlankColumn(originalLine, 1);\r\n                        var modifiedEndColumn = LineMarkerSequence._getLastNonBlankColumn(modifiedLine, 1);\r\n                        var originalMaxColumn = originalLine.length + 1;\r\n                        var modifiedMaxColumn = modifiedLine.length + 1;\r\n                        while (originalEndColumn < originalMaxColumn && modifiedEndColumn < modifiedMaxColumn) {\r\n                            var originalChar = originalLine.charCodeAt(originalEndColumn - 1);\r\n                            var modifiedChar = originalLine.charCodeAt(modifiedEndColumn - 1);\r\n                            if (originalChar !== modifiedChar) {\r\n                                break;\r\n                            }\r\n                            originalEndColumn++;\r\n                            modifiedEndColumn++;\r\n                        }\r\n                        if (originalEndColumn < originalMaxColumn || modifiedEndColumn < modifiedMaxColumn) {\r\n                            this._pushTrimWhitespaceCharChange(result, originalLineIndex + 1, originalEndColumn, originalMaxColumn, modifiedLineIndex + 1, modifiedEndColumn, modifiedMaxColumn);\r\n                        }\r\n                    }\r\n                }\r\n                originalLineIndex++;\r\n                modifiedLineIndex++;\r\n            }\r\n            if (nextChange) {\r\n                // Emit the actual change\r\n                result.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace, nextChange, this.original, this.modified, this._continueProcessingPredicate.bind(this), this.shouldComputeCharChanges, this.shouldPostProcessCharChanges));\r\n                originalLineIndex += nextChange.originalLength;\r\n                modifiedLineIndex += nextChange.modifiedLength;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffComputer.prototype._pushTrimWhitespaceCharChange = function (result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn) {\r\n        if (this._mergeTrimWhitespaceCharChange(result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn)) {\r\n            // Merged into previous\r\n            return;\r\n        }\r\n        var charChanges = undefined;\r\n        if (this.shouldComputeCharChanges) {\r\n            charChanges = [new CharChange(originalLineNumber, originalStartColumn, originalLineNumber, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedLineNumber, modifiedEndColumn)];\r\n        }\r\n        result.push(new LineChange(originalLineNumber, originalLineNumber, modifiedLineNumber, modifiedLineNumber, charChanges));\r\n    };\r\n    DiffComputer.prototype._mergeTrimWhitespaceCharChange = function (result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn) {\r\n        var len = result.length;\r\n        if (len === 0) {\r\n            return false;\r\n        }\r\n        var prevChange = result[len - 1];\r\n        if (prevChange.originalEndLineNumber === 0 || prevChange.modifiedEndLineNumber === 0) {\r\n            // Don't merge with inserts/deletes\r\n            return false;\r\n        }\r\n        if (prevChange.originalEndLineNumber + 1 === originalLineNumber && prevChange.modifiedEndLineNumber + 1 === modifiedLineNumber) {\r\n            prevChange.originalEndLineNumber = originalLineNumber;\r\n            prevChange.modifiedEndLineNumber = modifiedLineNumber;\r\n            if (this.shouldComputeCharChanges) {\r\n                prevChange.charChanges.push(new CharChange(originalLineNumber, originalStartColumn, originalLineNumber, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedLineNumber, modifiedEndColumn));\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    DiffComputer.prototype._continueProcessingPredicate = function () {\r\n        if (this.maximumRunTimeMs === 0) {\r\n            return true;\r\n        }\r\n        var now = (new Date()).getTime();\r\n        return now - this.computationStartTime < this.maximumRunTimeMs;\r\n    };\r\n    return DiffComputer;\r\n}());\r\nexport { DiffComputer };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar Uint8Matrix = /** @class */ (function () {\r\n    function Uint8Matrix(rows, cols, defaultValue) {\r\n        var data = new Uint8Array(rows * cols);\r\n        for (var i = 0, len = rows * cols; i < len; i++) {\r\n            data[i] = defaultValue;\r\n        }\r\n        this._data = data;\r\n        this.rows = rows;\r\n        this.cols = cols;\r\n    }\r\n    Uint8Matrix.prototype.get = function (row, col) {\r\n        return this._data[row * this.cols + col];\r\n    };\r\n    Uint8Matrix.prototype.set = function (row, col, value) {\r\n        this._data[row * this.cols + col] = value;\r\n    };\r\n    return Uint8Matrix;\r\n}());\r\nexport { Uint8Matrix };\r\nexport function toUint8(v) {\r\n    if (v < 0) {\r\n        return 0;\r\n    }\r\n    if (v > 255 /* MAX_UINT_8 */) {\r\n        return 255 /* MAX_UINT_8 */;\r\n    }\r\n    return v | 0;\r\n}\r\nexport function toUint32(v) {\r\n    if (v < 0) {\r\n        return 0;\r\n    }\r\n    if (v > 4294967295 /* MAX_UINT_32 */) {\r\n        return 4294967295 /* MAX_UINT_32 */;\r\n    }\r\n    return v | 0;\r\n}\r\nexport function toUint32Array(arr) {\r\n    var len = arr.length;\r\n    var r = new Uint32Array(len);\r\n    for (var i = 0; i < len; i++) {\r\n        r[i] = toUint32(arr[i]);\r\n    }\r\n    return r;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { toUint32 } from '../core/uint.js';\r\nvar PrefixSumIndexOfResult = /** @class */ (function () {\r\n    function PrefixSumIndexOfResult(index, remainder) {\r\n        this.index = index;\r\n        this.remainder = remainder;\r\n    }\r\n    return PrefixSumIndexOfResult;\r\n}());\r\nexport { PrefixSumIndexOfResult };\r\nvar PrefixSumComputer = /** @class */ (function () {\r\n    function PrefixSumComputer(values) {\r\n        this.values = values;\r\n        this.prefixSum = new Uint32Array(values.length);\r\n        this.prefixSumValidIndex = new Int32Array(1);\r\n        this.prefixSumValidIndex[0] = -1;\r\n    }\r\n    PrefixSumComputer.prototype.getCount = function () {\r\n        return this.values.length;\r\n    };\r\n    PrefixSumComputer.prototype.insertValues = function (insertIndex, insertValues) {\r\n        insertIndex = toUint32(insertIndex);\r\n        var oldValues = this.values;\r\n        var oldPrefixSum = this.prefixSum;\r\n        var insertValuesLen = insertValues.length;\r\n        if (insertValuesLen === 0) {\r\n            return false;\r\n        }\r\n        this.values = new Uint32Array(oldValues.length + insertValuesLen);\r\n        this.values.set(oldValues.subarray(0, insertIndex), 0);\r\n        this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);\r\n        this.values.set(insertValues, insertIndex);\r\n        if (insertIndex - 1 < this.prefixSumValidIndex[0]) {\r\n            this.prefixSumValidIndex[0] = insertIndex - 1;\r\n        }\r\n        this.prefixSum = new Uint32Array(this.values.length);\r\n        if (this.prefixSumValidIndex[0] >= 0) {\r\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\r\n        }\r\n        return true;\r\n    };\r\n    PrefixSumComputer.prototype.changeValue = function (index, value) {\r\n        index = toUint32(index);\r\n        value = toUint32(value);\r\n        if (this.values[index] === value) {\r\n            return false;\r\n        }\r\n        this.values[index] = value;\r\n        if (index - 1 < this.prefixSumValidIndex[0]) {\r\n            this.prefixSumValidIndex[0] = index - 1;\r\n        }\r\n        return true;\r\n    };\r\n    PrefixSumComputer.prototype.removeValues = function (startIndex, cnt) {\r\n        startIndex = toUint32(startIndex);\r\n        cnt = toUint32(cnt);\r\n        var oldValues = this.values;\r\n        var oldPrefixSum = this.prefixSum;\r\n        if (startIndex >= oldValues.length) {\r\n            return false;\r\n        }\r\n        var maxCnt = oldValues.length - startIndex;\r\n        if (cnt >= maxCnt) {\r\n            cnt = maxCnt;\r\n        }\r\n        if (cnt === 0) {\r\n            return false;\r\n        }\r\n        this.values = new Uint32Array(oldValues.length - cnt);\r\n        this.values.set(oldValues.subarray(0, startIndex), 0);\r\n        this.values.set(oldValues.subarray(startIndex + cnt), startIndex);\r\n        this.prefixSum = new Uint32Array(this.values.length);\r\n        if (startIndex - 1 < this.prefixSumValidIndex[0]) {\r\n            this.prefixSumValidIndex[0] = startIndex - 1;\r\n        }\r\n        if (this.prefixSumValidIndex[0] >= 0) {\r\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\r\n        }\r\n        return true;\r\n    };\r\n    PrefixSumComputer.prototype.getTotalValue = function () {\r\n        if (this.values.length === 0) {\r\n            return 0;\r\n        }\r\n        return this._getAccumulatedValue(this.values.length - 1);\r\n    };\r\n    PrefixSumComputer.prototype.getAccumulatedValue = function (index) {\r\n        if (index < 0) {\r\n            return 0;\r\n        }\r\n        index = toUint32(index);\r\n        return this._getAccumulatedValue(index);\r\n    };\r\n    PrefixSumComputer.prototype._getAccumulatedValue = function (index) {\r\n        if (index <= this.prefixSumValidIndex[0]) {\r\n            return this.prefixSum[index];\r\n        }\r\n        var startIndex = this.prefixSumValidIndex[0] + 1;\r\n        if (startIndex === 0) {\r\n            this.prefixSum[0] = this.values[0];\r\n            startIndex++;\r\n        }\r\n        if (index >= this.values.length) {\r\n            index = this.values.length - 1;\r\n        }\r\n        for (var i = startIndex; i <= index; i++) {\r\n            this.prefixSum[i] = this.prefixSum[i - 1] + this.values[i];\r\n        }\r\n        this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);\r\n        return this.prefixSum[index];\r\n    };\r\n    PrefixSumComputer.prototype.getIndexOf = function (accumulatedValue) {\r\n        accumulatedValue = Math.floor(accumulatedValue); //@perf\r\n        // Compute all sums (to get a fully valid prefixSum)\r\n        this.getTotalValue();\r\n        var low = 0;\r\n        var high = this.values.length - 1;\r\n        var mid = 0;\r\n        var midStop = 0;\r\n        var midStart = 0;\r\n        while (low <= high) {\r\n            mid = low + ((high - low) / 2) | 0;\r\n            midStop = this.prefixSum[mid];\r\n            midStart = midStop - this.values[mid];\r\n            if (accumulatedValue < midStart) {\r\n                high = mid - 1;\r\n            }\r\n            else if (accumulatedValue >= midStop) {\r\n                low = mid + 1;\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        return new PrefixSumIndexOfResult(mid, accumulatedValue - midStart);\r\n    };\r\n    return PrefixSumComputer;\r\n}());\r\nexport { PrefixSumComputer };\r\nvar PrefixSumComputerWithCache = /** @class */ (function () {\r\n    function PrefixSumComputerWithCache(values) {\r\n        this._cacheAccumulatedValueStart = 0;\r\n        this._cache = null;\r\n        this._actual = new PrefixSumComputer(values);\r\n        this._bustCache();\r\n    }\r\n    PrefixSumComputerWithCache.prototype._bustCache = function () {\r\n        this._cacheAccumulatedValueStart = 0;\r\n        this._cache = null;\r\n    };\r\n    PrefixSumComputerWithCache.prototype.insertValues = function (insertIndex, insertValues) {\r\n        if (this._actual.insertValues(insertIndex, insertValues)) {\r\n            this._bustCache();\r\n        }\r\n    };\r\n    PrefixSumComputerWithCache.prototype.changeValue = function (index, value) {\r\n        if (this._actual.changeValue(index, value)) {\r\n            this._bustCache();\r\n        }\r\n    };\r\n    PrefixSumComputerWithCache.prototype.removeValues = function (startIndex, cnt) {\r\n        if (this._actual.removeValues(startIndex, cnt)) {\r\n            this._bustCache();\r\n        }\r\n    };\r\n    PrefixSumComputerWithCache.prototype.getTotalValue = function () {\r\n        return this._actual.getTotalValue();\r\n    };\r\n    PrefixSumComputerWithCache.prototype.getAccumulatedValue = function (index) {\r\n        return this._actual.getAccumulatedValue(index);\r\n    };\r\n    PrefixSumComputerWithCache.prototype.getIndexOf = function (accumulatedValue) {\r\n        accumulatedValue = Math.floor(accumulatedValue); //@perf\r\n        if (this._cache !== null) {\r\n            var cacheIndex = accumulatedValue - this._cacheAccumulatedValueStart;\r\n            if (cacheIndex >= 0 && cacheIndex < this._cache.length) {\r\n                // Cache hit!\r\n                return this._cache[cacheIndex];\r\n            }\r\n        }\r\n        // Cache miss!\r\n        return this._actual.getIndexOf(accumulatedValue);\r\n    };\r\n    /**\r\n     * Gives a hint that a lot of requests are about to come in for these accumulated values.\r\n     */\r\n    PrefixSumComputerWithCache.prototype.warmUpCache = function (accumulatedValueStart, accumulatedValueEnd) {\r\n        var newCache = [];\r\n        for (var accumulatedValue = accumulatedValueStart; accumulatedValue <= accumulatedValueEnd; accumulatedValue++) {\r\n            newCache[accumulatedValue - accumulatedValueStart] = this.getIndexOf(accumulatedValue);\r\n        }\r\n        this._cache = newCache;\r\n        this._cacheAccumulatedValueStart = accumulatedValueStart;\r\n    };\r\n    return PrefixSumComputerWithCache;\r\n}());\r\nexport { PrefixSumComputerWithCache };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Position } from '../core/position.js';\r\nimport { PrefixSumComputer } from '../viewModel/prefixSumComputer.js';\r\nvar MirrorTextModel = /** @class */ (function () {\r\n    function MirrorTextModel(uri, lines, eol, versionId) {\r\n        this._uri = uri;\r\n        this._lines = lines;\r\n        this._eol = eol;\r\n        this._versionId = versionId;\r\n        this._lineStarts = null;\r\n    }\r\n    MirrorTextModel.prototype.dispose = function () {\r\n        this._lines.length = 0;\r\n    };\r\n    MirrorTextModel.prototype.getText = function () {\r\n        return this._lines.join(this._eol);\r\n    };\r\n    MirrorTextModel.prototype.onEvents = function (e) {\r\n        if (e.eol && e.eol !== this._eol) {\r\n            this._eol = e.eol;\r\n            this._lineStarts = null;\r\n        }\r\n        // Update my lines\r\n        var changes = e.changes;\r\n        for (var i = 0, len = changes.length; i < len; i++) {\r\n            var change = changes[i];\r\n            this._acceptDeleteRange(change.range);\r\n            this._acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\r\n        }\r\n        this._versionId = e.versionId;\r\n    };\r\n    MirrorTextModel.prototype._ensureLineStarts = function () {\r\n        if (!this._lineStarts) {\r\n            var eolLength = this._eol.length;\r\n            var linesLength = this._lines.length;\r\n            var lineStartValues = new Uint32Array(linesLength);\r\n            for (var i = 0; i < linesLength; i++) {\r\n                lineStartValues[i] = this._lines[i].length + eolLength;\r\n            }\r\n            this._lineStarts = new PrefixSumComputer(lineStartValues);\r\n        }\r\n    };\r\n    /**\r\n     * All changes to a line's text go through this method\r\n     */\r\n    MirrorTextModel.prototype._setLineText = function (lineIndex, newValue) {\r\n        this._lines[lineIndex] = newValue;\r\n        if (this._lineStarts) {\r\n            // update prefix sum\r\n            this._lineStarts.changeValue(lineIndex, this._lines[lineIndex].length + this._eol.length);\r\n        }\r\n    };\r\n    MirrorTextModel.prototype._acceptDeleteRange = function (range) {\r\n        if (range.startLineNumber === range.endLineNumber) {\r\n            if (range.startColumn === range.endColumn) {\r\n                // Nothing to delete\r\n                return;\r\n            }\r\n            // Delete text on the affected line\r\n            this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\r\n                + this._lines[range.startLineNumber - 1].substring(range.endColumn - 1));\r\n            return;\r\n        }\r\n        // Take remaining text on last line and append it to remaining text on first line\r\n        this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\r\n            + this._lines[range.endLineNumber - 1].substring(range.endColumn - 1));\r\n        // Delete middle lines\r\n        this._lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\r\n        if (this._lineStarts) {\r\n            // update prefix sum\r\n            this._lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\r\n        }\r\n    };\r\n    MirrorTextModel.prototype._acceptInsertText = function (position, insertText) {\r\n        if (insertText.length === 0) {\r\n            // Nothing to insert\r\n            return;\r\n        }\r\n        var insertLines = insertText.split(/\\r\\n|\\r|\\n/);\r\n        if (insertLines.length === 1) {\r\n            // Inserting text on one line\r\n            this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1)\r\n                + insertLines[0]\r\n                + this._lines[position.lineNumber - 1].substring(position.column - 1));\r\n            return;\r\n        }\r\n        // Append overflowing text from first line to the end of text to insert\r\n        insertLines[insertLines.length - 1] += this._lines[position.lineNumber - 1].substring(position.column - 1);\r\n        // Delete overflowing text from first line and insert text on first line\r\n        this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1)\r\n            + insertLines[0]);\r\n        // Insert new lines & store lengths\r\n        var newLengths = new Uint32Array(insertLines.length - 1);\r\n        for (var i = 1; i < insertLines.length; i++) {\r\n            this._lines.splice(position.lineNumber + i - 1, 0, insertLines[i]);\r\n            newLengths[i - 1] = insertLines[i].length + this._eol.length;\r\n        }\r\n        if (this._lineStarts) {\r\n            // update prefix sum\r\n            this._lineStarts.insertValues(position.lineNumber, newLengths);\r\n        }\r\n    };\r\n    return MirrorTextModel;\r\n}());\r\nexport { MirrorTextModel };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport var USUAL_WORD_SEPARATORS = '`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?';\r\n/**\r\n * Create a word definition regular expression based on default word separators.\r\n * Optionally provide allowed separators that should be included in words.\r\n *\r\n * The default would look like this:\r\n * /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g\r\n */\r\nfunction createWordRegExp(allowInWords) {\r\n    if (allowInWords === void 0) { allowInWords = ''; }\r\n    var source = '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^';\r\n    for (var i = 0; i < USUAL_WORD_SEPARATORS.length; i++) {\r\n        if (allowInWords.indexOf(USUAL_WORD_SEPARATORS[i]) >= 0) {\r\n            continue;\r\n        }\r\n        source += '\\\\' + USUAL_WORD_SEPARATORS[i];\r\n    }\r\n    source += '\\\\s]+)';\r\n    return new RegExp(source, 'g');\r\n}\r\n// catches numbers (including floating numbers) in the first group, and alphanum in the second\r\nexport var DEFAULT_WORD_REGEXP = createWordRegExp();\r\nexport function ensureValidWordDefinition(wordDefinition) {\r\n    var result = DEFAULT_WORD_REGEXP;\r\n    if (wordDefinition && (wordDefinition instanceof RegExp)) {\r\n        if (!wordDefinition.global) {\r\n            var flags = 'g';\r\n            if (wordDefinition.ignoreCase) {\r\n                flags += 'i';\r\n            }\r\n            if (wordDefinition.multiline) {\r\n                flags += 'm';\r\n            }\r\n            result = new RegExp(wordDefinition.source, flags);\r\n        }\r\n        else {\r\n            result = wordDefinition;\r\n        }\r\n    }\r\n    result.lastIndex = 0;\r\n    return result;\r\n}\r\nfunction getWordAtPosFast(column, wordDefinition, text, textOffset) {\r\n    // find whitespace enclosed text around column and match from there\r\n    var pos = column - 1 - textOffset;\r\n    var start = text.lastIndexOf(' ', pos - 1) + 1;\r\n    var end = text.indexOf(' ', pos);\r\n    if (end === -1) {\r\n        end = text.length;\r\n    }\r\n    wordDefinition.lastIndex = start;\r\n    var match;\r\n    while (match = wordDefinition.exec(text)) {\r\n        var matchIndex = match.index || 0;\r\n        if (matchIndex <= pos && wordDefinition.lastIndex >= pos) {\r\n            return {\r\n                word: match[0],\r\n                startColumn: textOffset + 1 + matchIndex,\r\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\r\n            };\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction getWordAtPosSlow(column, wordDefinition, text, textOffset) {\r\n    // matches all words starting at the beginning\r\n    // of the input until it finds a match that encloses\r\n    // the desired column. slow but correct\r\n    var pos = column - 1 - textOffset;\r\n    wordDefinition.lastIndex = 0;\r\n    var match;\r\n    while (match = wordDefinition.exec(text)) {\r\n        var matchIndex = match.index || 0;\r\n        if (matchIndex > pos) {\r\n            // |nW -> matched only after the pos\r\n            return null;\r\n        }\r\n        else if (wordDefinition.lastIndex >= pos) {\r\n            // W|W -> match encloses pos\r\n            return {\r\n                word: match[0],\r\n                startColumn: textOffset + 1 + matchIndex,\r\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\r\n            };\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function getWordAtText(column, wordDefinition, text, textOffset) {\r\n    // if `words` can contain whitespace character we have to use the slow variant\r\n    // otherwise we use the fast variant of finding a word\r\n    wordDefinition.lastIndex = 0;\r\n    var match = wordDefinition.exec(text);\r\n    if (!match) {\r\n        return null;\r\n    }\r\n    // todo@joh the `match` could already be the (first) word\r\n    var ret = match[0].indexOf(' ') >= 0\r\n        // did match a word which contains a space character -> use slow word find\r\n        ? getWordAtPosSlow(column, wordDefinition, text, textOffset)\r\n        // sane word definition -> use fast word find\r\n        : getWordAtPosFast(column, wordDefinition, text, textOffset);\r\n    // both (getWordAtPosFast and getWordAtPosSlow) leave the wordDefinition-RegExp\r\n    // in an undefined state and to not confuse other users of the wordDefinition\r\n    // we reset the lastIndex\r\n    wordDefinition.lastIndex = 0;\r\n    return ret;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { toUint8 } from './uint.js';\r\n/**\r\n * A fast character classifier that uses a compact array for ASCII values.\r\n */\r\nvar CharacterClassifier = /** @class */ (function () {\r\n    function CharacterClassifier(_defaultValue) {\r\n        var defaultValue = toUint8(_defaultValue);\r\n        this._defaultValue = defaultValue;\r\n        this._asciiMap = CharacterClassifier._createAsciiMap(defaultValue);\r\n        this._map = new Map();\r\n    }\r\n    CharacterClassifier._createAsciiMap = function (defaultValue) {\r\n        var asciiMap = new Uint8Array(256);\r\n        for (var i = 0; i < 256; i++) {\r\n            asciiMap[i] = defaultValue;\r\n        }\r\n        return asciiMap;\r\n    };\r\n    CharacterClassifier.prototype.set = function (charCode, _value) {\r\n        var value = toUint8(_value);\r\n        if (charCode >= 0 && charCode < 256) {\r\n            this._asciiMap[charCode] = value;\r\n        }\r\n        else {\r\n            this._map.set(charCode, value);\r\n        }\r\n    };\r\n    CharacterClassifier.prototype.get = function (charCode) {\r\n        if (charCode >= 0 && charCode < 256) {\r\n            return this._asciiMap[charCode];\r\n        }\r\n        else {\r\n            return (this._map.get(charCode) || this._defaultValue);\r\n        }\r\n    };\r\n    return CharacterClassifier;\r\n}());\r\nexport { CharacterClassifier };\r\nvar CharacterSet = /** @class */ (function () {\r\n    function CharacterSet() {\r\n        this._actual = new CharacterClassifier(0 /* False */);\r\n    }\r\n    CharacterSet.prototype.add = function (charCode) {\r\n        this._actual.set(charCode, 1 /* True */);\r\n    };\r\n    CharacterSet.prototype.has = function (charCode) {\r\n        return (this._actual.get(charCode) === 1 /* True */);\r\n    };\r\n    return CharacterSet;\r\n}());\r\nexport { CharacterSet };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { CharacterClassifier } from '../core/characterClassifier.js';\r\nimport { Uint8Matrix } from '../core/uint.js';\r\nvar StateMachine = /** @class */ (function () {\r\n    function StateMachine(edges) {\r\n        var maxCharCode = 0;\r\n        var maxState = 0 /* Invalid */;\r\n        for (var i = 0, len = edges.length; i < len; i++) {\r\n            var _a = edges[i], from = _a[0], chCode = _a[1], to = _a[2];\r\n            if (chCode > maxCharCode) {\r\n                maxCharCode = chCode;\r\n            }\r\n            if (from > maxState) {\r\n                maxState = from;\r\n            }\r\n            if (to > maxState) {\r\n                maxState = to;\r\n            }\r\n        }\r\n        maxCharCode++;\r\n        maxState++;\r\n        var states = new Uint8Matrix(maxState, maxCharCode, 0 /* Invalid */);\r\n        for (var i = 0, len = edges.length; i < len; i++) {\r\n            var _b = edges[i], from = _b[0], chCode = _b[1], to = _b[2];\r\n            states.set(from, chCode, to);\r\n        }\r\n        this._states = states;\r\n        this._maxCharCode = maxCharCode;\r\n    }\r\n    StateMachine.prototype.nextState = function (currentState, chCode) {\r\n        if (chCode < 0 || chCode >= this._maxCharCode) {\r\n            return 0 /* Invalid */;\r\n        }\r\n        return this._states.get(currentState, chCode);\r\n    };\r\n    return StateMachine;\r\n}());\r\n// State machine for http:// or https:// or file://\r\nvar _stateMachine = null;\r\nfunction getStateMachine() {\r\n    if (_stateMachine === null) {\r\n        _stateMachine = new StateMachine([\r\n            [1 /* Start */, 104 /* h */, 2 /* H */],\r\n            [1 /* Start */, 72 /* H */, 2 /* H */],\r\n            [1 /* Start */, 102 /* f */, 6 /* F */],\r\n            [1 /* Start */, 70 /* F */, 6 /* F */],\r\n            [2 /* H */, 116 /* t */, 3 /* HT */],\r\n            [2 /* H */, 84 /* T */, 3 /* HT */],\r\n            [3 /* HT */, 116 /* t */, 4 /* HTT */],\r\n            [3 /* HT */, 84 /* T */, 4 /* HTT */],\r\n            [4 /* HTT */, 112 /* p */, 5 /* HTTP */],\r\n            [4 /* HTT */, 80 /* P */, 5 /* HTTP */],\r\n            [5 /* HTTP */, 115 /* s */, 9 /* BeforeColon */],\r\n            [5 /* HTTP */, 83 /* S */, 9 /* BeforeColon */],\r\n            [5 /* HTTP */, 58 /* Colon */, 10 /* AfterColon */],\r\n            [6 /* F */, 105 /* i */, 7 /* FI */],\r\n            [6 /* F */, 73 /* I */, 7 /* FI */],\r\n            [7 /* FI */, 108 /* l */, 8 /* FIL */],\r\n            [7 /* FI */, 76 /* L */, 8 /* FIL */],\r\n            [8 /* FIL */, 101 /* e */, 9 /* BeforeColon */],\r\n            [8 /* FIL */, 69 /* E */, 9 /* BeforeColon */],\r\n            [9 /* BeforeColon */, 58 /* Colon */, 10 /* AfterColon */],\r\n            [10 /* AfterColon */, 47 /* Slash */, 11 /* AlmostThere */],\r\n            [11 /* AlmostThere */, 47 /* Slash */, 12 /* End */],\r\n        ]);\r\n    }\r\n    return _stateMachine;\r\n}\r\nvar _classifier = null;\r\nfunction getClassifier() {\r\n    if (_classifier === null) {\r\n        _classifier = new CharacterClassifier(0 /* None */);\r\n        var FORCE_TERMINATION_CHARACTERS = ' \\t<>\\'\\\"、。｡､，．：；？！＠＃＄％＆＊‘“〈《「『【〔（［｛｢｣｝］）〕】』」》〉”’｀～…';\r\n        for (var i = 0; i < FORCE_TERMINATION_CHARACTERS.length; i++) {\r\n            _classifier.set(FORCE_TERMINATION_CHARACTERS.charCodeAt(i), 1 /* ForceTermination */);\r\n        }\r\n        var CANNOT_END_WITH_CHARACTERS = '.,;';\r\n        for (var i = 0; i < CANNOT_END_WITH_CHARACTERS.length; i++) {\r\n            _classifier.set(CANNOT_END_WITH_CHARACTERS.charCodeAt(i), 2 /* CannotEndIn */);\r\n        }\r\n    }\r\n    return _classifier;\r\n}\r\nvar LinkComputer = /** @class */ (function () {\r\n    function LinkComputer() {\r\n    }\r\n    LinkComputer._createLink = function (classifier, line, lineNumber, linkBeginIndex, linkEndIndex) {\r\n        // Do not allow to end link in certain characters...\r\n        var lastIncludedCharIndex = linkEndIndex - 1;\r\n        do {\r\n            var chCode = line.charCodeAt(lastIncludedCharIndex);\r\n            var chClass = classifier.get(chCode);\r\n            if (chClass !== 2 /* CannotEndIn */) {\r\n                break;\r\n            }\r\n            lastIncludedCharIndex--;\r\n        } while (lastIncludedCharIndex > linkBeginIndex);\r\n        // Handle links enclosed in parens, square brackets and curlys.\r\n        if (linkBeginIndex > 0) {\r\n            var charCodeBeforeLink = line.charCodeAt(linkBeginIndex - 1);\r\n            var lastCharCodeInLink = line.charCodeAt(lastIncludedCharIndex);\r\n            if ((charCodeBeforeLink === 40 /* OpenParen */ && lastCharCodeInLink === 41 /* CloseParen */)\r\n                || (charCodeBeforeLink === 91 /* OpenSquareBracket */ && lastCharCodeInLink === 93 /* CloseSquareBracket */)\r\n                || (charCodeBeforeLink === 123 /* OpenCurlyBrace */ && lastCharCodeInLink === 125 /* CloseCurlyBrace */)) {\r\n                // Do not end in ) if ( is before the link start\r\n                // Do not end in ] if [ is before the link start\r\n                // Do not end in } if { is before the link start\r\n                lastIncludedCharIndex--;\r\n            }\r\n        }\r\n        return {\r\n            range: {\r\n                startLineNumber: lineNumber,\r\n                startColumn: linkBeginIndex + 1,\r\n                endLineNumber: lineNumber,\r\n                endColumn: lastIncludedCharIndex + 2\r\n            },\r\n            url: line.substring(linkBeginIndex, lastIncludedCharIndex + 1)\r\n        };\r\n    };\r\n    LinkComputer.computeLinks = function (model) {\r\n        var stateMachine = getStateMachine();\r\n        var classifier = getClassifier();\r\n        var result = [];\r\n        for (var i = 1, lineCount = model.getLineCount(); i <= lineCount; i++) {\r\n            var line = model.getLineContent(i);\r\n            var len = line.length;\r\n            var j = 0;\r\n            var linkBeginIndex = 0;\r\n            var linkBeginChCode = 0;\r\n            var state = 1 /* Start */;\r\n            var hasOpenParens = false;\r\n            var hasOpenSquareBracket = false;\r\n            var hasOpenCurlyBracket = false;\r\n            while (j < len) {\r\n                var resetStateMachine = false;\r\n                var chCode = line.charCodeAt(j);\r\n                if (state === 13 /* Accept */) {\r\n                    var chClass = void 0;\r\n                    switch (chCode) {\r\n                        case 40 /* OpenParen */:\r\n                            hasOpenParens = true;\r\n                            chClass = 0 /* None */;\r\n                            break;\r\n                        case 41 /* CloseParen */:\r\n                            chClass = (hasOpenParens ? 0 /* None */ : 1 /* ForceTermination */);\r\n                            break;\r\n                        case 91 /* OpenSquareBracket */:\r\n                            hasOpenSquareBracket = true;\r\n                            chClass = 0 /* None */;\r\n                            break;\r\n                        case 93 /* CloseSquareBracket */:\r\n                            chClass = (hasOpenSquareBracket ? 0 /* None */ : 1 /* ForceTermination */);\r\n                            break;\r\n                        case 123 /* OpenCurlyBrace */:\r\n                            hasOpenCurlyBracket = true;\r\n                            chClass = 0 /* None */;\r\n                            break;\r\n                        case 125 /* CloseCurlyBrace */:\r\n                            chClass = (hasOpenCurlyBracket ? 0 /* None */ : 1 /* ForceTermination */);\r\n                            break;\r\n                        /* The following three rules make it that ' or \" or ` are allowed inside links if the link began with a different one */\r\n                        case 39 /* SingleQuote */:\r\n                            chClass = (linkBeginChCode === 34 /* DoubleQuote */ || linkBeginChCode === 96 /* BackTick */) ? 0 /* None */ : 1 /* ForceTermination */;\r\n                            break;\r\n                        case 34 /* DoubleQuote */:\r\n                            chClass = (linkBeginChCode === 39 /* SingleQuote */ || linkBeginChCode === 96 /* BackTick */) ? 0 /* None */ : 1 /* ForceTermination */;\r\n                            break;\r\n                        case 96 /* BackTick */:\r\n                            chClass = (linkBeginChCode === 39 /* SingleQuote */ || linkBeginChCode === 34 /* DoubleQuote */) ? 0 /* None */ : 1 /* ForceTermination */;\r\n                            break;\r\n                        default:\r\n                            chClass = classifier.get(chCode);\r\n                    }\r\n                    // Check if character terminates link\r\n                    if (chClass === 1 /* ForceTermination */) {\r\n                        result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, j));\r\n                        resetStateMachine = true;\r\n                    }\r\n                }\r\n                else if (state === 12 /* End */) {\r\n                    var chClass = classifier.get(chCode);\r\n                    // Check if character terminates link\r\n                    if (chClass === 1 /* ForceTermination */) {\r\n                        resetStateMachine = true;\r\n                    }\r\n                    else {\r\n                        state = 13 /* Accept */;\r\n                    }\r\n                }\r\n                else {\r\n                    state = stateMachine.nextState(state, chCode);\r\n                    if (state === 0 /* Invalid */) {\r\n                        resetStateMachine = true;\r\n                    }\r\n                }\r\n                if (resetStateMachine) {\r\n                    state = 1 /* Start */;\r\n                    hasOpenParens = false;\r\n                    hasOpenSquareBracket = false;\r\n                    hasOpenCurlyBracket = false;\r\n                    // Record where the link started\r\n                    linkBeginIndex = j + 1;\r\n                    linkBeginChCode = chCode;\r\n                }\r\n                j++;\r\n            }\r\n            if (state === 13 /* Accept */) {\r\n                result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, len));\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    return LinkComputer;\r\n}());\r\n/**\r\n * Returns an array of all links contains in the provided\r\n * document. *Note* that this operation is computational\r\n * expensive and should not run in the UI thread.\r\n */\r\nexport function computeLinks(model) {\r\n    if (!model || typeof model.getLineCount !== 'function' || typeof model.getLineContent !== 'function') {\r\n        // Unknown caller!\r\n        return [];\r\n    }\r\n    return LinkComputer.computeLinks(model);\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar BasicInplaceReplace = /** @class */ (function () {\r\n    function BasicInplaceReplace() {\r\n        this._defaultValueSet = [\r\n            ['true', 'false'],\r\n            ['True', 'False'],\r\n            ['Private', 'Public', 'Friend', 'ReadOnly', 'Partial', 'Protected', 'WriteOnly'],\r\n            ['public', 'protected', 'private'],\r\n        ];\r\n    }\r\n    BasicInplaceReplace.prototype.navigateValueSet = function (range1, text1, range2, text2, up) {\r\n        if (range1 && text1) {\r\n            var result = this.doNavigateValueSet(text1, up);\r\n            if (result) {\r\n                return {\r\n                    range: range1,\r\n                    value: result\r\n                };\r\n            }\r\n        }\r\n        if (range2 && text2) {\r\n            var result = this.doNavigateValueSet(text2, up);\r\n            if (result) {\r\n                return {\r\n                    range: range2,\r\n                    value: result\r\n                };\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    BasicInplaceReplace.prototype.doNavigateValueSet = function (text, up) {\r\n        var numberResult = this.numberReplace(text, up);\r\n        if (numberResult !== null) {\r\n            return numberResult;\r\n        }\r\n        return this.textReplace(text, up);\r\n    };\r\n    BasicInplaceReplace.prototype.numberReplace = function (value, up) {\r\n        var precision = Math.pow(10, value.length - (value.lastIndexOf('.') + 1));\r\n        var n1 = Number(value);\r\n        var n2 = parseFloat(value);\r\n        if (!isNaN(n1) && !isNaN(n2) && n1 === n2) {\r\n            if (n1 === 0 && !up) {\r\n                return null; // don't do negative\r\n                //\t\t\t} else if(n1 === 9 && up) {\r\n                //\t\t\t\treturn null; // don't insert 10 into a number\r\n            }\r\n            else {\r\n                n1 = Math.floor(n1 * precision);\r\n                n1 += up ? precision : -precision;\r\n                return String(n1 / precision);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    BasicInplaceReplace.prototype.textReplace = function (value, up) {\r\n        return this.valueSetsReplace(this._defaultValueSet, value, up);\r\n    };\r\n    BasicInplaceReplace.prototype.valueSetsReplace = function (valueSets, value, up) {\r\n        var result = null;\r\n        for (var i = 0, len = valueSets.length; result === null && i < len; i++) {\r\n            result = this.valueSetReplace(valueSets[i], value, up);\r\n        }\r\n        return result;\r\n    };\r\n    BasicInplaceReplace.prototype.valueSetReplace = function (valueSet, value, up) {\r\n        var idx = valueSet.indexOf(value);\r\n        if (idx >= 0) {\r\n            idx += up ? +1 : -1;\r\n            if (idx < 0) {\r\n                idx = valueSet.length - 1;\r\n            }\r\n            else {\r\n                idx %= valueSet.length;\r\n            }\r\n            return valueSet[idx];\r\n        }\r\n        return null;\r\n    };\r\n    BasicInplaceReplace.INSTANCE = new BasicInplaceReplace();\r\n    return BasicInplaceReplace;\r\n}());\r\nexport { BasicInplaceReplace };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar KeyCodeStrMap = /** @class */ (function () {\r\n    function KeyCodeStrMap() {\r\n        this._keyCodeToStr = [];\r\n        this._strToKeyCode = Object.create(null);\r\n    }\r\n    KeyCodeStrMap.prototype.define = function (keyCode, str) {\r\n        this._keyCodeToStr[keyCode] = str;\r\n        this._strToKeyCode[str.toLowerCase()] = keyCode;\r\n    };\r\n    KeyCodeStrMap.prototype.keyCodeToStr = function (keyCode) {\r\n        return this._keyCodeToStr[keyCode];\r\n    };\r\n    KeyCodeStrMap.prototype.strToKeyCode = function (str) {\r\n        return this._strToKeyCode[str.toLowerCase()] || 0 /* Unknown */;\r\n    };\r\n    return KeyCodeStrMap;\r\n}());\r\nvar uiMap = new KeyCodeStrMap();\r\nvar userSettingsUSMap = new KeyCodeStrMap();\r\nvar userSettingsGeneralMap = new KeyCodeStrMap();\r\n(function () {\r\n    function define(keyCode, uiLabel, usUserSettingsLabel, generalUserSettingsLabel) {\r\n        if (usUserSettingsLabel === void 0) { usUserSettingsLabel = uiLabel; }\r\n        if (generalUserSettingsLabel === void 0) { generalUserSettingsLabel = usUserSettingsLabel; }\r\n        uiMap.define(keyCode, uiLabel);\r\n        userSettingsUSMap.define(keyCode, usUserSettingsLabel);\r\n        userSettingsGeneralMap.define(keyCode, generalUserSettingsLabel);\r\n    }\r\n    define(0 /* Unknown */, 'unknown');\r\n    define(1 /* Backspace */, 'Backspace');\r\n    define(2 /* Tab */, 'Tab');\r\n    define(3 /* Enter */, 'Enter');\r\n    define(4 /* Shift */, 'Shift');\r\n    define(5 /* Ctrl */, 'Ctrl');\r\n    define(6 /* Alt */, 'Alt');\r\n    define(7 /* PauseBreak */, 'PauseBreak');\r\n    define(8 /* CapsLock */, 'CapsLock');\r\n    define(9 /* Escape */, 'Escape');\r\n    define(10 /* Space */, 'Space');\r\n    define(11 /* PageUp */, 'PageUp');\r\n    define(12 /* PageDown */, 'PageDown');\r\n    define(13 /* End */, 'End');\r\n    define(14 /* Home */, 'Home');\r\n    define(15 /* LeftArrow */, 'LeftArrow', 'Left');\r\n    define(16 /* UpArrow */, 'UpArrow', 'Up');\r\n    define(17 /* RightArrow */, 'RightArrow', 'Right');\r\n    define(18 /* DownArrow */, 'DownArrow', 'Down');\r\n    define(19 /* Insert */, 'Insert');\r\n    define(20 /* Delete */, 'Delete');\r\n    define(21 /* KEY_0 */, '0');\r\n    define(22 /* KEY_1 */, '1');\r\n    define(23 /* KEY_2 */, '2');\r\n    define(24 /* KEY_3 */, '3');\r\n    define(25 /* KEY_4 */, '4');\r\n    define(26 /* KEY_5 */, '5');\r\n    define(27 /* KEY_6 */, '6');\r\n    define(28 /* KEY_7 */, '7');\r\n    define(29 /* KEY_8 */, '8');\r\n    define(30 /* KEY_9 */, '9');\r\n    define(31 /* KEY_A */, 'A');\r\n    define(32 /* KEY_B */, 'B');\r\n    define(33 /* KEY_C */, 'C');\r\n    define(34 /* KEY_D */, 'D');\r\n    define(35 /* KEY_E */, 'E');\r\n    define(36 /* KEY_F */, 'F');\r\n    define(37 /* KEY_G */, 'G');\r\n    define(38 /* KEY_H */, 'H');\r\n    define(39 /* KEY_I */, 'I');\r\n    define(40 /* KEY_J */, 'J');\r\n    define(41 /* KEY_K */, 'K');\r\n    define(42 /* KEY_L */, 'L');\r\n    define(43 /* KEY_M */, 'M');\r\n    define(44 /* KEY_N */, 'N');\r\n    define(45 /* KEY_O */, 'O');\r\n    define(46 /* KEY_P */, 'P');\r\n    define(47 /* KEY_Q */, 'Q');\r\n    define(48 /* KEY_R */, 'R');\r\n    define(49 /* KEY_S */, 'S');\r\n    define(50 /* KEY_T */, 'T');\r\n    define(51 /* KEY_U */, 'U');\r\n    define(52 /* KEY_V */, 'V');\r\n    define(53 /* KEY_W */, 'W');\r\n    define(54 /* KEY_X */, 'X');\r\n    define(55 /* KEY_Y */, 'Y');\r\n    define(56 /* KEY_Z */, 'Z');\r\n    define(57 /* Meta */, 'Meta');\r\n    define(58 /* ContextMenu */, 'ContextMenu');\r\n    define(59 /* F1 */, 'F1');\r\n    define(60 /* F2 */, 'F2');\r\n    define(61 /* F3 */, 'F3');\r\n    define(62 /* F4 */, 'F4');\r\n    define(63 /* F5 */, 'F5');\r\n    define(64 /* F6 */, 'F6');\r\n    define(65 /* F7 */, 'F7');\r\n    define(66 /* F8 */, 'F8');\r\n    define(67 /* F9 */, 'F9');\r\n    define(68 /* F10 */, 'F10');\r\n    define(69 /* F11 */, 'F11');\r\n    define(70 /* F12 */, 'F12');\r\n    define(71 /* F13 */, 'F13');\r\n    define(72 /* F14 */, 'F14');\r\n    define(73 /* F15 */, 'F15');\r\n    define(74 /* F16 */, 'F16');\r\n    define(75 /* F17 */, 'F17');\r\n    define(76 /* F18 */, 'F18');\r\n    define(77 /* F19 */, 'F19');\r\n    define(78 /* NumLock */, 'NumLock');\r\n    define(79 /* ScrollLock */, 'ScrollLock');\r\n    define(80 /* US_SEMICOLON */, ';', ';', 'OEM_1');\r\n    define(81 /* US_EQUAL */, '=', '=', 'OEM_PLUS');\r\n    define(82 /* US_COMMA */, ',', ',', 'OEM_COMMA');\r\n    define(83 /* US_MINUS */, '-', '-', 'OEM_MINUS');\r\n    define(84 /* US_DOT */, '.', '.', 'OEM_PERIOD');\r\n    define(85 /* US_SLASH */, '/', '/', 'OEM_2');\r\n    define(86 /* US_BACKTICK */, '`', '`', 'OEM_3');\r\n    define(110 /* ABNT_C1 */, 'ABNT_C1');\r\n    define(111 /* ABNT_C2 */, 'ABNT_C2');\r\n    define(87 /* US_OPEN_SQUARE_BRACKET */, '[', '[', 'OEM_4');\r\n    define(88 /* US_BACKSLASH */, '\\\\', '\\\\', 'OEM_5');\r\n    define(89 /* US_CLOSE_SQUARE_BRACKET */, ']', ']', 'OEM_6');\r\n    define(90 /* US_QUOTE */, '\\'', '\\'', 'OEM_7');\r\n    define(91 /* OEM_8 */, 'OEM_8');\r\n    define(92 /* OEM_102 */, 'OEM_102');\r\n    define(93 /* NUMPAD_0 */, 'NumPad0');\r\n    define(94 /* NUMPAD_1 */, 'NumPad1');\r\n    define(95 /* NUMPAD_2 */, 'NumPad2');\r\n    define(96 /* NUMPAD_3 */, 'NumPad3');\r\n    define(97 /* NUMPAD_4 */, 'NumPad4');\r\n    define(98 /* NUMPAD_5 */, 'NumPad5');\r\n    define(99 /* NUMPAD_6 */, 'NumPad6');\r\n    define(100 /* NUMPAD_7 */, 'NumPad7');\r\n    define(101 /* NUMPAD_8 */, 'NumPad8');\r\n    define(102 /* NUMPAD_9 */, 'NumPad9');\r\n    define(103 /* NUMPAD_MULTIPLY */, 'NumPad_Multiply');\r\n    define(104 /* NUMPAD_ADD */, 'NumPad_Add');\r\n    define(105 /* NUMPAD_SEPARATOR */, 'NumPad_Separator');\r\n    define(106 /* NUMPAD_SUBTRACT */, 'NumPad_Subtract');\r\n    define(107 /* NUMPAD_DECIMAL */, 'NumPad_Decimal');\r\n    define(108 /* NUMPAD_DIVIDE */, 'NumPad_Divide');\r\n})();\r\nexport var KeyCodeUtils;\r\n(function (KeyCodeUtils) {\r\n    function toString(keyCode) {\r\n        return uiMap.keyCodeToStr(keyCode);\r\n    }\r\n    KeyCodeUtils.toString = toString;\r\n    function fromString(key) {\r\n        return uiMap.strToKeyCode(key);\r\n    }\r\n    KeyCodeUtils.fromString = fromString;\r\n    function toUserSettingsUS(keyCode) {\r\n        return userSettingsUSMap.keyCodeToStr(keyCode);\r\n    }\r\n    KeyCodeUtils.toUserSettingsUS = toUserSettingsUS;\r\n    function toUserSettingsGeneral(keyCode) {\r\n        return userSettingsGeneralMap.keyCodeToStr(keyCode);\r\n    }\r\n    KeyCodeUtils.toUserSettingsGeneral = toUserSettingsGeneral;\r\n    function fromUserSettings(key) {\r\n        return userSettingsUSMap.strToKeyCode(key) || userSettingsGeneralMap.strToKeyCode(key);\r\n    }\r\n    KeyCodeUtils.fromUserSettings = fromUserSettings;\r\n})(KeyCodeUtils || (KeyCodeUtils = {}));\r\nexport function KeyChord(firstPart, secondPart) {\r\n    var chordPart = ((secondPart & 0x0000ffff) << 16) >>> 0;\r\n    return (firstPart | chordPart) >>> 0;\r\n}\r\nexport function createKeybinding(keybinding, OS) {\r\n    if (keybinding === 0) {\r\n        return null;\r\n    }\r\n    var firstPart = (keybinding & 0x0000ffff) >>> 0;\r\n    var chordPart = (keybinding & 0xffff0000) >>> 16;\r\n    if (chordPart !== 0) {\r\n        return new ChordKeybinding(createSimpleKeybinding(firstPart, OS), createSimpleKeybinding(chordPart, OS));\r\n    }\r\n    return createSimpleKeybinding(firstPart, OS);\r\n}\r\nexport function createSimpleKeybinding(keybinding, OS) {\r\n    var ctrlCmd = (keybinding & 2048 /* CtrlCmd */ ? true : false);\r\n    var winCtrl = (keybinding & 256 /* WinCtrl */ ? true : false);\r\n    var ctrlKey = (OS === 2 /* Macintosh */ ? winCtrl : ctrlCmd);\r\n    var shiftKey = (keybinding & 1024 /* Shift */ ? true : false);\r\n    var altKey = (keybinding & 512 /* Alt */ ? true : false);\r\n    var metaKey = (OS === 2 /* Macintosh */ ? ctrlCmd : winCtrl);\r\n    var keyCode = (keybinding & 255 /* KeyCode */);\r\n    return new SimpleKeybinding(ctrlKey, shiftKey, altKey, metaKey, keyCode);\r\n}\r\nvar SimpleKeybinding = /** @class */ (function () {\r\n    function SimpleKeybinding(ctrlKey, shiftKey, altKey, metaKey, keyCode) {\r\n        this.type = 1 /* Simple */;\r\n        this.ctrlKey = ctrlKey;\r\n        this.shiftKey = shiftKey;\r\n        this.altKey = altKey;\r\n        this.metaKey = metaKey;\r\n        this.keyCode = keyCode;\r\n    }\r\n    SimpleKeybinding.prototype.equals = function (other) {\r\n        if (other.type !== 1 /* Simple */) {\r\n            return false;\r\n        }\r\n        return (this.ctrlKey === other.ctrlKey\r\n            && this.shiftKey === other.shiftKey\r\n            && this.altKey === other.altKey\r\n            && this.metaKey === other.metaKey\r\n            && this.keyCode === other.keyCode);\r\n    };\r\n    SimpleKeybinding.prototype.isModifierKey = function () {\r\n        return (this.keyCode === 0 /* Unknown */\r\n            || this.keyCode === 5 /* Ctrl */\r\n            || this.keyCode === 57 /* Meta */\r\n            || this.keyCode === 6 /* Alt */\r\n            || this.keyCode === 4 /* Shift */);\r\n    };\r\n    /**\r\n     * Does this keybinding refer to the key code of a modifier and it also has the modifier flag?\r\n     */\r\n    SimpleKeybinding.prototype.isDuplicateModifierCase = function () {\r\n        return ((this.ctrlKey && this.keyCode === 5 /* Ctrl */)\r\n            || (this.shiftKey && this.keyCode === 4 /* Shift */)\r\n            || (this.altKey && this.keyCode === 6 /* Alt */)\r\n            || (this.metaKey && this.keyCode === 57 /* Meta */));\r\n    };\r\n    return SimpleKeybinding;\r\n}());\r\nexport { SimpleKeybinding };\r\nvar ChordKeybinding = /** @class */ (function () {\r\n    function ChordKeybinding(firstPart, chordPart) {\r\n        this.type = 2 /* Chord */;\r\n        this.firstPart = firstPart;\r\n        this.chordPart = chordPart;\r\n    }\r\n    return ChordKeybinding;\r\n}());\r\nexport { ChordKeybinding };\r\nvar ResolvedKeybindingPart = /** @class */ (function () {\r\n    function ResolvedKeybindingPart(ctrlKey, shiftKey, altKey, metaKey, kbLabel, kbAriaLabel) {\r\n        this.ctrlKey = ctrlKey;\r\n        this.shiftKey = shiftKey;\r\n        this.altKey = altKey;\r\n        this.metaKey = metaKey;\r\n        this.keyLabel = kbLabel;\r\n        this.keyAriaLabel = kbAriaLabel;\r\n    }\r\n    return ResolvedKeybindingPart;\r\n}());\r\nexport { ResolvedKeybindingPart };\r\n/**\r\n * A resolved keybinding. Can be a simple keybinding or a chord keybinding.\r\n */\r\nvar ResolvedKeybinding = /** @class */ (function () {\r\n    function ResolvedKeybinding() {\r\n    }\r\n    return ResolvedKeybinding;\r\n}());\r\nexport { ResolvedKeybinding };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Position } from './position.js';\r\nimport { Range } from './range.js';\r\n/**\r\n * A selection in the editor.\r\n * The selection is a range that has an orientation.\r\n */\r\nvar Selection = /** @class */ (function (_super) {\r\n    __extends(Selection, _super);\r\n    function Selection(selectionStartLineNumber, selectionStartColumn, positionLineNumber, positionColumn) {\r\n        var _this = _super.call(this, selectionStartLineNumber, selectionStartColumn, positionLineNumber, positionColumn) || this;\r\n        _this.selectionStartLineNumber = selectionStartLineNumber;\r\n        _this.selectionStartColumn = selectionStartColumn;\r\n        _this.positionLineNumber = positionLineNumber;\r\n        _this.positionColumn = positionColumn;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Clone this selection.\r\n     */\r\n    Selection.prototype.clone = function () {\r\n        return new Selection(this.selectionStartLineNumber, this.selectionStartColumn, this.positionLineNumber, this.positionColumn);\r\n    };\r\n    /**\r\n     * Transform to a human-readable representation.\r\n     */\r\n    Selection.prototype.toString = function () {\r\n        return '[' + this.selectionStartLineNumber + ',' + this.selectionStartColumn + ' -> ' + this.positionLineNumber + ',' + this.positionColumn + ']';\r\n    };\r\n    /**\r\n     * Test if equals other selection.\r\n     */\r\n    Selection.prototype.equalsSelection = function (other) {\r\n        return (Selection.selectionsEqual(this, other));\r\n    };\r\n    /**\r\n     * Test if the two selections are equal.\r\n     */\r\n    Selection.selectionsEqual = function (a, b) {\r\n        return (a.selectionStartLineNumber === b.selectionStartLineNumber &&\r\n            a.selectionStartColumn === b.selectionStartColumn &&\r\n            a.positionLineNumber === b.positionLineNumber &&\r\n            a.positionColumn === b.positionColumn);\r\n    };\r\n    /**\r\n     * Get directions (LTR or RTL).\r\n     */\r\n    Selection.prototype.getDirection = function () {\r\n        if (this.selectionStartLineNumber === this.startLineNumber && this.selectionStartColumn === this.startColumn) {\r\n            return 0 /* LTR */;\r\n        }\r\n        return 1 /* RTL */;\r\n    };\r\n    /**\r\n     * Create a new selection with a different `positionLineNumber` and `positionColumn`.\r\n     */\r\n    Selection.prototype.setEndPosition = function (endLineNumber, endColumn) {\r\n        if (this.getDirection() === 0 /* LTR */) {\r\n            return new Selection(this.startLineNumber, this.startColumn, endLineNumber, endColumn);\r\n        }\r\n        return new Selection(endLineNumber, endColumn, this.startLineNumber, this.startColumn);\r\n    };\r\n    /**\r\n     * Get the position at `positionLineNumber` and `positionColumn`.\r\n     */\r\n    Selection.prototype.getPosition = function () {\r\n        return new Position(this.positionLineNumber, this.positionColumn);\r\n    };\r\n    /**\r\n     * Create a new selection with a different `selectionStartLineNumber` and `selectionStartColumn`.\r\n     */\r\n    Selection.prototype.setStartPosition = function (startLineNumber, startColumn) {\r\n        if (this.getDirection() === 0 /* LTR */) {\r\n            return new Selection(startLineNumber, startColumn, this.endLineNumber, this.endColumn);\r\n        }\r\n        return new Selection(this.endLineNumber, this.endColumn, startLineNumber, startColumn);\r\n    };\r\n    // ----\r\n    /**\r\n     * Create a `Selection` from one or two positions\r\n     */\r\n    Selection.fromPositions = function (start, end) {\r\n        if (end === void 0) { end = start; }\r\n        return new Selection(start.lineNumber, start.column, end.lineNumber, end.column);\r\n    };\r\n    /**\r\n     * Create a `Selection` from an `ISelection`.\r\n     */\r\n    Selection.liftSelection = function (sel) {\r\n        return new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\r\n    };\r\n    /**\r\n     * `a` equals `b`.\r\n     */\r\n    Selection.selectionsArrEqual = function (a, b) {\r\n        if (a && !b || !a && b) {\r\n            return false;\r\n        }\r\n        if (!a && !b) {\r\n            return true;\r\n        }\r\n        if (a.length !== b.length) {\r\n            return false;\r\n        }\r\n        for (var i = 0, len = a.length; i < len; i++) {\r\n            if (!this.selectionsEqual(a[i], b[i])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Test if `obj` is an `ISelection`.\r\n     */\r\n    Selection.isISelection = function (obj) {\r\n        return (obj\r\n            && (typeof obj.selectionStartLineNumber === 'number')\r\n            && (typeof obj.selectionStartColumn === 'number')\r\n            && (typeof obj.positionLineNumber === 'number')\r\n            && (typeof obj.positionColumn === 'number'));\r\n    };\r\n    /**\r\n     * Create with a direction.\r\n     */\r\n    Selection.createWithDirection = function (startLineNumber, startColumn, endLineNumber, endColumn, direction) {\r\n        if (direction === 0 /* LTR */) {\r\n            return new Selection(startLineNumber, startColumn, endLineNumber, endColumn);\r\n        }\r\n        return new Selection(endLineNumber, endColumn, startLineNumber, startColumn);\r\n    };\r\n    return Selection;\r\n}(Range));\r\nexport { Selection };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar Token = /** @class */ (function () {\r\n    function Token(offset, type, language) {\r\n        this.offset = offset | 0; // @perf\r\n        this.type = type;\r\n        this.language = language;\r\n    }\r\n    Token.prototype.toString = function () {\r\n        return '(' + this.offset + ', ' + this.type + ')';\r\n    };\r\n    return Token;\r\n}());\r\nexport { Token };\r\nvar TokenizationResult = /** @class */ (function () {\r\n    function TokenizationResult(tokens, endState) {\r\n        this.tokens = tokens;\r\n        this.endState = endState;\r\n    }\r\n    return TokenizationResult;\r\n}());\r\nexport { TokenizationResult };\r\nvar TokenizationResult2 = /** @class */ (function () {\r\n    function TokenizationResult2(tokens, endState) {\r\n        this.tokens = tokens;\r\n        this.endState = endState;\r\n    }\r\n    return TokenizationResult2;\r\n}());\r\nexport { TokenizationResult2 };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n// THIS IS A GENERATED FILE. DO NOT EDIT DIRECTLY.\r\nexport var MarkerTag;\r\n(function (MarkerTag) {\r\n    MarkerTag[MarkerTag[\"Unnecessary\"] = 1] = \"Unnecessary\";\r\n})(MarkerTag || (MarkerTag = {}));\r\nexport var MarkerSeverity;\r\n(function (MarkerSeverity) {\r\n    MarkerSeverity[MarkerSeverity[\"Hint\"] = 1] = \"Hint\";\r\n    MarkerSeverity[MarkerSeverity[\"Info\"] = 2] = \"Info\";\r\n    MarkerSeverity[MarkerSeverity[\"Warning\"] = 4] = \"Warning\";\r\n    MarkerSeverity[MarkerSeverity[\"Error\"] = 8] = \"Error\";\r\n})(MarkerSeverity || (MarkerSeverity = {}));\r\n/**\r\n * Virtual Key Codes, the value does not hold any inherent meaning.\r\n * Inspired somewhat from https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx\r\n * But these are \"more general\", as they should work across browsers & OS`s.\r\n */\r\nexport var KeyCode;\r\n(function (KeyCode) {\r\n    /**\r\n     * Placed first to cover the 0 value of the enum.\r\n     */\r\n    KeyCode[KeyCode[\"Unknown\"] = 0] = \"Unknown\";\r\n    KeyCode[KeyCode[\"Backspace\"] = 1] = \"Backspace\";\r\n    KeyCode[KeyCode[\"Tab\"] = 2] = \"Tab\";\r\n    KeyCode[KeyCode[\"Enter\"] = 3] = \"Enter\";\r\n    KeyCode[KeyCode[\"Shift\"] = 4] = \"Shift\";\r\n    KeyCode[KeyCode[\"Ctrl\"] = 5] = \"Ctrl\";\r\n    KeyCode[KeyCode[\"Alt\"] = 6] = \"Alt\";\r\n    KeyCode[KeyCode[\"PauseBreak\"] = 7] = \"PauseBreak\";\r\n    KeyCode[KeyCode[\"CapsLock\"] = 8] = \"CapsLock\";\r\n    KeyCode[KeyCode[\"Escape\"] = 9] = \"Escape\";\r\n    KeyCode[KeyCode[\"Space\"] = 10] = \"Space\";\r\n    KeyCode[KeyCode[\"PageUp\"] = 11] = \"PageUp\";\r\n    KeyCode[KeyCode[\"PageDown\"] = 12] = \"PageDown\";\r\n    KeyCode[KeyCode[\"End\"] = 13] = \"End\";\r\n    KeyCode[KeyCode[\"Home\"] = 14] = \"Home\";\r\n    KeyCode[KeyCode[\"LeftArrow\"] = 15] = \"LeftArrow\";\r\n    KeyCode[KeyCode[\"UpArrow\"] = 16] = \"UpArrow\";\r\n    KeyCode[KeyCode[\"RightArrow\"] = 17] = \"RightArrow\";\r\n    KeyCode[KeyCode[\"DownArrow\"] = 18] = \"DownArrow\";\r\n    KeyCode[KeyCode[\"Insert\"] = 19] = \"Insert\";\r\n    KeyCode[KeyCode[\"Delete\"] = 20] = \"Delete\";\r\n    KeyCode[KeyCode[\"KEY_0\"] = 21] = \"KEY_0\";\r\n    KeyCode[KeyCode[\"KEY_1\"] = 22] = \"KEY_1\";\r\n    KeyCode[KeyCode[\"KEY_2\"] = 23] = \"KEY_2\";\r\n    KeyCode[KeyCode[\"KEY_3\"] = 24] = \"KEY_3\";\r\n    KeyCode[KeyCode[\"KEY_4\"] = 25] = \"KEY_4\";\r\n    KeyCode[KeyCode[\"KEY_5\"] = 26] = \"KEY_5\";\r\n    KeyCode[KeyCode[\"KEY_6\"] = 27] = \"KEY_6\";\r\n    KeyCode[KeyCode[\"KEY_7\"] = 28] = \"KEY_7\";\r\n    KeyCode[KeyCode[\"KEY_8\"] = 29] = \"KEY_8\";\r\n    KeyCode[KeyCode[\"KEY_9\"] = 30] = \"KEY_9\";\r\n    KeyCode[KeyCode[\"KEY_A\"] = 31] = \"KEY_A\";\r\n    KeyCode[KeyCode[\"KEY_B\"] = 32] = \"KEY_B\";\r\n    KeyCode[KeyCode[\"KEY_C\"] = 33] = \"KEY_C\";\r\n    KeyCode[KeyCode[\"KEY_D\"] = 34] = \"KEY_D\";\r\n    KeyCode[KeyCode[\"KEY_E\"] = 35] = \"KEY_E\";\r\n    KeyCode[KeyCode[\"KEY_F\"] = 36] = \"KEY_F\";\r\n    KeyCode[KeyCode[\"KEY_G\"] = 37] = \"KEY_G\";\r\n    KeyCode[KeyCode[\"KEY_H\"] = 38] = \"KEY_H\";\r\n    KeyCode[KeyCode[\"KEY_I\"] = 39] = \"KEY_I\";\r\n    KeyCode[KeyCode[\"KEY_J\"] = 40] = \"KEY_J\";\r\n    KeyCode[KeyCode[\"KEY_K\"] = 41] = \"KEY_K\";\r\n    KeyCode[KeyCode[\"KEY_L\"] = 42] = \"KEY_L\";\r\n    KeyCode[KeyCode[\"KEY_M\"] = 43] = \"KEY_M\";\r\n    KeyCode[KeyCode[\"KEY_N\"] = 44] = \"KEY_N\";\r\n    KeyCode[KeyCode[\"KEY_O\"] = 45] = \"KEY_O\";\r\n    KeyCode[KeyCode[\"KEY_P\"] = 46] = \"KEY_P\";\r\n    KeyCode[KeyCode[\"KEY_Q\"] = 47] = \"KEY_Q\";\r\n    KeyCode[KeyCode[\"KEY_R\"] = 48] = \"KEY_R\";\r\n    KeyCode[KeyCode[\"KEY_S\"] = 49] = \"KEY_S\";\r\n    KeyCode[KeyCode[\"KEY_T\"] = 50] = \"KEY_T\";\r\n    KeyCode[KeyCode[\"KEY_U\"] = 51] = \"KEY_U\";\r\n    KeyCode[KeyCode[\"KEY_V\"] = 52] = \"KEY_V\";\r\n    KeyCode[KeyCode[\"KEY_W\"] = 53] = \"KEY_W\";\r\n    KeyCode[KeyCode[\"KEY_X\"] = 54] = \"KEY_X\";\r\n    KeyCode[KeyCode[\"KEY_Y\"] = 55] = \"KEY_Y\";\r\n    KeyCode[KeyCode[\"KEY_Z\"] = 56] = \"KEY_Z\";\r\n    KeyCode[KeyCode[\"Meta\"] = 57] = \"Meta\";\r\n    KeyCode[KeyCode[\"ContextMenu\"] = 58] = \"ContextMenu\";\r\n    KeyCode[KeyCode[\"F1\"] = 59] = \"F1\";\r\n    KeyCode[KeyCode[\"F2\"] = 60] = \"F2\";\r\n    KeyCode[KeyCode[\"F3\"] = 61] = \"F3\";\r\n    KeyCode[KeyCode[\"F4\"] = 62] = \"F4\";\r\n    KeyCode[KeyCode[\"F5\"] = 63] = \"F5\";\r\n    KeyCode[KeyCode[\"F6\"] = 64] = \"F6\";\r\n    KeyCode[KeyCode[\"F7\"] = 65] = \"F7\";\r\n    KeyCode[KeyCode[\"F8\"] = 66] = \"F8\";\r\n    KeyCode[KeyCode[\"F9\"] = 67] = \"F9\";\r\n    KeyCode[KeyCode[\"F10\"] = 68] = \"F10\";\r\n    KeyCode[KeyCode[\"F11\"] = 69] = \"F11\";\r\n    KeyCode[KeyCode[\"F12\"] = 70] = \"F12\";\r\n    KeyCode[KeyCode[\"F13\"] = 71] = \"F13\";\r\n    KeyCode[KeyCode[\"F14\"] = 72] = \"F14\";\r\n    KeyCode[KeyCode[\"F15\"] = 73] = \"F15\";\r\n    KeyCode[KeyCode[\"F16\"] = 74] = \"F16\";\r\n    KeyCode[KeyCode[\"F17\"] = 75] = \"F17\";\r\n    KeyCode[KeyCode[\"F18\"] = 76] = \"F18\";\r\n    KeyCode[KeyCode[\"F19\"] = 77] = \"F19\";\r\n    KeyCode[KeyCode[\"NumLock\"] = 78] = \"NumLock\";\r\n    KeyCode[KeyCode[\"ScrollLock\"] = 79] = \"ScrollLock\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the ';:' key\r\n     */\r\n    KeyCode[KeyCode[\"US_SEMICOLON\"] = 80] = \"US_SEMICOLON\";\r\n    /**\r\n     * For any country/region, the '+' key\r\n     * For the US standard keyboard, the '=+' key\r\n     */\r\n    KeyCode[KeyCode[\"US_EQUAL\"] = 81] = \"US_EQUAL\";\r\n    /**\r\n     * For any country/region, the ',' key\r\n     * For the US standard keyboard, the ',<' key\r\n     */\r\n    KeyCode[KeyCode[\"US_COMMA\"] = 82] = \"US_COMMA\";\r\n    /**\r\n     * For any country/region, the '-' key\r\n     * For the US standard keyboard, the '-_' key\r\n     */\r\n    KeyCode[KeyCode[\"US_MINUS\"] = 83] = \"US_MINUS\";\r\n    /**\r\n     * For any country/region, the '.' key\r\n     * For the US standard keyboard, the '.>' key\r\n     */\r\n    KeyCode[KeyCode[\"US_DOT\"] = 84] = \"US_DOT\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '/?' key\r\n     */\r\n    KeyCode[KeyCode[\"US_SLASH\"] = 85] = \"US_SLASH\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '`~' key\r\n     */\r\n    KeyCode[KeyCode[\"US_BACKTICK\"] = 86] = \"US_BACKTICK\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '[{' key\r\n     */\r\n    KeyCode[KeyCode[\"US_OPEN_SQUARE_BRACKET\"] = 87] = \"US_OPEN_SQUARE_BRACKET\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '\\|' key\r\n     */\r\n    KeyCode[KeyCode[\"US_BACKSLASH\"] = 88] = \"US_BACKSLASH\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the ']}' key\r\n     */\r\n    KeyCode[KeyCode[\"US_CLOSE_SQUARE_BRACKET\"] = 89] = \"US_CLOSE_SQUARE_BRACKET\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the ''\"' key\r\n     */\r\n    KeyCode[KeyCode[\"US_QUOTE\"] = 90] = \"US_QUOTE\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     */\r\n    KeyCode[KeyCode[\"OEM_8\"] = 91] = \"OEM_8\";\r\n    /**\r\n     * Either the angle bracket key or the backslash key on the RT 102-key keyboard.\r\n     */\r\n    KeyCode[KeyCode[\"OEM_102\"] = 92] = \"OEM_102\";\r\n    KeyCode[KeyCode[\"NUMPAD_0\"] = 93] = \"NUMPAD_0\";\r\n    KeyCode[KeyCode[\"NUMPAD_1\"] = 94] = \"NUMPAD_1\";\r\n    KeyCode[KeyCode[\"NUMPAD_2\"] = 95] = \"NUMPAD_2\";\r\n    KeyCode[KeyCode[\"NUMPAD_3\"] = 96] = \"NUMPAD_3\";\r\n    KeyCode[KeyCode[\"NUMPAD_4\"] = 97] = \"NUMPAD_4\";\r\n    KeyCode[KeyCode[\"NUMPAD_5\"] = 98] = \"NUMPAD_5\";\r\n    KeyCode[KeyCode[\"NUMPAD_6\"] = 99] = \"NUMPAD_6\";\r\n    KeyCode[KeyCode[\"NUMPAD_7\"] = 100] = \"NUMPAD_7\";\r\n    KeyCode[KeyCode[\"NUMPAD_8\"] = 101] = \"NUMPAD_8\";\r\n    KeyCode[KeyCode[\"NUMPAD_9\"] = 102] = \"NUMPAD_9\";\r\n    KeyCode[KeyCode[\"NUMPAD_MULTIPLY\"] = 103] = \"NUMPAD_MULTIPLY\";\r\n    KeyCode[KeyCode[\"NUMPAD_ADD\"] = 104] = \"NUMPAD_ADD\";\r\n    KeyCode[KeyCode[\"NUMPAD_SEPARATOR\"] = 105] = \"NUMPAD_SEPARATOR\";\r\n    KeyCode[KeyCode[\"NUMPAD_SUBTRACT\"] = 106] = \"NUMPAD_SUBTRACT\";\r\n    KeyCode[KeyCode[\"NUMPAD_DECIMAL\"] = 107] = \"NUMPAD_DECIMAL\";\r\n    KeyCode[KeyCode[\"NUMPAD_DIVIDE\"] = 108] = \"NUMPAD_DIVIDE\";\r\n    /**\r\n     * Cover all key codes when IME is processing input.\r\n     */\r\n    KeyCode[KeyCode[\"KEY_IN_COMPOSITION\"] = 109] = \"KEY_IN_COMPOSITION\";\r\n    KeyCode[KeyCode[\"ABNT_C1\"] = 110] = \"ABNT_C1\";\r\n    KeyCode[KeyCode[\"ABNT_C2\"] = 111] = \"ABNT_C2\";\r\n    /**\r\n     * Placed last to cover the length of the enum.\r\n     * Please do not depend on this value!\r\n     */\r\n    KeyCode[KeyCode[\"MAX_VALUE\"] = 112] = \"MAX_VALUE\";\r\n})(KeyCode || (KeyCode = {}));\r\n/**\r\n * The direction of a selection.\r\n */\r\nexport var SelectionDirection;\r\n(function (SelectionDirection) {\r\n    /**\r\n     * The selection starts above where it ends.\r\n     */\r\n    SelectionDirection[SelectionDirection[\"LTR\"] = 0] = \"LTR\";\r\n    /**\r\n     * The selection starts below where it ends.\r\n     */\r\n    SelectionDirection[SelectionDirection[\"RTL\"] = 1] = \"RTL\";\r\n})(SelectionDirection || (SelectionDirection = {}));\r\nexport var ScrollbarVisibility;\r\n(function (ScrollbarVisibility) {\r\n    ScrollbarVisibility[ScrollbarVisibility[\"Auto\"] = 1] = \"Auto\";\r\n    ScrollbarVisibility[ScrollbarVisibility[\"Hidden\"] = 2] = \"Hidden\";\r\n    ScrollbarVisibility[ScrollbarVisibility[\"Visible\"] = 3] = \"Visible\";\r\n})(ScrollbarVisibility || (ScrollbarVisibility = {}));\r\n/**\r\n * Vertical Lane in the overview ruler of the editor.\r\n */\r\nexport var OverviewRulerLane;\r\n(function (OverviewRulerLane) {\r\n    OverviewRulerLane[OverviewRulerLane[\"Left\"] = 1] = \"Left\";\r\n    OverviewRulerLane[OverviewRulerLane[\"Center\"] = 2] = \"Center\";\r\n    OverviewRulerLane[OverviewRulerLane[\"Right\"] = 4] = \"Right\";\r\n    OverviewRulerLane[OverviewRulerLane[\"Full\"] = 7] = \"Full\";\r\n})(OverviewRulerLane || (OverviewRulerLane = {}));\r\n/**\r\n * End of line character preference.\r\n */\r\nexport var EndOfLinePreference;\r\n(function (EndOfLinePreference) {\r\n    /**\r\n     * Use the end of line character identified in the text buffer.\r\n     */\r\n    EndOfLinePreference[EndOfLinePreference[\"TextDefined\"] = 0] = \"TextDefined\";\r\n    /**\r\n     * Use line feed (\\n) as the end of line character.\r\n     */\r\n    EndOfLinePreference[EndOfLinePreference[\"LF\"] = 1] = \"LF\";\r\n    /**\r\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\r\n     */\r\n    EndOfLinePreference[EndOfLinePreference[\"CRLF\"] = 2] = \"CRLF\";\r\n})(EndOfLinePreference || (EndOfLinePreference = {}));\r\n/**\r\n * The default end of line to use when instantiating models.\r\n */\r\nexport var DefaultEndOfLine;\r\n(function (DefaultEndOfLine) {\r\n    /**\r\n     * Use line feed (\\n) as the end of line character.\r\n     */\r\n    DefaultEndOfLine[DefaultEndOfLine[\"LF\"] = 1] = \"LF\";\r\n    /**\r\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\r\n     */\r\n    DefaultEndOfLine[DefaultEndOfLine[\"CRLF\"] = 2] = \"CRLF\";\r\n})(DefaultEndOfLine || (DefaultEndOfLine = {}));\r\n/**\r\n * End of line character preference.\r\n */\r\nexport var EndOfLineSequence;\r\n(function (EndOfLineSequence) {\r\n    /**\r\n     * Use line feed (\\n) as the end of line character.\r\n     */\r\n    EndOfLineSequence[EndOfLineSequence[\"LF\"] = 0] = \"LF\";\r\n    /**\r\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\r\n     */\r\n    EndOfLineSequence[EndOfLineSequence[\"CRLF\"] = 1] = \"CRLF\";\r\n})(EndOfLineSequence || (EndOfLineSequence = {}));\r\n/**\r\n * Describes the behavior of decorations when typing/editing near their edges.\r\n * Note: Please do not edit the values, as they very carefully match `DecorationRangeBehavior`\r\n */\r\nexport var TrackedRangeStickiness;\r\n(function (TrackedRangeStickiness) {\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"AlwaysGrowsWhenTypingAtEdges\"] = 0] = \"AlwaysGrowsWhenTypingAtEdges\";\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"NeverGrowsWhenTypingAtEdges\"] = 1] = \"NeverGrowsWhenTypingAtEdges\";\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"GrowsOnlyWhenTypingBefore\"] = 2] = \"GrowsOnlyWhenTypingBefore\";\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"GrowsOnlyWhenTypingAfter\"] = 3] = \"GrowsOnlyWhenTypingAfter\";\r\n})(TrackedRangeStickiness || (TrackedRangeStickiness = {}));\r\nexport var ScrollType;\r\n(function (ScrollType) {\r\n    ScrollType[ScrollType[\"Smooth\"] = 0] = \"Smooth\";\r\n    ScrollType[ScrollType[\"Immediate\"] = 1] = \"Immediate\";\r\n})(ScrollType || (ScrollType = {}));\r\n/**\r\n * Describes the reason the cursor has changed its position.\r\n */\r\nexport var CursorChangeReason;\r\n(function (CursorChangeReason) {\r\n    /**\r\n     * Unknown or not set.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"NotSet\"] = 0] = \"NotSet\";\r\n    /**\r\n     * A `model.setValue()` was called.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"ContentFlush\"] = 1] = \"ContentFlush\";\r\n    /**\r\n     * The `model` has been changed outside of this cursor and the cursor recovers its position from associated markers.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"RecoverFromMarkers\"] = 2] = \"RecoverFromMarkers\";\r\n    /**\r\n     * There was an explicit user gesture.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Explicit\"] = 3] = \"Explicit\";\r\n    /**\r\n     * There was a Paste.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Paste\"] = 4] = \"Paste\";\r\n    /**\r\n     * There was an Undo.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Undo\"] = 5] = \"Undo\";\r\n    /**\r\n     * There was a Redo.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Redo\"] = 6] = \"Redo\";\r\n})(CursorChangeReason || (CursorChangeReason = {}));\r\nexport var RenderMinimap;\r\n(function (RenderMinimap) {\r\n    RenderMinimap[RenderMinimap[\"None\"] = 0] = \"None\";\r\n    RenderMinimap[RenderMinimap[\"Small\"] = 1] = \"Small\";\r\n    RenderMinimap[RenderMinimap[\"Large\"] = 2] = \"Large\";\r\n    RenderMinimap[RenderMinimap[\"SmallBlocks\"] = 3] = \"SmallBlocks\";\r\n    RenderMinimap[RenderMinimap[\"LargeBlocks\"] = 4] = \"LargeBlocks\";\r\n})(RenderMinimap || (RenderMinimap = {}));\r\n/**\r\n * Describes how to indent wrapped lines.\r\n */\r\nexport var WrappingIndent;\r\n(function (WrappingIndent) {\r\n    /**\r\n     * No indentation => wrapped lines begin at column 1.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Same => wrapped lines get the same indentation as the parent.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"Same\"] = 1] = \"Same\";\r\n    /**\r\n     * Indent => wrapped lines get +1 indentation toward the parent.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"Indent\"] = 2] = \"Indent\";\r\n    /**\r\n     * DeepIndent => wrapped lines get +2 indentation toward the parent.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"DeepIndent\"] = 3] = \"DeepIndent\";\r\n})(WrappingIndent || (WrappingIndent = {}));\r\n/**\r\n * The kind of animation in which the editor's cursor should be rendered.\r\n */\r\nexport var TextEditorCursorBlinkingStyle;\r\n(function (TextEditorCursorBlinkingStyle) {\r\n    /**\r\n     * Hidden\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Hidden\"] = 0] = \"Hidden\";\r\n    /**\r\n     * Blinking\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Blink\"] = 1] = \"Blink\";\r\n    /**\r\n     * Blinking with smooth fading\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Smooth\"] = 2] = \"Smooth\";\r\n    /**\r\n     * Blinking with prolonged filled state and smooth fading\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Phase\"] = 3] = \"Phase\";\r\n    /**\r\n     * Expand collapse animation on the y axis\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Expand\"] = 4] = \"Expand\";\r\n    /**\r\n     * No-Blinking\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Solid\"] = 5] = \"Solid\";\r\n})(TextEditorCursorBlinkingStyle || (TextEditorCursorBlinkingStyle = {}));\r\n/**\r\n * The style in which the editor's cursor should be rendered.\r\n */\r\nexport var TextEditorCursorStyle;\r\n(function (TextEditorCursorStyle) {\r\n    /**\r\n     * As a vertical line (sitting between two characters).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Line\"] = 1] = \"Line\";\r\n    /**\r\n     * As a block (sitting on top of a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Block\"] = 2] = \"Block\";\r\n    /**\r\n     * As a horizontal line (sitting under a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Underline\"] = 3] = \"Underline\";\r\n    /**\r\n     * As a thin vertical line (sitting between two characters).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"LineThin\"] = 4] = \"LineThin\";\r\n    /**\r\n     * As an outlined block (sitting on top of a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"BlockOutline\"] = 5] = \"BlockOutline\";\r\n    /**\r\n     * As a thin horizontal line (sitting under a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"UnderlineThin\"] = 6] = \"UnderlineThin\";\r\n})(TextEditorCursorStyle || (TextEditorCursorStyle = {}));\r\nexport var RenderLineNumbersType;\r\n(function (RenderLineNumbersType) {\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Off\"] = 0] = \"Off\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"On\"] = 1] = \"On\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Relative\"] = 2] = \"Relative\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Interval\"] = 3] = \"Interval\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Custom\"] = 4] = \"Custom\";\r\n})(RenderLineNumbersType || (RenderLineNumbersType = {}));\r\n/**\r\n * A positioning preference for rendering content widgets.\r\n */\r\nexport var ContentWidgetPositionPreference;\r\n(function (ContentWidgetPositionPreference) {\r\n    /**\r\n     * Place the content widget exactly at a position\r\n     */\r\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"EXACT\"] = 0] = \"EXACT\";\r\n    /**\r\n     * Place the content widget above a position\r\n     */\r\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"ABOVE\"] = 1] = \"ABOVE\";\r\n    /**\r\n     * Place the content widget below a position\r\n     */\r\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"BELOW\"] = 2] = \"BELOW\";\r\n})(ContentWidgetPositionPreference || (ContentWidgetPositionPreference = {}));\r\n/**\r\n * A positioning preference for rendering overlay widgets.\r\n */\r\nexport var OverlayWidgetPositionPreference;\r\n(function (OverlayWidgetPositionPreference) {\r\n    /**\r\n     * Position the overlay widget in the top right corner\r\n     */\r\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"TOP_RIGHT_CORNER\"] = 0] = \"TOP_RIGHT_CORNER\";\r\n    /**\r\n     * Position the overlay widget in the bottom right corner\r\n     */\r\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"BOTTOM_RIGHT_CORNER\"] = 1] = \"BOTTOM_RIGHT_CORNER\";\r\n    /**\r\n     * Position the overlay widget in the top center\r\n     */\r\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"TOP_CENTER\"] = 2] = \"TOP_CENTER\";\r\n})(OverlayWidgetPositionPreference || (OverlayWidgetPositionPreference = {}));\r\n/**\r\n * Type of hit element with the mouse in the editor.\r\n */\r\nexport var MouseTargetType;\r\n(function (MouseTargetType) {\r\n    /**\r\n     * Mouse is on top of an unknown element.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\r\n    /**\r\n     * Mouse is on top of the textarea used for input.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"TEXTAREA\"] = 1] = \"TEXTAREA\";\r\n    /**\r\n     * Mouse is on top of the glyph margin\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_GLYPH_MARGIN\"] = 2] = \"GUTTER_GLYPH_MARGIN\";\r\n    /**\r\n     * Mouse is on top of the line numbers\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_LINE_NUMBERS\"] = 3] = \"GUTTER_LINE_NUMBERS\";\r\n    /**\r\n     * Mouse is on top of the line decorations\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_LINE_DECORATIONS\"] = 4] = \"GUTTER_LINE_DECORATIONS\";\r\n    /**\r\n     * Mouse is on top of the whitespace left in the gutter by a view zone.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_VIEW_ZONE\"] = 5] = \"GUTTER_VIEW_ZONE\";\r\n    /**\r\n     * Mouse is on top of text in the content.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_TEXT\"] = 6] = \"CONTENT_TEXT\";\r\n    /**\r\n     * Mouse is on top of empty space in the content (e.g. after line text or below last line)\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_EMPTY\"] = 7] = \"CONTENT_EMPTY\";\r\n    /**\r\n     * Mouse is on top of a view zone in the content.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_VIEW_ZONE\"] = 8] = \"CONTENT_VIEW_ZONE\";\r\n    /**\r\n     * Mouse is on top of a content widget.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_WIDGET\"] = 9] = \"CONTENT_WIDGET\";\r\n    /**\r\n     * Mouse is on top of the decorations overview ruler.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"OVERVIEW_RULER\"] = 10] = \"OVERVIEW_RULER\";\r\n    /**\r\n     * Mouse is on top of a scrollbar.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"SCROLLBAR\"] = 11] = \"SCROLLBAR\";\r\n    /**\r\n     * Mouse is on top of an overlay widget.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"OVERLAY_WIDGET\"] = 12] = \"OVERLAY_WIDGET\";\r\n    /**\r\n     * Mouse is outside of the editor.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"OUTSIDE_EDITOR\"] = 13] = \"OUTSIDE_EDITOR\";\r\n})(MouseTargetType || (MouseTargetType = {}));\r\n/**\r\n * Describes what to do with the indentation when pressing Enter.\r\n */\r\nexport var IndentAction;\r\n(function (IndentAction) {\r\n    /**\r\n     * Insert new line and copy the previous line's indentation.\r\n     */\r\n    IndentAction[IndentAction[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Insert new line and indent once (relative to the previous line's indentation).\r\n     */\r\n    IndentAction[IndentAction[\"Indent\"] = 1] = \"Indent\";\r\n    /**\r\n     * Insert two new lines:\r\n     *  - the first one indented which will hold the cursor\r\n     *  - the second one at the same indentation level\r\n     */\r\n    IndentAction[IndentAction[\"IndentOutdent\"] = 2] = \"IndentOutdent\";\r\n    /**\r\n     * Insert new line and outdent once (relative to the previous line's indentation).\r\n     */\r\n    IndentAction[IndentAction[\"Outdent\"] = 3] = \"Outdent\";\r\n})(IndentAction || (IndentAction = {}));\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind[CompletionItemKind[\"Method\"] = 0] = \"Method\";\r\n    CompletionItemKind[CompletionItemKind[\"Function\"] = 1] = \"Function\";\r\n    CompletionItemKind[CompletionItemKind[\"Constructor\"] = 2] = \"Constructor\";\r\n    CompletionItemKind[CompletionItemKind[\"Field\"] = 3] = \"Field\";\r\n    CompletionItemKind[CompletionItemKind[\"Variable\"] = 4] = \"Variable\";\r\n    CompletionItemKind[CompletionItemKind[\"Class\"] = 5] = \"Class\";\r\n    CompletionItemKind[CompletionItemKind[\"Struct\"] = 6] = \"Struct\";\r\n    CompletionItemKind[CompletionItemKind[\"Interface\"] = 7] = \"Interface\";\r\n    CompletionItemKind[CompletionItemKind[\"Module\"] = 8] = \"Module\";\r\n    CompletionItemKind[CompletionItemKind[\"Property\"] = 9] = \"Property\";\r\n    CompletionItemKind[CompletionItemKind[\"Event\"] = 10] = \"Event\";\r\n    CompletionItemKind[CompletionItemKind[\"Operator\"] = 11] = \"Operator\";\r\n    CompletionItemKind[CompletionItemKind[\"Unit\"] = 12] = \"Unit\";\r\n    CompletionItemKind[CompletionItemKind[\"Value\"] = 13] = \"Value\";\r\n    CompletionItemKind[CompletionItemKind[\"Constant\"] = 14] = \"Constant\";\r\n    CompletionItemKind[CompletionItemKind[\"Enum\"] = 15] = \"Enum\";\r\n    CompletionItemKind[CompletionItemKind[\"EnumMember\"] = 16] = \"EnumMember\";\r\n    CompletionItemKind[CompletionItemKind[\"Keyword\"] = 17] = \"Keyword\";\r\n    CompletionItemKind[CompletionItemKind[\"Text\"] = 18] = \"Text\";\r\n    CompletionItemKind[CompletionItemKind[\"Color\"] = 19] = \"Color\";\r\n    CompletionItemKind[CompletionItemKind[\"File\"] = 20] = \"File\";\r\n    CompletionItemKind[CompletionItemKind[\"Reference\"] = 21] = \"Reference\";\r\n    CompletionItemKind[CompletionItemKind[\"Customcolor\"] = 22] = \"Customcolor\";\r\n    CompletionItemKind[CompletionItemKind[\"Folder\"] = 23] = \"Folder\";\r\n    CompletionItemKind[CompletionItemKind[\"TypeParameter\"] = 24] = \"TypeParameter\";\r\n    CompletionItemKind[CompletionItemKind[\"Snippet\"] = 25] = \"Snippet\";\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\nexport var CompletionItemInsertTextRule;\r\n(function (CompletionItemInsertTextRule) {\r\n    /**\r\n     * Adjust whitespace/indentation of multiline insert texts to\r\n     * match the current line indentation.\r\n     */\r\n    CompletionItemInsertTextRule[CompletionItemInsertTextRule[\"KeepWhitespace\"] = 1] = \"KeepWhitespace\";\r\n    /**\r\n     * `insertText` is a snippet.\r\n     */\r\n    CompletionItemInsertTextRule[CompletionItemInsertTextRule[\"InsertAsSnippet\"] = 4] = \"InsertAsSnippet\";\r\n})(CompletionItemInsertTextRule || (CompletionItemInsertTextRule = {}));\r\n/**\r\n * How a suggest provider was triggered.\r\n */\r\nexport var CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    CompletionTriggerKind[CompletionTriggerKind[\"Invoke\"] = 0] = \"Invoke\";\r\n    CompletionTriggerKind[CompletionTriggerKind[\"TriggerCharacter\"] = 1] = \"TriggerCharacter\";\r\n    CompletionTriggerKind[CompletionTriggerKind[\"TriggerForIncompleteCompletions\"] = 2] = \"TriggerForIncompleteCompletions\";\r\n})(CompletionTriggerKind || (CompletionTriggerKind = {}));\r\nexport var SignatureHelpTriggerReason;\r\n(function (SignatureHelpTriggerReason) {\r\n    SignatureHelpTriggerReason[SignatureHelpTriggerReason[\"Invoke\"] = 1] = \"Invoke\";\r\n    SignatureHelpTriggerReason[SignatureHelpTriggerReason[\"TriggerCharacter\"] = 2] = \"TriggerCharacter\";\r\n    SignatureHelpTriggerReason[SignatureHelpTriggerReason[\"ContentChange\"] = 3] = \"ContentChange\";\r\n})(SignatureHelpTriggerReason || (SignatureHelpTriggerReason = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind[DocumentHighlightKind[\"Text\"] = 0] = \"Text\";\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind[DocumentHighlightKind[\"Read\"] = 1] = \"Read\";\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind[DocumentHighlightKind[\"Write\"] = 2] = \"Write\";\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind[SymbolKind[\"File\"] = 0] = \"File\";\r\n    SymbolKind[SymbolKind[\"Module\"] = 1] = \"Module\";\r\n    SymbolKind[SymbolKind[\"Namespace\"] = 2] = \"Namespace\";\r\n    SymbolKind[SymbolKind[\"Package\"] = 3] = \"Package\";\r\n    SymbolKind[SymbolKind[\"Class\"] = 4] = \"Class\";\r\n    SymbolKind[SymbolKind[\"Method\"] = 5] = \"Method\";\r\n    SymbolKind[SymbolKind[\"Property\"] = 6] = \"Property\";\r\n    SymbolKind[SymbolKind[\"Field\"] = 7] = \"Field\";\r\n    SymbolKind[SymbolKind[\"Constructor\"] = 8] = \"Constructor\";\r\n    SymbolKind[SymbolKind[\"Enum\"] = 9] = \"Enum\";\r\n    SymbolKind[SymbolKind[\"Interface\"] = 10] = \"Interface\";\r\n    SymbolKind[SymbolKind[\"Function\"] = 11] = \"Function\";\r\n    SymbolKind[SymbolKind[\"Variable\"] = 12] = \"Variable\";\r\n    SymbolKind[SymbolKind[\"Constant\"] = 13] = \"Constant\";\r\n    SymbolKind[SymbolKind[\"String\"] = 14] = \"String\";\r\n    SymbolKind[SymbolKind[\"Number\"] = 15] = \"Number\";\r\n    SymbolKind[SymbolKind[\"Boolean\"] = 16] = \"Boolean\";\r\n    SymbolKind[SymbolKind[\"Array\"] = 17] = \"Array\";\r\n    SymbolKind[SymbolKind[\"Object\"] = 18] = \"Object\";\r\n    SymbolKind[SymbolKind[\"Key\"] = 19] = \"Key\";\r\n    SymbolKind[SymbolKind[\"Null\"] = 20] = \"Null\";\r\n    SymbolKind[SymbolKind[\"EnumMember\"] = 21] = \"EnumMember\";\r\n    SymbolKind[SymbolKind[\"Struct\"] = 22] = \"Struct\";\r\n    SymbolKind[SymbolKind[\"Event\"] = 23] = \"Event\";\r\n    SymbolKind[SymbolKind[\"Operator\"] = 24] = \"Operator\";\r\n    SymbolKind[SymbolKind[\"TypeParameter\"] = 25] = \"TypeParameter\";\r\n})(SymbolKind || (SymbolKind = {}));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { KeyChord } from '../../../base/common/keyCodes.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { TPromise } from '../../../base/common/winjs.base.js';\r\nimport { Position } from '../core/position.js';\r\nimport { Range } from '../core/range.js';\r\nimport { Selection } from '../core/selection.js';\r\nimport { Token } from '../core/token.js';\r\nimport * as standaloneEnums from './standaloneEnums.js';\r\nvar KeyMod = /** @class */ (function () {\r\n    function KeyMod() {\r\n    }\r\n    KeyMod.chord = function (firstPart, secondPart) {\r\n        return KeyChord(firstPart, secondPart);\r\n    };\r\n    KeyMod.CtrlCmd = 2048 /* CtrlCmd */;\r\n    KeyMod.Shift = 1024 /* Shift */;\r\n    KeyMod.Alt = 512 /* Alt */;\r\n    KeyMod.WinCtrl = 256 /* WinCtrl */;\r\n    return KeyMod;\r\n}());\r\nexport { KeyMod };\r\nexport function createMonacoBaseAPI() {\r\n    return {\r\n        editor: undefined,\r\n        languages: undefined,\r\n        CancellationTokenSource: CancellationTokenSource,\r\n        Emitter: Emitter,\r\n        KeyCode: standaloneEnums.KeyCode,\r\n        KeyMod: KeyMod,\r\n        Position: Position,\r\n        Range: Range,\r\n        Selection: Selection,\r\n        SelectionDirection: standaloneEnums.SelectionDirection,\r\n        MarkerSeverity: standaloneEnums.MarkerSeverity,\r\n        MarkerTag: standaloneEnums.MarkerTag,\r\n        Promise: TPromise,\r\n        Uri: URI,\r\n        Token: Token\r\n    };\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { mergeSort } from '../../../base/common/arrays.js';\r\nimport { stringDiff } from '../../../base/common/diff/diff.js';\r\nimport { FIN } from '../../../base/common/iterator.js';\r\nimport { globals } from '../../../base/common/platform.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { Position } from '../core/position.js';\r\nimport { Range } from '../core/range.js';\r\nimport { DiffComputer } from '../diff/diffComputer.js';\r\nimport { MirrorTextModel as BaseMirrorModel } from '../model/mirrorTextModel.js';\r\nimport { ensureValidWordDefinition, getWordAtText } from '../model/wordHelper.js';\r\nimport { computeLinks } from '../modes/linkComputer.js';\r\nimport { BasicInplaceReplace } from '../modes/supports/inplaceReplaceSupport.js';\r\nimport { createMonacoBaseAPI } from '../standalone/standaloneBase.js';\r\n/**\r\n * @internal\r\n */\r\nvar MirrorModel = /** @class */ (function (_super) {\r\n    __extends(MirrorModel, _super);\r\n    function MirrorModel() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(MirrorModel.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MirrorModel.prototype, \"version\", {\r\n        get: function () {\r\n            return this._versionId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MirrorModel.prototype, \"eol\", {\r\n        get: function () {\r\n            return this._eol;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MirrorModel.prototype.getValue = function () {\r\n        return this.getText();\r\n    };\r\n    MirrorModel.prototype.getLinesContent = function () {\r\n        return this._lines.slice(0);\r\n    };\r\n    MirrorModel.prototype.getLineCount = function () {\r\n        return this._lines.length;\r\n    };\r\n    MirrorModel.prototype.getLineContent = function (lineNumber) {\r\n        return this._lines[lineNumber - 1];\r\n    };\r\n    MirrorModel.prototype.getWordAtPosition = function (position, wordDefinition) {\r\n        var wordAtText = getWordAtText(position.column, ensureValidWordDefinition(wordDefinition), this._lines[position.lineNumber - 1], 0);\r\n        if (wordAtText) {\r\n            return new Range(position.lineNumber, wordAtText.startColumn, position.lineNumber, wordAtText.endColumn);\r\n        }\r\n        return null;\r\n    };\r\n    MirrorModel.prototype.getWordUntilPosition = function (position, wordDefinition) {\r\n        var wordAtPosition = this.getWordAtPosition(position, wordDefinition);\r\n        if (!wordAtPosition) {\r\n            return {\r\n                word: '',\r\n                startColumn: position.column,\r\n                endColumn: position.column\r\n            };\r\n        }\r\n        return {\r\n            word: this._lines[position.lineNumber - 1].substring(wordAtPosition.startColumn - 1, position.column - 1),\r\n            startColumn: wordAtPosition.startColumn,\r\n            endColumn: position.column\r\n        };\r\n    };\r\n    MirrorModel.prototype.createWordIterator = function (wordDefinition) {\r\n        var _this = this;\r\n        var obj;\r\n        var lineNumber = 0;\r\n        var lineText;\r\n        var wordRangesIdx = 0;\r\n        var wordRanges = [];\r\n        var next = function () {\r\n            if (wordRangesIdx < wordRanges.length) {\r\n                var value = lineText.substring(wordRanges[wordRangesIdx].start, wordRanges[wordRangesIdx].end);\r\n                wordRangesIdx += 1;\r\n                if (!obj) {\r\n                    obj = { done: false, value: value };\r\n                }\r\n                else {\r\n                    obj.value = value;\r\n                }\r\n                return obj;\r\n            }\r\n            else if (lineNumber >= _this._lines.length) {\r\n                return FIN;\r\n            }\r\n            else {\r\n                lineText = _this._lines[lineNumber];\r\n                wordRanges = _this._wordenize(lineText, wordDefinition);\r\n                wordRangesIdx = 0;\r\n                lineNumber += 1;\r\n                return next();\r\n            }\r\n        };\r\n        return { next: next };\r\n    };\r\n    MirrorModel.prototype.getLineWords = function (lineNumber, wordDefinition) {\r\n        var content = this._lines[lineNumber - 1];\r\n        var ranges = this._wordenize(content, wordDefinition);\r\n        var words = [];\r\n        for (var _i = 0, ranges_1 = ranges; _i < ranges_1.length; _i++) {\r\n            var range = ranges_1[_i];\r\n            words.push({\r\n                word: content.substring(range.start, range.end),\r\n                startColumn: range.start + 1,\r\n                endColumn: range.end + 1\r\n            });\r\n        }\r\n        return words;\r\n    };\r\n    MirrorModel.prototype._wordenize = function (content, wordDefinition) {\r\n        var result = [];\r\n        var match;\r\n        wordDefinition.lastIndex = 0; // reset lastIndex just to be sure\r\n        while (match = wordDefinition.exec(content)) {\r\n            if (match[0].length === 0) {\r\n                // it did match the empty string\r\n                break;\r\n            }\r\n            result.push({ start: match.index, end: match.index + match[0].length });\r\n        }\r\n        return result;\r\n    };\r\n    MirrorModel.prototype.getValueInRange = function (range) {\r\n        range = this._validateRange(range);\r\n        if (range.startLineNumber === range.endLineNumber) {\r\n            return this._lines[range.startLineNumber - 1].substring(range.startColumn - 1, range.endColumn - 1);\r\n        }\r\n        var lineEnding = this._eol;\r\n        var startLineIndex = range.startLineNumber - 1;\r\n        var endLineIndex = range.endLineNumber - 1;\r\n        var resultLines = [];\r\n        resultLines.push(this._lines[startLineIndex].substring(range.startColumn - 1));\r\n        for (var i = startLineIndex + 1; i < endLineIndex; i++) {\r\n            resultLines.push(this._lines[i]);\r\n        }\r\n        resultLines.push(this._lines[endLineIndex].substring(0, range.endColumn - 1));\r\n        return resultLines.join(lineEnding);\r\n    };\r\n    MirrorModel.prototype.offsetAt = function (position) {\r\n        position = this._validatePosition(position);\r\n        this._ensureLineStarts();\r\n        return this._lineStarts.getAccumulatedValue(position.lineNumber - 2) + (position.column - 1);\r\n    };\r\n    MirrorModel.prototype.positionAt = function (offset) {\r\n        offset = Math.floor(offset);\r\n        offset = Math.max(0, offset);\r\n        this._ensureLineStarts();\r\n        var out = this._lineStarts.getIndexOf(offset);\r\n        var lineLength = this._lines[out.index].length;\r\n        // Ensure we return a valid position\r\n        return {\r\n            lineNumber: 1 + out.index,\r\n            column: 1 + Math.min(out.remainder, lineLength)\r\n        };\r\n    };\r\n    MirrorModel.prototype._validateRange = function (range) {\r\n        var start = this._validatePosition({ lineNumber: range.startLineNumber, column: range.startColumn });\r\n        var end = this._validatePosition({ lineNumber: range.endLineNumber, column: range.endColumn });\r\n        if (start.lineNumber !== range.startLineNumber\r\n            || start.column !== range.startColumn\r\n            || end.lineNumber !== range.endLineNumber\r\n            || end.column !== range.endColumn) {\r\n            return {\r\n                startLineNumber: start.lineNumber,\r\n                startColumn: start.column,\r\n                endLineNumber: end.lineNumber,\r\n                endColumn: end.column\r\n            };\r\n        }\r\n        return range;\r\n    };\r\n    MirrorModel.prototype._validatePosition = function (position) {\r\n        if (!Position.isIPosition(position)) {\r\n            throw new Error('bad position');\r\n        }\r\n        var lineNumber = position.lineNumber, column = position.column;\r\n        var hasChanged = false;\r\n        if (lineNumber < 1) {\r\n            lineNumber = 1;\r\n            column = 1;\r\n            hasChanged = true;\r\n        }\r\n        else if (lineNumber > this._lines.length) {\r\n            lineNumber = this._lines.length;\r\n            column = this._lines[lineNumber - 1].length + 1;\r\n            hasChanged = true;\r\n        }\r\n        else {\r\n            var maxCharacter = this._lines[lineNumber - 1].length + 1;\r\n            if (column < 1) {\r\n                column = 1;\r\n                hasChanged = true;\r\n            }\r\n            else if (column > maxCharacter) {\r\n                column = maxCharacter;\r\n                hasChanged = true;\r\n            }\r\n        }\r\n        if (!hasChanged) {\r\n            return position;\r\n        }\r\n        else {\r\n            return { lineNumber: lineNumber, column: column };\r\n        }\r\n    };\r\n    return MirrorModel;\r\n}(BaseMirrorModel));\r\n/**\r\n * @internal\r\n */\r\nvar BaseEditorSimpleWorker = /** @class */ (function () {\r\n    function BaseEditorSimpleWorker(foreignModuleFactory) {\r\n        this._foreignModuleFactory = foreignModuleFactory;\r\n        this._foreignModule = null;\r\n    }\r\n    // ---- BEGIN diff --------------------------------------------------------------------------\r\n    BaseEditorSimpleWorker.prototype.computeDiff = function (originalUrl, modifiedUrl, ignoreTrimWhitespace) {\r\n        var original = this._getModel(originalUrl);\r\n        var modified = this._getModel(modifiedUrl);\r\n        if (!original || !modified) {\r\n            return Promise.resolve(null);\r\n        }\r\n        var originalLines = original.getLinesContent();\r\n        var modifiedLines = modified.getLinesContent();\r\n        var diffComputer = new DiffComputer(originalLines, modifiedLines, {\r\n            shouldComputeCharChanges: true,\r\n            shouldPostProcessCharChanges: true,\r\n            shouldIgnoreTrimWhitespace: ignoreTrimWhitespace,\r\n            shouldMakePrettyDiff: true\r\n        });\r\n        var changes = diffComputer.computeDiff();\r\n        var identical = (changes.length > 0 ? false : this._modelsAreIdentical(original, modified));\r\n        return Promise.resolve({\r\n            identical: identical,\r\n            changes: changes\r\n        });\r\n    };\r\n    BaseEditorSimpleWorker.prototype._modelsAreIdentical = function (original, modified) {\r\n        var originalLineCount = original.getLineCount();\r\n        var modifiedLineCount = modified.getLineCount();\r\n        if (originalLineCount !== modifiedLineCount) {\r\n            return false;\r\n        }\r\n        for (var line = 1; line <= originalLineCount; line++) {\r\n            var originalLine = original.getLineContent(line);\r\n            var modifiedLine = modified.getLineContent(line);\r\n            if (originalLine !== modifiedLine) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    BaseEditorSimpleWorker.prototype.computeMoreMinimalEdits = function (modelUrl, edits) {\r\n        var model = this._getModel(modelUrl);\r\n        if (!model) {\r\n            return Promise.resolve(edits);\r\n        }\r\n        var result = [];\r\n        var lastEol = undefined;\r\n        edits = mergeSort(edits, function (a, b) {\r\n            if (a.range && b.range) {\r\n                return Range.compareRangesUsingStarts(a.range, b.range);\r\n            }\r\n            // eol only changes should go to the end\r\n            var aRng = a.range ? 0 : 1;\r\n            var bRng = b.range ? 0 : 1;\r\n            return aRng - bRng;\r\n        });\r\n        for (var _i = 0, edits_1 = edits; _i < edits_1.length; _i++) {\r\n            var _a = edits_1[_i], range = _a.range, text = _a.text, eol = _a.eol;\r\n            if (typeof eol === 'number') {\r\n                lastEol = eol;\r\n            }\r\n            if (!range) {\r\n                // eol-change only\r\n                continue;\r\n            }\r\n            var original = model.getValueInRange(range);\r\n            text = text.replace(/\\r\\n|\\n|\\r/g, model.eol);\r\n            if (original === text) {\r\n                // noop\r\n                continue;\r\n            }\r\n            // make sure diff won't take too long\r\n            if (Math.max(text.length, original.length) > BaseEditorSimpleWorker._diffLimit) {\r\n                result.push({ range: range, text: text });\r\n                continue;\r\n            }\r\n            // compute diff between original and edit.text\r\n            var changes = stringDiff(original, text, false);\r\n            var editOffset = model.offsetAt(Range.lift(range).getStartPosition());\r\n            for (var _b = 0, changes_1 = changes; _b < changes_1.length; _b++) {\r\n                var change = changes_1[_b];\r\n                var start = model.positionAt(editOffset + change.originalStart);\r\n                var end = model.positionAt(editOffset + change.originalStart + change.originalLength);\r\n                var newEdit = {\r\n                    text: text.substr(change.modifiedStart, change.modifiedLength),\r\n                    range: { startLineNumber: start.lineNumber, startColumn: start.column, endLineNumber: end.lineNumber, endColumn: end.column }\r\n                };\r\n                if (model.getValueInRange(newEdit.range) !== newEdit.text) {\r\n                    result.push(newEdit);\r\n                }\r\n            }\r\n        }\r\n        if (typeof lastEol === 'number') {\r\n            result.push({ eol: lastEol, text: undefined, range: undefined });\r\n        }\r\n        return Promise.resolve(result);\r\n    };\r\n    // ---- END minimal edits ---------------------------------------------------------------\r\n    BaseEditorSimpleWorker.prototype.computeLinks = function (modelUrl) {\r\n        var model = this._getModel(modelUrl);\r\n        if (!model) {\r\n            return Promise.resolve(null);\r\n        }\r\n        return Promise.resolve(computeLinks(model));\r\n    };\r\n    BaseEditorSimpleWorker.prototype.textualSuggest = function (modelUrl, position, wordDef, wordDefFlags) {\r\n        var model = this._getModel(modelUrl);\r\n        if (!model) {\r\n            return Promise.resolve(null);\r\n        }\r\n        var suggestions = [];\r\n        var wordDefRegExp = new RegExp(wordDef, wordDefFlags);\r\n        var currentWord = model.getWordUntilPosition(position, wordDefRegExp);\r\n        var seen = Object.create(null);\r\n        seen[currentWord.word] = true;\r\n        for (var iter = model.createWordIterator(wordDefRegExp), e = iter.next(); !e.done && suggestions.length <= BaseEditorSimpleWorker._suggestionsLimit; e = iter.next()) {\r\n            var word = e.value;\r\n            if (seen[word]) {\r\n                continue;\r\n            }\r\n            seen[word] = true;\r\n            if (!isNaN(Number(word))) {\r\n                continue;\r\n            }\r\n            suggestions.push({\r\n                kind: 18 /* Text */,\r\n                label: word,\r\n                insertText: word,\r\n                range: { startLineNumber: position.lineNumber, startColumn: currentWord.startColumn, endLineNumber: position.lineNumber, endColumn: currentWord.endColumn }\r\n            });\r\n        }\r\n        return Promise.resolve({ suggestions: suggestions });\r\n    };\r\n    // ---- END suggest --------------------------------------------------------------------------\r\n    //#region -- word ranges --\r\n    BaseEditorSimpleWorker.prototype.computeWordRanges = function (modelUrl, range, wordDef, wordDefFlags) {\r\n        var model = this._getModel(modelUrl);\r\n        if (!model) {\r\n            return Promise.resolve(Object.create(null));\r\n        }\r\n        var wordDefRegExp = new RegExp(wordDef, wordDefFlags);\r\n        var result = Object.create(null);\r\n        for (var line = range.startLineNumber; line < range.endLineNumber; line++) {\r\n            var words = model.getLineWords(line, wordDefRegExp);\r\n            for (var _i = 0, words_1 = words; _i < words_1.length; _i++) {\r\n                var word = words_1[_i];\r\n                if (!isNaN(Number(word.word))) {\r\n                    continue;\r\n                }\r\n                var array = result[word.word];\r\n                if (!array) {\r\n                    array = [];\r\n                    result[word.word] = array;\r\n                }\r\n                array.push({\r\n                    startLineNumber: line,\r\n                    startColumn: word.startColumn,\r\n                    endLineNumber: line,\r\n                    endColumn: word.endColumn\r\n                });\r\n            }\r\n        }\r\n        return Promise.resolve(result);\r\n    };\r\n    //#endregion\r\n    BaseEditorSimpleWorker.prototype.navigateValueSet = function (modelUrl, range, up, wordDef, wordDefFlags) {\r\n        var model = this._getModel(modelUrl);\r\n        if (!model) {\r\n            return Promise.resolve(null);\r\n        }\r\n        var wordDefRegExp = new RegExp(wordDef, wordDefFlags);\r\n        if (range.startColumn === range.endColumn) {\r\n            range = {\r\n                startLineNumber: range.startLineNumber,\r\n                startColumn: range.startColumn,\r\n                endLineNumber: range.endLineNumber,\r\n                endColumn: range.endColumn + 1\r\n            };\r\n        }\r\n        var selectionText = model.getValueInRange(range);\r\n        var wordRange = model.getWordAtPosition({ lineNumber: range.startLineNumber, column: range.startColumn }, wordDefRegExp);\r\n        if (!wordRange) {\r\n            return Promise.resolve(null);\r\n        }\r\n        var word = model.getValueInRange(wordRange);\r\n        var result = BasicInplaceReplace.INSTANCE.navigateValueSet(range, selectionText, wordRange, word, up);\r\n        return Promise.resolve(result);\r\n    };\r\n    // ---- BEGIN foreign module support --------------------------------------------------------------------------\r\n    BaseEditorSimpleWorker.prototype.loadForeignModule = function (moduleId, createData) {\r\n        var _this = this;\r\n        var ctx = {\r\n            getMirrorModels: function () {\r\n                return _this._getModels();\r\n            }\r\n        };\r\n        if (this._foreignModuleFactory) {\r\n            this._foreignModule = this._foreignModuleFactory(ctx, createData);\r\n            // static foreing module\r\n            var methods = [];\r\n            for (var prop in this._foreignModule) {\r\n                if (typeof this._foreignModule[prop] === 'function') {\r\n                    methods.push(prop);\r\n                }\r\n            }\r\n            return Promise.resolve(methods);\r\n        }\r\n        // ESM-comment-begin\r\n        // \t\treturn new Promise<any>((resolve, reject) => {\r\n        // \t\t\trequire([moduleId], (foreignModule: { create: IForeignModuleFactory }) => {\r\n        // \t\t\t\tthis._foreignModule = foreignModule.create(ctx, createData);\r\n        // \r\n        // \t\t\t\tlet methods: string[] = [];\r\n        // \t\t\t\tfor (let prop in this._foreignModule) {\r\n        // \t\t\t\t\tif (typeof this._foreignModule[prop] === 'function') {\r\n        // \t\t\t\t\t\tmethods.push(prop);\r\n        // \t\t\t\t\t}\r\n        // \t\t\t\t}\r\n        // \r\n        // \t\t\t\tresolve(methods);\r\n        // \r\n        // \t\t\t}, reject);\r\n        // \t\t});\r\n        // ESM-comment-end\r\n        // ESM-uncomment-begin\r\n        return Promise.reject(new Error(\"Unexpected usage\"));\r\n        // ESM-uncomment-end\r\n    };\r\n    // foreign method request\r\n    BaseEditorSimpleWorker.prototype.fmr = function (method, args) {\r\n        if (!this._foreignModule || typeof this._foreignModule[method] !== 'function') {\r\n            return Promise.reject(new Error('Missing requestHandler or method: ' + method));\r\n        }\r\n        try {\r\n            return Promise.resolve(this._foreignModule[method].apply(this._foreignModule, args));\r\n        }\r\n        catch (e) {\r\n            return Promise.reject(e);\r\n        }\r\n    };\r\n    // ---- END diff --------------------------------------------------------------------------\r\n    // ---- BEGIN minimal edits ---------------------------------------------------------------\r\n    BaseEditorSimpleWorker._diffLimit = 10000;\r\n    // ---- BEGIN suggest --------------------------------------------------------------------------\r\n    BaseEditorSimpleWorker._suggestionsLimit = 10000;\r\n    return BaseEditorSimpleWorker;\r\n}());\r\nexport { BaseEditorSimpleWorker };\r\n/**\r\n * @internal\r\n */\r\nvar EditorSimpleWorkerImpl = /** @class */ (function (_super) {\r\n    __extends(EditorSimpleWorkerImpl, _super);\r\n    function EditorSimpleWorkerImpl(foreignModuleFactory) {\r\n        var _this = _super.call(this, foreignModuleFactory) || this;\r\n        _this._models = Object.create(null);\r\n        return _this;\r\n    }\r\n    EditorSimpleWorkerImpl.prototype.dispose = function () {\r\n        this._models = Object.create(null);\r\n    };\r\n    EditorSimpleWorkerImpl.prototype._getModel = function (uri) {\r\n        return this._models[uri];\r\n    };\r\n    EditorSimpleWorkerImpl.prototype._getModels = function () {\r\n        var _this = this;\r\n        var all = [];\r\n        Object.keys(this._models).forEach(function (key) { return all.push(_this._models[key]); });\r\n        return all;\r\n    };\r\n    EditorSimpleWorkerImpl.prototype.acceptNewModel = function (data) {\r\n        this._models[data.url] = new MirrorModel(URI.parse(data.url), data.lines, data.EOL, data.versionId);\r\n    };\r\n    EditorSimpleWorkerImpl.prototype.acceptModelChanged = function (strURL, e) {\r\n        if (!this._models[strURL]) {\r\n            return;\r\n        }\r\n        var model = this._models[strURL];\r\n        model.onEvents(e);\r\n    };\r\n    EditorSimpleWorkerImpl.prototype.acceptRemovedModel = function (strURL) {\r\n        if (!this._models[strURL]) {\r\n            return;\r\n        }\r\n        delete this._models[strURL];\r\n    };\r\n    return EditorSimpleWorkerImpl;\r\n}(BaseEditorSimpleWorker));\r\nexport { EditorSimpleWorkerImpl };\r\n/**\r\n * Called on the worker side\r\n * @internal\r\n */\r\nexport function create() {\r\n    return new EditorSimpleWorkerImpl(null);\r\n}\r\nif (typeof importScripts === 'function') {\r\n    // Running in a web worker\r\n    globals.monaco = createMonacoBaseAPI();\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { SimpleWorkerServer } from '../base/common/worker/simpleWorker.js';\r\nimport { EditorSimpleWorkerImpl } from './common/services/editorSimpleWorker.js';\r\nvar initialized = false;\r\nexport function initialize(foreignModule) {\r\n    if (initialized) {\r\n        return;\r\n    }\r\n    initialized = true;\r\n    var editorWorker = new EditorSimpleWorkerImpl(foreignModule);\r\n    var simpleWorker = new SimpleWorkerServer(function (msg) {\r\n        self.postMessage(msg);\r\n    }, editorWorker);\r\n    self.onmessage = function (e) {\r\n        simpleWorker.onmessage(e.data);\r\n    };\r\n}\r\nself.onmessage = function (e) {\r\n    // Ignore first message in this case and initialize if not yet initialized\r\n    if (!initialized) {\r\n        initialize(null);\r\n    }\r\n};\r\n"]}