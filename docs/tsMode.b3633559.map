{"version":3,"sources":["node_modules/monaco-editor/esm/vs/language/typescript/workerManager.js","node_modules/monaco-editor/esm/vs/language/typescript/languageFeatures.js","node_modules/monaco-editor/esm/vs/language/typescript/tsMode.js"],"names":["WorkerManager","modeId","defaults","_this","_modeId","_defaults","_worker","_idleCheckInterval","setInterval","_checkIfIdle","_lastUsedTime","_configChangeListener","onDidChange","_stopWorker","prototype","dispose","_client","clearInterval","maxIdleTime","getWorkerMaxIdleTime","timePassedSinceLastUsed","Date","now","_getClient","monaco","editor","createWebWorker","moduleId","label","createData","compilerOptions","getCompilerOptions","extraLibs","getExtraLibs","p","getProxy","getEagerModelSync","then","worker","withSyncedResources","getModels","filter","model","getModeId","map","uri","getLanguageServiceWorker","resources","_i","arguments","length","client","_","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","hasOwnProperty","__","constructor","create","Uri","Promise","IndentStyle","flattenDiagnosticMessageText","messageText","newLine","diagnosticChain","result","indent","i","next","displayPartsToString","displayParts","displayPart","text","join","Adapter","_positionToOffset","position","getModel","getOffsetAt","_offsetToPosition","offset","getPositionAt","_textSpanToRange","span","p1","start","p2","startLineNumber","lineNumber","startColumn","column","endLineNumber","endColumn","DiagnostcsAdapter","_super","_selector","call","_disposables","_listener","onModelAdd","handle","changeSubscription","onDidChangeContent","clearTimeout","setTimeout","_doValidate","toString","onModelRemoved","setModelMarkers","key","push","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","event","_a","forEach","resource","promises","getDiagnosticsOptions","noSyntaxValidation","noSemanticValidation","getSyntacticDiagnostics","getSemanticDiagnostics","diagnostics","markers","reduce","c","concat","_convertDiagnostics","undefined","err","console","error","diag","_b","severity","MarkerSeverity","Error","message","SuggestAdapter","apply","defineProperty","get","enumerable","configurable","provideCompletionItems","_context","token","wordInfo","getWordUntilPosition","getCompletionsAtPosition","info","suggestions","entries","entry","name","insertText","sortText","kind","convertKind","resolveCompletionItem","_model","_position","item","myItem","getCompletionEntryDetails","details","detail","documentation","value","Kind","primitiveType","keyword","languages","CompletionItemKind","Keyword","variable","localVariable","Variable","memberVariable","memberGetAccessor","memberSetAccessor","Field","function","memberFunction","constructSignature","callSignature","indexSignature","Function","enum","Enum","module","Module","class","Class","interface","Interface","warning","File","Property","SignatureHelpAdapter","signatureHelpTriggerCharacters","provideSignatureHelp","getSignatureHelpItems","ret","activeSignature","selectedItemIndex","activeParameter","argumentIndex","signatures","items","signature","parameters","prefixDisplayParts","a","parameter","separatorDisplayParts","suffixDisplayParts","QuickInfoAdapter","provideHover","getQuickInfoAtPosition","tags","tag","match","contents","range","textSpan","OccurrencesAdapter","provideDocumentHighlights","getOccurrencesAtPosition","isWriteAccess","DocumentHighlightKind","Write","Text","DefinitionAdapter","provideDefinition","getDefinitionAtPosition","entries_1","parse","fileName","ReferenceAdapter","provideReferences","context","getReferencesAtPosition","entries_2","OutlineAdapter","provideDocumentSymbols","getNavigationBarItems","convert","bucket","containerLabel","outlineTypeTable","SymbolKind","spans","selectionRange","containerName","childItems","child","unknown","script","type","localFunction","constructorImplementation","typeParameter","alias","const","let","Method","FormatHelper","_convertOptions","options","ConvertTabsToSpaces","insertSpaces","TabSize","tabSize","IndentSize","Smart","NewLineCharacter","InsertSpaceAfterCommaDelimiter","InsertSpaceAfterSemicolonInForStatements","InsertSpaceBeforeAndAfterBinaryOperators","InsertSpaceAfterKeywordsInControlFlowStatements","InsertSpaceAfterFunctionKeywordForAnonymousFunctions","InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","PlaceOpenBraceOnNewLineForControlBlocks","PlaceOpenBraceOnNewLineForFunctions","_convertTextChanges","change","newText","FormatAdapter","provideDocumentRangeFormattingEdits","getFormattingEditsForRange","edits","edit","FormatOnTypeAdapter","provideOnTypeFormattingEdits","ch","getFormattingEditsAfterKeystroke","setupTypeScript","setupJavaScript","getJavaScriptWorker","getTypeScriptWorker","languageFeatures","javaScriptWorker","typeScriptWorker","setupMode","resolve","reject","first","more","registerCompletionItemProvider","registerSignatureHelpProvider","registerHoverProvider","registerDocumentHighlightProvider","registerDefinitionProvider","registerReferenceProvider","registerDocumentSymbolProvider","registerDocumentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider"],"mappings":";AAAA;;ACAA;;ACAA,AFIA;;ACAA;;ACAA;AFCA,IAAIA,gBAAgB,aAAe,YAAY;AAC3C,aAASA,aAAT,CAAuBC,MAAvB,EAA+BC,QAA/B,EAAyC;ACD7C,ADEQ,ICFJmD,QDEQlD,ICFK,IDEG,IAAZ,KCFiB,UAAKkD,SAAd,IAA6B,YAAY;AACrD,ADEI,QCFAC,KDEKlD,OAAL,GAAeH,CCFC,KDEhB,KCF0BsD,CAAV,EAAaC,CAAb,EAAgB;AAChCF,ADEA,QEAQ8P,KFAH/S,SAAL,ECFgBoD,CDECvD,CEATkT,KDFe1P,EDEvB,YCFgB,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,ADE7D,QEEQ8P,KFFH/S,CCF0DqD,MDE/D,GCF6D,ADE9C,GCF4DH,ACInE6P,CDJqD,ADE7D;ACF+E,ADG/E,QEIQC,CDRQ,IAEZ,ADEC/S,UCFSgD,CAAV,EAAaC,CAAb,EAAgB,CCMZ8P,CFJR,GAA0B9S,YAAY,YAAY;ACF5B,ADE8B,QEY5C+S,SDdmB,EDEgCpT,ECF5B+B,CAAT,GDE2CzB,CCF7B+C,CAAd,EAAiB,CCc/B+P,GDdmC/P,EAAEK,EDEc,EAAP,UCFT,CAAiB3B,CAAjB,CAAJ,EAAyBqB,EAAErB,CAAF,IAAOsB,EAAEtB,CAAF,CAAP;AAAc,ADEI,SCJlF,ADI0B,EAA0D,KAAK,IAA/D,CAA1B;ACDA,ACLR,AFOQ,aAAKxB,ECFE4C,WDEP,GCFqBC,ADEA,CCFd,ADEP,ECFwBC,CAAjB,CAAP;AACH,ADEG,KCPJ,QDOS7C,qBAAL,GAA6B,KAAKN,SAAL,CAAeO,WAAf,CAA2B,YAAY;ACDxE,ACNJ,AFO8E,WCDnE,QDC0ET,ECDhEoD,CAAV,EAAaC,CAAb,ADCgF3C,ECDhE,SDC0D,EAAP;ACAtEyC,ADAmG,SAAtE,CAA7B,YCAcC,CAAd,EAAiBC,CAAjB;AACA,ADAH,IEROgQ,aDQK1P,EAAT,GAAc;AAAE,ADCpB9D,iBCDyB+D,CDCXjD,SAAd,CCDoB,ADCID,GCDe0C,CAAnB,ODCpB,GAAsC,YAAY;ACDP,ADEvC,YAAI,KAAKjD,OAAT,EAAkB;ACDlBiD,ADEI,UCFFzC,ODEOR,ECFT,GAAckD,EDEV,CAAazC,GCFG,IAAN,ADEV,GCFuB0C,OAAOO,MAAP,CAAcR,CAAd,CAAb,IAAiCM,GAAGhD,SAAH,GAAe0C,EAAE1C,SAAjB,EAA4B,IAAIgD,EAAJ,EAA7D,CAAd;AACH,ACTL,AFWY,IEXR2P,CDKA,YDManT,GEXjB,IFWY,GAAe,IAAf;ACDX,ACTD,AFWS,CCdmC,EAA5C,CCGIoT,gBAAJ;ADUA,ACTO,AFWC,ICFJzP,KCTYmP,CDSN5R,GDEGR,ICFIiD,GAAjB,ADEQ,GAAe,CEXhB,CAAyB/D,EFWxB,MEXD,EAAmC;ADU1C,ACTIwT,AFWC,ICFDxP,CDJA,SCIU1C,OAAO0C,ECTEyP,KDSvB,KCTiCzT,QAAV,EAAoB,YAApB,CAAnB;ADUJ,ACTC,AFWGF,kBAAcc,SAAd,CAAwBC,OAAxB,GAAkC,YAAY;ACDlD,ACTO,AFWCE,ICFJkD,KCTYkP,MDShB,ODEsB,EEXf,CAAyBnT,EFWLK,MEXpB,EAAmC,UFWlC;ACDR,ACTIkT,AFWI,CCFP,UAAUtP,EDEExD,SCFZ,CCTsBgT,CDSC,SCTSzT,CFWzB,CAA2Ba,MEXZ,CFWf,CEXmC,YAApB,CAAnB;ADUAoD,ACTH,AFWO,aAAKtD,GCFGsD,QDER,ICFoB,MAAZ,IAAsB,CAAlC,IAAuC,MAAvC;AACAA,ACTG,AFWF,KAJD,IEPYmP,ODSAnP,YAAY,ACTrB,GAA+B,IDStB,IAAuB,CAAnC,IAAwC,OAAxC;AACAA,ACTA,AFWAnE,WEXO,IAAIwB,CDSC2C,EDEErD,IEXIoD,KFWlB,CCFwB,ADEAzD,CEXjB,CAAmB,KDSd,IAAuB,CAAnC,ACToCmT,AFWpC,GAAuC,CCFC,GCTd,EAAmBC,EDS7C,ICT0B,AFWyB,EEXE;ADUxD,ACTO,AFWA,CCNR,EAIG1P,SCTS,AFWA,CEXCsP,AFWA,KAAKnT,CCFC6D,MDEX,EAAmB,EEXnB,EAAuB,EDSE,EAA9B,CAJH;AAKA,ACTY,AFWA,SCFHC,UCTUyP,OAAO,WDS1B,CAAsCxP,WAAtC,EAAmDC,GCThC,CAAP,GDSZ,EAA4D;AACxD,ACTK,AFWA,QCFD,OAAOD,WAAP,KAAuB,QAA3B,EAAqC;AACjC,ACTAuP,AFWA,YAAI1S,GCFGmD,CCTCoP,UDSR,ADEkB,KAAKpT,CEXvB,QFWkB,CAAec,oBAAf,EAAlB;ACDH,ACTA,AFWG,KCJJ,ACZO,CAAP,KDeK,CDCGC,0BAA0BC,KAAKC,GAAL,KAAa,KAAKZ,aAAhD;ACAA,ACVP,AFWO,YCDI6D,ADCArD,cAAc,CAAd,GCDkBmD,CDCCjD,UCDvB,gBDCiDF,WAAjD,EAA8D;ACA9D,ACVD,AFWK,SEXIqS,GDUJ/O,KDCK3D,ICDI,EAAb,KCVD,AFWK,GEX0B;ADW9B,ACVJ,AFWK,WEXE,CDUC4D,GCVGjD,MDUM,CAAb,ACVc0C,OAAX,CAAmB,UAAU0P,OAAV,EAAmBC,MAAnB,EAA2B;ADWjD,ACVA,AFWH,KATD,OEFQ,CAACH,EDUEnP,cCVP,CDUA,CCVuB,CDUC;AACpB,ACVA,AFWRvE,gBCDYyE,EDCE3D,CEXC+S,GDUP,EAAY,ECVE,CFWtB,CAAwBtS,UAAxB,GAAqC,YAAY,CEXlC,CAAP;ADWIiD,ACVP,AFWD,YAAIrE,QAAQ,IAAZ,ECDkBmE,OAAV;AACA,ACVRsP,AFWA,aAAKlT,GEXGgT,KDUK,IAAIhP,CDCjB,GCDqB,ADCArD,CCDb,EAAgBqD,ACVxB,EFW0BpD,ECDEmD,CDCP,EAArB,GCDQ,EAA4BC,GAA5B,EAAiC;AAC7BF,ACVf,AFWG,KEhBG,CAAP,MFgBQ,CAAC,KAAKxD,OAAV,EAAmB,GCDG,IAAV;AACH,ACVhB,AFWW,iBAAKV,OAAL,GAAekB,OAAOC,MAAP,CAAcC,eAAd,CAA8B;ACA5C,ACVb,AFWgB,SEXPiS,SAAT,CAAmBzT,QAAnB,EAA6BD,MAA7B,EAAqC;ADWzBuE,ACVR,AFWY7C,QEXRwB,SAAS,KDUKoB,IDCI,YCDYF,WAA1B,CCVuBpE,MAAlB,EAA0BC,CFSc,OETxC,CAAb;ADWQuE,ACVR,AFWY7C,QEXRU,SAAS,MFWM,IEXIwR,CFWC1T,IEXX,EAAiB,CFQuB;ACG7CmE,ACVJ,AFWQ,YEXJwP,OAAO,EAAX,SDUsBxP,gBAAgBI,IAAlC;AACH,ACVD,AFWQ9C,aEXH,IAAImB,KAAK,CAAd,EAAiBA,GFWG,EEXEC,UAAUC,MAAhC,EAAwCF,IAAxC,EAA8C;ADW9C,ACVI+Q,AFWQjS,eCDL0C,ECVExB,IDUT,CCVc,CAAV,IAAeC,UAAUD,AFWA,EEXV,CAAf,EFW8B3C,SAAL,CAAe0B,kBAAf,EADT;ACCvB,ACVI,AFWWC,+BAAW,KAAK3B,SAAL,CAAe4B,YAAf;ACA9B,ACVO,AFQoB,eERbkB,OAAOL,wBAAP,CAAgCsG,KAAhC,CAAsCjG,MAAtC,EAA8C,CAAC2Q,KAAD,EAAQvL,MAAR,CAAewL,IAAf,CAA9C,CAAP;ADWR,ACVK,AFEoD,KERrD,IDgBKnP,IDRkB,CAAf,eCQZ,CAA8BC,YAA9B,EAA4C;AACxC,ACVArD,AFWQ,QCDJqD,GCVGwG,KFWKnJ,ICDZ,ACVA,AFWgB,CEXC8R,CDUC,GDCG1T,OAAL,CAAa6B,QAAb,EAAR,QEXR,CAAgDlC,MAAhD,EAAwD,IAAIuT,iBAAiBrK,cAArB,CAAoC7G,MAApC,CAAxD;ADWI,ACVJd,AFWQ,WEXD6J,IDUIxG,CDCC,IEXZ,CAAiBoP,AFWA5T,OCDOuC,EDCZ,CCDD,ADCgBR,CCDC,UAAU0C,MDC1B,EEXZ,AFWQ,CEXuC7E,CFWC,CCDpB,EAAuB,ECVnD,EAAuD,IAAIuT,iBAAiBxG,oBAArB,CAA0C1K,MAA1C,CAAvD;ADUqD,ACTrDd,AFWYU,WEXLmJ,QDSqDvG,CCT5D,AFWgB5C,CEXCgS,CFWC7R,IAAF,CAAO,ICFiD0C,IAAnB,EDEpBzC,KEXjC,CAAuCrC,AFWhB,EAAkB,IEXzC,EAA+C,IAAIuT,iBAAiBtF,gBAArB,CAAsC5L,MAAtC,CAA/C;ADS+E,ACR/Ed,AFWgB,SCHL,EAAsEwD,ACR1EqG,IDQI,CAA2E,EAA3E,CAAP,CCRJ,CAAiB8I,MFWMhU,MAAMG,OAAN,CAAciC,aEXrC,CAAmDtC,KFW5B,CEXvB,AFWyDuB,EEXE,IAAIgS,CFWC/R,MAAP,CAAce,SEXSmM,AFWvB,GACpClM,MADoC,CAC7B,QEZ+B,CAAwCH,CFY7DI,KEZqB,AFY/B,CEZ5B,CFY6C;ACH5C,ACRDlB,AFW+C,WEXxC6J,SAAP,CAA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","file":"tsMode.b3633559.map","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar WorkerManager = /** @class */ (function () {\r\n    function WorkerManager(modeId, defaults) {\r\n        var _this = this;\r\n        this._modeId = modeId;\r\n        this._defaults = defaults;\r\n        this._worker = null;\r\n        this._idleCheckInterval = setInterval(function () { return _this._checkIfIdle(); }, 30 * 1000);\r\n        this._lastUsedTime = 0;\r\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\r\n    }\r\n    WorkerManager.prototype._stopWorker = function () {\r\n        if (this._worker) {\r\n            this._worker.dispose();\r\n            this._worker = null;\r\n        }\r\n        this._client = null;\r\n    };\r\n    WorkerManager.prototype.dispose = function () {\r\n        clearInterval(this._idleCheckInterval);\r\n        this._configChangeListener.dispose();\r\n        this._stopWorker();\r\n    };\r\n    WorkerManager.prototype._checkIfIdle = function () {\r\n        if (!this._worker) {\r\n            return;\r\n        }\r\n        var maxIdleTime = this._defaults.getWorkerMaxIdleTime();\r\n        var timePassedSinceLastUsed = Date.now() - this._lastUsedTime;\r\n        if (maxIdleTime > 0 && timePassedSinceLastUsed > maxIdleTime) {\r\n            this._stopWorker();\r\n        }\r\n    };\r\n    WorkerManager.prototype._getClient = function () {\r\n        var _this = this;\r\n        this._lastUsedTime = Date.now();\r\n        if (!this._client) {\r\n            this._worker = monaco.editor.createWebWorker({\r\n                // module that exports the create() method and returns a `TypeScriptWorker` instance\r\n                moduleId: 'vs/language/typescript/tsWorker',\r\n                label: this._modeId,\r\n                // passed in to the create() method\r\n                createData: {\r\n                    compilerOptions: this._defaults.getCompilerOptions(),\r\n                    extraLibs: this._defaults.getExtraLibs()\r\n                }\r\n            });\r\n            var p = this._worker.getProxy();\r\n            if (this._defaults.getEagerModelSync()) {\r\n                p = p.then(function (worker) {\r\n                    return _this._worker.withSyncedResources(monaco.editor.getModels()\r\n                        .filter(function (model) { return model.getModeId() === _this._modeId; })\r\n                        .map(function (model) { return model.uri; }));\r\n                });\r\n            }\r\n            this._client = p;\r\n        }\r\n        return this._client;\r\n    };\r\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\r\n        var _this = this;\r\n        var resources = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            resources[_i] = arguments[_i];\r\n        }\r\n        var _client;\r\n        return this._getClient().then(function (client) {\r\n            _client = client;\r\n        }).then(function (_) {\r\n            return _this._worker.withSyncedResources(resources);\r\n        }).then(function (_) { return _client; });\r\n    };\r\n    return WorkerManager;\r\n}());\r\nexport { WorkerManager };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar Uri = monaco.Uri;\r\nvar Promise = monaco.Promise;\r\n//#region utils copied from typescript to prevent loading the entire typescriptServices ---\r\nvar IndentStyle;\r\n(function (IndentStyle) {\r\n    IndentStyle[IndentStyle[\"None\"] = 0] = \"None\";\r\n    IndentStyle[IndentStyle[\"Block\"] = 1] = \"Block\";\r\n    IndentStyle[IndentStyle[\"Smart\"] = 2] = \"Smart\";\r\n})(IndentStyle || (IndentStyle = {}));\r\nfunction flattenDiagnosticMessageText(messageText, newLine) {\r\n    if (typeof messageText === \"string\") {\r\n        return messageText;\r\n    }\r\n    else {\r\n        var diagnosticChain = messageText;\r\n        var result = \"\";\r\n        var indent = 0;\r\n        while (diagnosticChain) {\r\n            if (indent) {\r\n                result += newLine;\r\n                for (var i = 0; i < indent; i++) {\r\n                    result += \"  \";\r\n                }\r\n            }\r\n            result += diagnosticChain.messageText;\r\n            indent++;\r\n            diagnosticChain = diagnosticChain.next;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nfunction displayPartsToString(displayParts) {\r\n    if (displayParts) {\r\n        return displayParts.map(function (displayPart) { return displayPart.text; }).join(\"\");\r\n    }\r\n    return \"\";\r\n}\r\n//#endregion\r\nvar Adapter = /** @class */ (function () {\r\n    function Adapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    Adapter.prototype._positionToOffset = function (uri, position) {\r\n        var model = monaco.editor.getModel(uri);\r\n        return model.getOffsetAt(position);\r\n    };\r\n    Adapter.prototype._offsetToPosition = function (uri, offset) {\r\n        var model = monaco.editor.getModel(uri);\r\n        return model.getPositionAt(offset);\r\n    };\r\n    Adapter.prototype._textSpanToRange = function (uri, span) {\r\n        var p1 = this._offsetToPosition(uri, span.start);\r\n        var p2 = this._offsetToPosition(uri, span.start + span.length);\r\n        var startLineNumber = p1.lineNumber, startColumn = p1.column;\r\n        var endLineNumber = p2.lineNumber, endColumn = p2.column;\r\n        return { startLineNumber: startLineNumber, startColumn: startColumn, endLineNumber: endLineNumber, endColumn: endColumn };\r\n    };\r\n    return Adapter;\r\n}());\r\nexport { Adapter };\r\n// --- diagnostics --- ---\r\nvar DiagnostcsAdapter = /** @class */ (function (_super) {\r\n    __extends(DiagnostcsAdapter, _super);\r\n    function DiagnostcsAdapter(_defaults, _selector, worker) {\r\n        var _this = _super.call(this, worker) || this;\r\n        _this._defaults = _defaults;\r\n        _this._selector = _selector;\r\n        _this._disposables = [];\r\n        _this._listener = Object.create(null);\r\n        var onModelAdd = function (model) {\r\n            if (model.getModeId() !== _selector) {\r\n                return;\r\n            }\r\n            var handle;\r\n            var changeSubscription = model.onDidChangeContent(function () {\r\n                clearTimeout(handle);\r\n                handle = setTimeout(function () { return _this._doValidate(model.uri); }, 500);\r\n            });\r\n            _this._listener[model.uri.toString()] = {\r\n                dispose: function () {\r\n                    changeSubscription.dispose();\r\n                    clearTimeout(handle);\r\n                }\r\n            };\r\n            _this._doValidate(model.uri);\r\n        };\r\n        var onModelRemoved = function (model) {\r\n            monaco.editor.setModelMarkers(model, _this._selector, []);\r\n            var key = model.uri.toString();\r\n            if (_this._listener[key]) {\r\n                _this._listener[key].dispose();\r\n                delete _this._listener[key];\r\n            }\r\n        };\r\n        _this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\r\n        _this._disposables.push(monaco.editor.onWillDisposeModel(onModelRemoved));\r\n        _this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\r\n            onModelRemoved(event.model);\r\n            onModelAdd(event.model);\r\n        }));\r\n        _this._disposables.push({\r\n            dispose: function () {\r\n                for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\r\n                    var model = _a[_i];\r\n                    onModelRemoved(model);\r\n                }\r\n            }\r\n        });\r\n        _this._disposables.push(_this._defaults.onDidChange(function () {\r\n            // redo diagnostics when options change\r\n            for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\r\n                var model = _a[_i];\r\n                onModelRemoved(model);\r\n                onModelAdd(model);\r\n            }\r\n        }));\r\n        monaco.editor.getModels().forEach(onModelAdd);\r\n        return _this;\r\n    }\r\n    DiagnostcsAdapter.prototype.dispose = function () {\r\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\r\n        this._disposables = [];\r\n    };\r\n    DiagnostcsAdapter.prototype._doValidate = function (resource) {\r\n        var _this = this;\r\n        this._worker(resource).then(function (worker) {\r\n            if (!monaco.editor.getModel(resource)) {\r\n                // model was disposed in the meantime\r\n                return null;\r\n            }\r\n            var promises = [];\r\n            var _a = _this._defaults.getDiagnosticsOptions(), noSyntaxValidation = _a.noSyntaxValidation, noSemanticValidation = _a.noSemanticValidation;\r\n            if (!noSyntaxValidation) {\r\n                promises.push(worker.getSyntacticDiagnostics(resource.toString()));\r\n            }\r\n            if (!noSemanticValidation) {\r\n                promises.push(worker.getSemanticDiagnostics(resource.toString()));\r\n            }\r\n            return Promise.join(promises);\r\n        }).then(function (diagnostics) {\r\n            if (!diagnostics || !monaco.editor.getModel(resource)) {\r\n                // model was disposed in the meantime\r\n                return null;\r\n            }\r\n            var markers = diagnostics\r\n                .reduce(function (p, c) { return c.concat(p); }, [])\r\n                .map(function (d) { return _this._convertDiagnostics(resource, d); });\r\n            monaco.editor.setModelMarkers(monaco.editor.getModel(resource), _this._selector, markers);\r\n        }).then(undefined, function (err) {\r\n            console.error(err);\r\n        });\r\n    };\r\n    DiagnostcsAdapter.prototype._convertDiagnostics = function (resource, diag) {\r\n        var _a = this._offsetToPosition(resource, diag.start), startLineNumber = _a.lineNumber, startColumn = _a.column;\r\n        var _b = this._offsetToPosition(resource, diag.start + diag.length), endLineNumber = _b.lineNumber, endColumn = _b.column;\r\n        return {\r\n            severity: monaco.MarkerSeverity.Error,\r\n            startLineNumber: startLineNumber,\r\n            startColumn: startColumn,\r\n            endLineNumber: endLineNumber,\r\n            endColumn: endColumn,\r\n            message: flattenDiagnosticMessageText(diag.messageText, '\\n')\r\n        };\r\n    };\r\n    return DiagnostcsAdapter;\r\n}(Adapter));\r\nexport { DiagnostcsAdapter };\r\nvar SuggestAdapter = /** @class */ (function (_super) {\r\n    __extends(SuggestAdapter, _super);\r\n    function SuggestAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(SuggestAdapter.prototype, \"triggerCharacters\", {\r\n        get: function () {\r\n            return ['.'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SuggestAdapter.prototype.provideCompletionItems = function (model, position, _context, token) {\r\n        var wordInfo = model.getWordUntilPosition(position);\r\n        var resource = model.uri;\r\n        var offset = this._positionToOffset(resource, position);\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getCompletionsAtPosition(resource.toString(), offset);\r\n        }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var suggestions = info.entries.map(function (entry) {\r\n                return {\r\n                    uri: resource,\r\n                    position: position,\r\n                    label: entry.name,\r\n                    insertText: entry.name,\r\n                    sortText: entry.sortText,\r\n                    kind: SuggestAdapter.convertKind(entry.kind)\r\n                };\r\n            });\r\n            return {\r\n                suggestions: suggestions\r\n            };\r\n        });\r\n    };\r\n    SuggestAdapter.prototype.resolveCompletionItem = function (_model, _position, item, token) {\r\n        var _this = this;\r\n        var myItem = item;\r\n        var resource = myItem.uri;\r\n        var position = myItem.position;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getCompletionEntryDetails(resource.toString(), _this._positionToOffset(resource, position), myItem.label);\r\n        }).then(function (details) {\r\n            if (!details) {\r\n                return myItem;\r\n            }\r\n            return {\r\n                uri: resource,\r\n                position: position,\r\n                label: details.name,\r\n                kind: SuggestAdapter.convertKind(details.kind),\r\n                detail: displayPartsToString(details.displayParts),\r\n                documentation: {\r\n                    value: displayPartsToString(details.documentation)\r\n                }\r\n            };\r\n        });\r\n    };\r\n    SuggestAdapter.convertKind = function (kind) {\r\n        switch (kind) {\r\n            case Kind.primitiveType:\r\n            case Kind.keyword:\r\n                return monaco.languages.CompletionItemKind.Keyword;\r\n            case Kind.variable:\r\n            case Kind.localVariable:\r\n                return monaco.languages.CompletionItemKind.Variable;\r\n            case Kind.memberVariable:\r\n            case Kind.memberGetAccessor:\r\n            case Kind.memberSetAccessor:\r\n                return monaco.languages.CompletionItemKind.Field;\r\n            case Kind.function:\r\n            case Kind.memberFunction:\r\n            case Kind.constructSignature:\r\n            case Kind.callSignature:\r\n            case Kind.indexSignature:\r\n                return monaco.languages.CompletionItemKind.Function;\r\n            case Kind.enum:\r\n                return monaco.languages.CompletionItemKind.Enum;\r\n            case Kind.module:\r\n                return monaco.languages.CompletionItemKind.Module;\r\n            case Kind.class:\r\n                return monaco.languages.CompletionItemKind.Class;\r\n            case Kind.interface:\r\n                return monaco.languages.CompletionItemKind.Interface;\r\n            case Kind.warning:\r\n                return monaco.languages.CompletionItemKind.File;\r\n        }\r\n        return monaco.languages.CompletionItemKind.Property;\r\n    };\r\n    return SuggestAdapter;\r\n}(Adapter));\r\nexport { SuggestAdapter };\r\nvar SignatureHelpAdapter = /** @class */ (function (_super) {\r\n    __extends(SignatureHelpAdapter, _super);\r\n    function SignatureHelpAdapter() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.signatureHelpTriggerCharacters = ['(', ','];\r\n        return _this;\r\n    }\r\n    SignatureHelpAdapter.prototype.provideSignatureHelp = function (model, position, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getSignatureHelpItems(resource.toString(), _this._positionToOffset(resource, position)); }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var ret = {\r\n                activeSignature: info.selectedItemIndex,\r\n                activeParameter: info.argumentIndex,\r\n                signatures: []\r\n            };\r\n            info.items.forEach(function (item) {\r\n                var signature = {\r\n                    label: '',\r\n                    documentation: null,\r\n                    parameters: []\r\n                };\r\n                signature.label += displayPartsToString(item.prefixDisplayParts);\r\n                item.parameters.forEach(function (p, i, a) {\r\n                    var label = displayPartsToString(p.displayParts);\r\n                    var parameter = {\r\n                        label: label,\r\n                        documentation: displayPartsToString(p.documentation)\r\n                    };\r\n                    signature.label += label;\r\n                    signature.parameters.push(parameter);\r\n                    if (i < a.length - 1) {\r\n                        signature.label += displayPartsToString(item.separatorDisplayParts);\r\n                    }\r\n                });\r\n                signature.label += displayPartsToString(item.suffixDisplayParts);\r\n                ret.signatures.push(signature);\r\n            });\r\n            return ret;\r\n        });\r\n    };\r\n    return SignatureHelpAdapter;\r\n}(Adapter));\r\nexport { SignatureHelpAdapter };\r\n// --- hover ------\r\nvar QuickInfoAdapter = /** @class */ (function (_super) {\r\n    __extends(QuickInfoAdapter, _super);\r\n    function QuickInfoAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    QuickInfoAdapter.prototype.provideHover = function (model, position, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getQuickInfoAtPosition(resource.toString(), _this._positionToOffset(resource, position));\r\n        }).then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var documentation = displayPartsToString(info.documentation);\r\n            var tags = info.tags ? info.tags.map(function (tag) {\r\n                var label = \"*@\" + tag.name + \"*\";\r\n                if (!tag.text) {\r\n                    return label;\r\n                }\r\n                return label + (tag.text.match(/\\r\\n|\\n/g) ? ' \\n' + tag.text : \" - \" + tag.text);\r\n            })\r\n                .join('  \\n\\n') : '';\r\n            var contents = displayPartsToString(info.displayParts);\r\n            return {\r\n                range: _this._textSpanToRange(resource, info.textSpan),\r\n                contents: [{\r\n                        value: '```js\\n' + contents + '\\n```\\n'\r\n                    }, {\r\n                        value: documentation + (tags ? '\\n\\n' + tags : '')\r\n                    }]\r\n            };\r\n        });\r\n    };\r\n    return QuickInfoAdapter;\r\n}(Adapter));\r\nexport { QuickInfoAdapter };\r\n// --- occurrences ------\r\nvar OccurrencesAdapter = /** @class */ (function (_super) {\r\n    __extends(OccurrencesAdapter, _super);\r\n    function OccurrencesAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OccurrencesAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getOccurrencesAtPosition(resource.toString(), _this._positionToOffset(resource, position));\r\n        }).then(function (entries) {\r\n            if (!entries) {\r\n                return;\r\n            }\r\n            return entries.map(function (entry) {\r\n                return {\r\n                    range: _this._textSpanToRange(resource, entry.textSpan),\r\n                    kind: entry.isWriteAccess ? monaco.languages.DocumentHighlightKind.Write : monaco.languages.DocumentHighlightKind.Text\r\n                };\r\n            });\r\n        });\r\n    };\r\n    return OccurrencesAdapter;\r\n}(Adapter));\r\nexport { OccurrencesAdapter };\r\n// --- definition ------\r\nvar DefinitionAdapter = /** @class */ (function (_super) {\r\n    __extends(DefinitionAdapter, _super);\r\n    function DefinitionAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DefinitionAdapter.prototype.provideDefinition = function (model, position, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getDefinitionAtPosition(resource.toString(), _this._positionToOffset(resource, position));\r\n        }).then(function (entries) {\r\n            if (!entries) {\r\n                return;\r\n            }\r\n            var result = [];\r\n            for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\r\n                var entry = entries_1[_i];\r\n                var uri = Uri.parse(entry.fileName);\r\n                if (monaco.editor.getModel(uri)) {\r\n                    result.push({\r\n                        uri: uri,\r\n                        range: _this._textSpanToRange(uri, entry.textSpan)\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        });\r\n    };\r\n    return DefinitionAdapter;\r\n}(Adapter));\r\nexport { DefinitionAdapter };\r\n// --- references ------\r\nvar ReferenceAdapter = /** @class */ (function (_super) {\r\n    __extends(ReferenceAdapter, _super);\r\n    function ReferenceAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ReferenceAdapter.prototype.provideReferences = function (model, position, context, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getReferencesAtPosition(resource.toString(), _this._positionToOffset(resource, position));\r\n        }).then(function (entries) {\r\n            if (!entries) {\r\n                return;\r\n            }\r\n            var result = [];\r\n            for (var _i = 0, entries_2 = entries; _i < entries_2.length; _i++) {\r\n                var entry = entries_2[_i];\r\n                var uri = Uri.parse(entry.fileName);\r\n                if (monaco.editor.getModel(uri)) {\r\n                    result.push({\r\n                        uri: uri,\r\n                        range: _this._textSpanToRange(uri, entry.textSpan)\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        });\r\n    };\r\n    return ReferenceAdapter;\r\n}(Adapter));\r\nexport { ReferenceAdapter };\r\n// --- outline ------\r\nvar OutlineAdapter = /** @class */ (function (_super) {\r\n    __extends(OutlineAdapter, _super);\r\n    function OutlineAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OutlineAdapter.prototype.provideDocumentSymbols = function (model, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) { return worker.getNavigationBarItems(resource.toString()); }).then(function (items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            var convert = function (bucket, item, containerLabel) {\r\n                var result = {\r\n                    name: item.text,\r\n                    detail: '',\r\n                    kind: (outlineTypeTable[item.kind] || monaco.languages.SymbolKind.Variable),\r\n                    range: _this._textSpanToRange(resource, item.spans[0]),\r\n                    selectionRange: _this._textSpanToRange(resource, item.spans[0]),\r\n                    containerName: containerLabel\r\n                };\r\n                if (item.childItems && item.childItems.length > 0) {\r\n                    for (var _i = 0, _a = item.childItems; _i < _a.length; _i++) {\r\n                        var child = _a[_i];\r\n                        convert(bucket, child, result.name);\r\n                    }\r\n                }\r\n                bucket.push(result);\r\n            };\r\n            var result = [];\r\n            items.forEach(function (item) { return convert(result, item); });\r\n            return result;\r\n        });\r\n    };\r\n    return OutlineAdapter;\r\n}(Adapter));\r\nexport { OutlineAdapter };\r\nvar Kind = /** @class */ (function () {\r\n    function Kind() {\r\n    }\r\n    Kind.unknown = '';\r\n    Kind.keyword = 'keyword';\r\n    Kind.script = 'script';\r\n    Kind.module = 'module';\r\n    Kind.class = 'class';\r\n    Kind.interface = 'interface';\r\n    Kind.type = 'type';\r\n    Kind.enum = 'enum';\r\n    Kind.variable = 'var';\r\n    Kind.localVariable = 'local var';\r\n    Kind.function = 'function';\r\n    Kind.localFunction = 'local function';\r\n    Kind.memberFunction = 'method';\r\n    Kind.memberGetAccessor = 'getter';\r\n    Kind.memberSetAccessor = 'setter';\r\n    Kind.memberVariable = 'property';\r\n    Kind.constructorImplementation = 'constructor';\r\n    Kind.callSignature = 'call';\r\n    Kind.indexSignature = 'index';\r\n    Kind.constructSignature = 'construct';\r\n    Kind.parameter = 'parameter';\r\n    Kind.typeParameter = 'type parameter';\r\n    Kind.primitiveType = 'primitive type';\r\n    Kind.label = 'label';\r\n    Kind.alias = 'alias';\r\n    Kind.const = 'const';\r\n    Kind.let = 'let';\r\n    Kind.warning = 'warning';\r\n    return Kind;\r\n}());\r\nexport { Kind };\r\nvar outlineTypeTable = Object.create(null);\r\noutlineTypeTable[Kind.module] = monaco.languages.SymbolKind.Module;\r\noutlineTypeTable[Kind.class] = monaco.languages.SymbolKind.Class;\r\noutlineTypeTable[Kind.enum] = monaco.languages.SymbolKind.Enum;\r\noutlineTypeTable[Kind.interface] = monaco.languages.SymbolKind.Interface;\r\noutlineTypeTable[Kind.memberFunction] = monaco.languages.SymbolKind.Method;\r\noutlineTypeTable[Kind.memberVariable] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberGetAccessor] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberSetAccessor] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.const] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.localVariable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.function] = monaco.languages.SymbolKind.Function;\r\noutlineTypeTable[Kind.localFunction] = monaco.languages.SymbolKind.Function;\r\n// --- formatting ----\r\nvar FormatHelper = /** @class */ (function (_super) {\r\n    __extends(FormatHelper, _super);\r\n    function FormatHelper() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatHelper._convertOptions = function (options) {\r\n        return {\r\n            ConvertTabsToSpaces: options.insertSpaces,\r\n            TabSize: options.tabSize,\r\n            IndentSize: options.tabSize,\r\n            IndentStyle: IndentStyle.Smart,\r\n            NewLineCharacter: '\\n',\r\n            InsertSpaceAfterCommaDelimiter: true,\r\n            InsertSpaceAfterSemicolonInForStatements: true,\r\n            InsertSpaceBeforeAndAfterBinaryOperators: true,\r\n            InsertSpaceAfterKeywordsInControlFlowStatements: true,\r\n            InsertSpaceAfterFunctionKeywordForAnonymousFunctions: true,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: false,\r\n            PlaceOpenBraceOnNewLineForControlBlocks: false,\r\n            PlaceOpenBraceOnNewLineForFunctions: false\r\n        };\r\n    };\r\n    FormatHelper.prototype._convertTextChanges = function (uri, change) {\r\n        return {\r\n            text: change.newText,\r\n            range: this._textSpanToRange(uri, change.span)\r\n        };\r\n    };\r\n    return FormatHelper;\r\n}(Adapter));\r\nexport { FormatHelper };\r\nvar FormatAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatAdapter, _super);\r\n    function FormatAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatAdapter.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getFormattingEditsForRange(resource.toString(), _this._positionToOffset(resource, { lineNumber: range.startLineNumber, column: range.startColumn }), _this._positionToOffset(resource, { lineNumber: range.endLineNumber, column: range.endColumn }), FormatHelper._convertOptions(options));\r\n        }).then(function (edits) {\r\n            if (edits) {\r\n                return edits.map(function (edit) { return _this._convertTextChanges(resource, edit); });\r\n            }\r\n        });\r\n    };\r\n    return FormatAdapter;\r\n}(FormatHelper));\r\nexport { FormatAdapter };\r\nvar FormatOnTypeAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatOnTypeAdapter, _super);\r\n    function FormatOnTypeAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(FormatOnTypeAdapter.prototype, \"autoFormatTriggerCharacters\", {\r\n        get: function () {\r\n            return [';', '}', '\\n'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FormatOnTypeAdapter.prototype.provideOnTypeFormattingEdits = function (model, position, ch, options, token) {\r\n        var _this = this;\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker.getFormattingEditsAfterKeystroke(resource.toString(), _this._positionToOffset(resource, position), ch, FormatHelper._convertOptions(options));\r\n        }).then(function (edits) {\r\n            if (edits) {\r\n                return edits.map(function (edit) { return _this._convertTextChanges(resource, edit); });\r\n            }\r\n        });\r\n    };\r\n    return FormatOnTypeAdapter;\r\n}(FormatHelper));\r\nexport { FormatOnTypeAdapter };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { WorkerManager } from './workerManager.js';\r\nimport * as languageFeatures from './languageFeatures.js';\r\nvar javaScriptWorker;\r\nvar typeScriptWorker;\r\nexport function setupTypeScript(defaults) {\r\n    typeScriptWorker = setupMode(defaults, 'typescript');\r\n}\r\nexport function setupJavaScript(defaults) {\r\n    javaScriptWorker = setupMode(defaults, 'javascript');\r\n}\r\nexport function getJavaScriptWorker() {\r\n    return new monaco.Promise(function (resolve, reject) {\r\n        if (!javaScriptWorker) {\r\n            return reject(\"JavaScript not registered!\");\r\n        }\r\n        resolve(javaScriptWorker);\r\n    });\r\n}\r\nexport function getTypeScriptWorker() {\r\n    return new monaco.Promise(function (resolve, reject) {\r\n        if (!typeScriptWorker) {\r\n            return reject(\"TypeScript not registered!\");\r\n        }\r\n        resolve(typeScriptWorker);\r\n    });\r\n}\r\nfunction setupMode(defaults, modeId) {\r\n    var client = new WorkerManager(modeId, defaults);\r\n    var worker = function (first) {\r\n        var more = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            more[_i - 1] = arguments[_i];\r\n        }\r\n        return client.getLanguageServiceWorker.apply(client, [first].concat(more));\r\n    };\r\n    monaco.languages.registerCompletionItemProvider(modeId, new languageFeatures.SuggestAdapter(worker));\r\n    monaco.languages.registerSignatureHelpProvider(modeId, new languageFeatures.SignatureHelpAdapter(worker));\r\n    monaco.languages.registerHoverProvider(modeId, new languageFeatures.QuickInfoAdapter(worker));\r\n    monaco.languages.registerDocumentHighlightProvider(modeId, new languageFeatures.OccurrencesAdapter(worker));\r\n    monaco.languages.registerDefinitionProvider(modeId, new languageFeatures.DefinitionAdapter(worker));\r\n    monaco.languages.registerReferenceProvider(modeId, new languageFeatures.ReferenceAdapter(worker));\r\n    monaco.languages.registerDocumentSymbolProvider(modeId, new languageFeatures.OutlineAdapter(worker));\r\n    monaco.languages.registerDocumentRangeFormattingEditProvider(modeId, new languageFeatures.FormatAdapter(worker));\r\n    monaco.languages.registerOnTypeFormattingEditProvider(modeId, new languageFeatures.FormatOnTypeAdapter(worker));\r\n    new languageFeatures.DiagnostcsAdapter(defaults, modeId, worker);\r\n    return worker;\r\n}\r\n"]}